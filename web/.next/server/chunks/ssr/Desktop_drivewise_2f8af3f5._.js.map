{"version":3,"sources":["turbopack:///[project]/Desktop/drivewise/web/components/ui/skeleton.tsx","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/circle-alert.ts","turbopack:///[project]/Desktop/drivewise/web/types/database.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/arrow-right.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/trending-up.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/zap.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/trophy.ts","turbopack:///[project]/Desktop/drivewise/web/hooks/use-decision-trainer.ts","turbopack:///[project]/Desktop/drivewise/web/hooks/use-test-attempts.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/activity.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/target.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/brain.ts"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('circle-alert', __iconNode);\n\nexport default CircleAlert;\n","// Database types for DriveWise\r\n\r\nexport type LicenseCategory = 'A' | 'B' | 'C' | 'D';\r\nexport type LanguageCode = 'sq';\r\n\r\nexport interface Question {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  question_text: string;\r\n  option_a: string;\r\n  option_b: string;\r\n  option_c: string;\r\n  correct_answer: 'A' | 'B' | 'C';\r\n  image_url?: string;\r\n  topic?: string;\r\n  difficulty?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestSet {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  name?: string;\r\n  is_random: boolean;\r\n  question_count: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email?: string;\r\n  full_name?: string;\r\n  phone?: string;\r\n  date_of_birth?: string;\r\n  address?: string;\r\n  is_admin: boolean;\r\n  is_blocked: boolean;\r\n  app_rating?: number;\r\n  avatar_url?: string;\r\n  subscription_id?: string | null;\r\n  is_premium?: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  time_taken_seconds?: number;\r\n  is_assigned: boolean;\r\n  assigned_by?: string;\r\n  started_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TestAttemptAnswer {\r\n  id: string;\r\n  test_attempt_id: string;\r\n  question_id: string;\r\n  selected_answer: string;\r\n  is_correct: boolean;\r\n  answered_at: string;\r\n}\r\n\r\nexport interface StudyMaterial {\r\n  id: string;\r\n  chapter_id: number;\r\n  category?: LicenseCategory;\r\n  title: string;\r\n  content: Record<string, unknown>;\r\n  order_index: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface MaterialImage {\r\n  id: string;\r\n  material_id: string;\r\n  image_url: string;\r\n  caption?: string;\r\n  order_index?: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TrafficSign {\r\n  id: string;\r\n  code: string;\r\n  category: string;\r\n  name: string;\r\n  description: string;\r\n  image_url?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Category metadata\r\nexport const CATEGORY_INFO: Record<LicenseCategory, { name: string; description: string }> = {\r\n  A: { name: 'Kategoria A', description: 'Motoçikleta' },\r\n  B: { name: 'Kategoria B', description: 'Vetura' },\r\n  C: { name: 'Kategoria C', description: 'Kamionë' },\r\n  D: { name: 'Kategoria D', description: 'Autobusë' },\r\n};\r\n\r\nexport interface UserPlan {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Order {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PaymentTransaction {\r\n  id: string;\r\n  order_id: string;\r\n  provider: string;\r\n  provider_status: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  raw_payload: any;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Language metadata\r\nexport const LANGUAGE_INFO: Record<LanguageCode, { name: string; nativeName: string }> = {\r\n  sq: { name: 'Albanian', nativeName: 'Shqip' },\r\n};\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'm12 5 7 7-7 7', key: 'xquz4c' }],\n];\n\n/**\n * @component @name ArrowRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJtMTIgNSA3IDctNyA3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowRight = createLucideIcon('arrow-right', __iconNode);\n\nexport default ArrowRight;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 7h6v6', key: 'box55l' }],\n  ['path', { d: 'm22 7-8.5 8.5-5-5L2 17', key: '1t1m79' }],\n];\n\n/**\n * @component @name TrendingUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgN2g2djYiIC8+CiAgPHBhdGggZD0ibTIyIDctOC41IDguNS01LTVMMiAxNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/trending-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingUp = createLucideIcon('trending-up', __iconNode);\n\nexport default TrendingUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z',\n      key: '1xq2db',\n    },\n  ],\n];\n\n/**\n * @component @name Zap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxNGExIDEgMCAwIDEtLjc4LTEuNjNsOS45LTEwLjJhLjUuNSAwIDAgMSAuODYuNDZsLTEuOTIgNi4wMkExIDEgMCAwIDAgMTMgMTBoN2ExIDEgMCAwIDEgLjc4IDEuNjNsLTkuOSAxMC4yYS41LjUgMCAwIDEtLjg2LS40NmwxLjkyLTYuMDJBMSAxIDAgMCAwIDExIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Zap = createLucideIcon('zap', __iconNode);\n\nexport default Zap;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978', key: '1n3hpd' }],\n  ['path', { d: 'M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978', key: 'rfe1zi' }],\n  ['path', { d: 'M18 9h1.5a1 1 0 0 0 0-5H18', key: '7xy6bh' }],\n  ['path', { d: 'M4 22h16', key: '57wxv0' }],\n  ['path', { d: 'M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z', key: '1mhfuq' }],\n  ['path', { d: 'M6 9H4.5a1 1 0 0 1 0-5H6', key: 'tex48p' }],\n];\n\n/**\n * @component @name Trophy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTQuNjZ2MS42MjZhMiAyIDAgMCAxLS45NzYgMS42OTZBNSA1IDAgMCAwIDcgMjEuOTc4IiAvPgogIDxwYXRoIGQ9Ik0xNCAxNC42NnYxLjYyNmEyIDIgMCAwIDAgLjk3NiAxLjY5NkE1IDUgMCAwIDEgMTcgMjEuOTc4IiAvPgogIDxwYXRoIGQ9Ik0xOCA5aDEuNWExIDEgMCAwIDAgMC01SDE4IiAvPgogIDxwYXRoIGQ9Ik00IDIyaDE2IiAvPgogIDxwYXRoIGQ9Ik02IDlhNiA2IDAgMCAwIDEyIDBWM2ExIDEgMCAwIDAtMS0xSDdhMSAxIDAgMCAwLTEgMXoiIC8+CiAgPHBhdGggZD0iTTYgOUg0LjVhMSAxIDAgMCAxIDAtNUg2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trophy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trophy = createLucideIcon('trophy', __iconNode);\n\nexport default Trophy;\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface DecisionTrainerProgress {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  total_xp: number;\r\n  scenarios_completed: number;\r\n  correct_answers: number;\r\n  total_attempts: number;\r\n  current_streak: number;\r\n  best_streak: number;\r\n  best_time_seconds: number | null;\r\n  average_time_seconds: number | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface DecisionTrainerAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  scenario_id: string;\r\n  category: string;\r\n  is_correct: boolean;\r\n  selected_options: number[];\r\n  time_taken_ms: number;\r\n  xp_earned: number;\r\n  created_at: string;\r\n}\r\n\r\n// Get user's progress for a specific category\r\nexport function useDecisionTrainerProgress(userId?: string, category?: string) {\r\n  return useQuery({\r\n    queryKey: ['decision-trainer-progress', userId, category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      let query = supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n      \r\n      if (category) {\r\n        query = query.eq('category', category);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n\r\n      if (error) throw error;\r\n      return data || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Get user's overall stats across all categories\r\nexport function useDecisionTrainerStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['decision-trainer-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n\r\n      if (error) throw error;\r\n\r\n      const progress = data || [];\r\n      \r\n      // Calculate overall stats\r\n      const totalXp = progress.reduce((sum, p) => sum + p.total_xp, 0);\r\n      const totalScenarios = progress.reduce((sum, p) => sum + p.scenarios_completed, 0);\r\n      const totalCorrect = progress.reduce((sum, p) => sum + p.correct_answers, 0);\r\n      const totalAttempts = progress.reduce((sum, p) => sum + p.total_attempts, 0);\r\n      const bestStreak = Math.max(...progress.map(p => p.best_streak), 0);\r\n      const bestTime = Math.min(...progress.map(p => p.best_time_seconds).filter(t => t !== null), Infinity);\r\n      const accuracy = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 0;\r\n\r\n      return {\r\n        totalXp,\r\n        totalScenarios,\r\n        totalCorrect,\r\n        totalAttempts,\r\n        bestStreak,\r\n        bestTime: bestTime === Infinity ? null : bestTime,\r\n        accuracy,\r\n        categoriesCompleted: progress.length,\r\n        categoryProgress: progress,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 60 * 1000, // 1 minute\r\n  });\r\n}\r\n\r\n// Get IDs of scenarios where the user's latest attempt was incorrect\r\nexport function useWeakScenarioIds(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['weak-scenario-ids', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      // Get all attempts for this user, ordered by date\r\n      const { data, error } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('scenario_id, is_correct, created_at')\r\n        .eq('user_id', userId!)\r\n        .order('created_at', { ascending: true }); // Oldest to newest\r\n\r\n      if (error) throw error;\r\n\r\n      // Calculate latest status for each scenario\r\n      const latestStatus = new Map<string, boolean>();\r\n      (data || []).forEach((attempt) => {\r\n        latestStatus.set(attempt.scenario_id, attempt.is_correct);\r\n      });\r\n\r\n      // Filter for IDs where the latest attempt was FALSE (incorrect)\r\n      const weakIds: string[] = [];\r\n      latestStatus.forEach((isCorrect, id) => {\r\n        if (!isCorrect) {\r\n          weakIds.push(id);\r\n        }\r\n      });\r\n\r\n      return weakIds;\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0, // Always fresh\r\n  });\r\n}\r\n\r\n// Submit scenario attempt and update progress\r\nexport function useSubmitScenarioAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({\r\n      userId,\r\n      scenarioId,\r\n      category,\r\n      isCorrect,\r\n      selectedOptions,\r\n      timeTakenMs,\r\n      xpEarned,\r\n    }: {\r\n      userId: string;\r\n      scenarioId: string;\r\n      category: string;\r\n      isCorrect: boolean;\r\n      selectedOptions: number[];\r\n      timeTakenMs: number;\r\n      xpEarned: number;\r\n    }) => {\r\n      const supabase = createClient();\r\n\r\n      // 1. Insert the attempt record\r\n      const { data: attempt, error: attemptError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .insert({\r\n          user_id: userId,\r\n          scenario_id: scenarioId,\r\n          category,\r\n          is_correct: isCorrect,\r\n          selected_options: selectedOptions,\r\n          time_taken_ms: timeTakenMs,\r\n          xp_earned: xpEarned,\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (attemptError) throw attemptError;\r\n\r\n      // 2. Get current progress for this category\r\n      const { data: currentProgress } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .eq('category', category)\r\n        .maybeSingle();\r\n\r\n      // 3. Calculate new progress values\r\n      const newTotalXp = (currentProgress?.total_xp || 0) + xpEarned;\r\n      const newScenariosCompleted = (currentProgress?.scenarios_completed || 0) + 1;\r\n      const newCorrectAnswers = (currentProgress?.correct_answers || 0) + (isCorrect ? 1 : 0);\r\n      const newTotalAttempts = (currentProgress?.total_attempts || 0) + 1;\r\n      \r\n      // Calculate streak\r\n      let newCurrentStreak = 0;\r\n      let newBestStreak = currentProgress?.best_streak || 0;\r\n      \r\n      if (isCorrect) {\r\n        newCurrentStreak = (currentProgress?.current_streak || 0) + 1;\r\n        newBestStreak = Math.max(newBestStreak, newCurrentStreak);\r\n      } else {\r\n        newCurrentStreak = 0;\r\n      }\r\n\r\n      // Calculate time stats\r\n      const timeInSeconds = Math.round(timeTakenMs / 1000);\r\n      const newBestTime = currentProgress?.best_time_seconds \r\n        ? Math.min(currentProgress.best_time_seconds, timeInSeconds)\r\n        : timeInSeconds;\r\n      \r\n      // Calculate average time\r\n      const totalTimeMs = (currentProgress?.average_time_seconds || 0) * (currentProgress?.total_attempts || 0) + timeTakenMs;\r\n      const newAverageTime = Math.round(totalTimeMs / newTotalAttempts / 1000);\r\n\r\n      // 4. Upsert progress record\r\n      const { data: progress, error: progressError } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .upsert({\r\n          user_id: userId,\r\n          category,\r\n          total_xp: newTotalXp,\r\n          scenarios_completed: newScenariosCompleted,\r\n          correct_answers: newCorrectAnswers,\r\n          total_attempts: newTotalAttempts,\r\n          current_streak: newCurrentStreak,\r\n          best_streak: newBestStreak,\r\n          best_time_seconds: newBestTime,\r\n          average_time_seconds: newAverageTime,\r\n          updated_at: new Date().toISOString(),\r\n        }, {\r\n          onConflict: 'user_id,category'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (progressError) throw progressError;\r\n\r\n      return {\r\n        attempt,\r\n        progress,\r\n        newStats: {\r\n          totalXp: newTotalXp,\r\n          scenariosCompleted: newScenariosCompleted,\r\n          correctAnswers: newCorrectAnswers,\r\n          totalAttempts: newTotalAttempts,\r\n          currentStreak: newCurrentStreak,\r\n          bestStreak: newBestStreak,\r\n          accuracy: Math.round((newCorrectAnswers / newTotalAttempts) * 100),\r\n        }\r\n      };\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-progress', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-stats', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['leaderboard'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Complete category session (batch update for multiple scenarios)\r\nexport function useCompleteCategory() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({\r\n      userId,\r\n      category,\r\n      attempts,\r\n      totalTimeMs,\r\n    }: {\r\n      userId: string;\r\n      category: string;\r\n      attempts: Array<{\r\n        scenarioId: string;\r\n        isCorrect: boolean;\r\n        selectedOptions: number[];\r\n        timeTakenMs: number;\r\n        xpEarned: number;\r\n      }>;\r\n      totalTimeMs: number;\r\n    }) => {\r\n      const supabase = createClient();\r\n\r\n      // Insert all attempts\r\n      const attemptRecords = attempts.map(attempt => ({\r\n        user_id: userId,\r\n        scenario_id: attempt.scenarioId,\r\n        category,\r\n        is_correct: attempt.isCorrect,\r\n        selected_options: attempt.selectedOptions,\r\n        time_taken_ms: attempt.timeTakenMs,\r\n        xp_earned: attempt.xpEarned,\r\n      }));\r\n\r\n      const { error: attemptsError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .insert(attemptRecords);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n\r\n      // Calculate session stats\r\n      const totalXpEarned = attempts.reduce((sum, a) => sum + a.xpEarned, 0);\r\n      const correctCount = attempts.filter(a => a.isCorrect).length;\r\n      const totalCount = attempts.length;\r\n      \r\n      // Calculate streak (consecutive correct answers)\r\n      let maxStreak = 0;\r\n      let currentStreak = 0;\r\n      for (const attempt of attempts) {\r\n        if (attempt.isCorrect) {\r\n          currentStreak++;\r\n          maxStreak = Math.max(maxStreak, currentStreak);\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      }\r\n\r\n      // Get current progress\r\n      const { data: currentProgress } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .eq('category', category)\r\n        .maybeSingle();\r\n\r\n      // Update progress\r\n      const newTotalXp = (currentProgress?.total_xp || 0) + totalXpEarned;\r\n      const newScenariosCompleted = (currentProgress?.scenarios_completed || 0) + totalCount;\r\n      const newCorrectAnswers = (currentProgress?.correct_answers || 0) + correctCount;\r\n      const newTotalAttempts = (currentProgress?.total_attempts || 0) + totalCount;\r\n      const newBestStreak = Math.max(currentProgress?.best_streak || 0, maxStreak);\r\n      \r\n      const avgTimeSeconds = Math.round(totalTimeMs / totalCount / 1000);\r\n      const newBestTime = currentProgress?.best_time_seconds \r\n        ? Math.min(currentProgress.best_time_seconds, avgTimeSeconds)\r\n        : avgTimeSeconds;\r\n\r\n      const { data: progress, error: progressError } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .upsert({\r\n          user_id: userId,\r\n          category,\r\n          total_xp: newTotalXp,\r\n          scenarios_completed: newScenariosCompleted,\r\n          correct_answers: newCorrectAnswers,\r\n          total_attempts: newTotalAttempts,\r\n          current_streak: maxStreak, // Set to session streak\r\n          best_streak: newBestStreak,\r\n          best_time_seconds: newBestTime,\r\n          average_time_seconds: avgTimeSeconds,\r\n          updated_at: new Date().toISOString(),\r\n        }, {\r\n          onConflict: 'user_id,category'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (progressError) throw progressError;\r\n\r\n      return {\r\n        progress,\r\n        sessionStats: {\r\n          totalXpEarned,\r\n          correctCount,\r\n          totalCount,\r\n          accuracy: Math.round((correctCount / totalCount) * 100),\r\n          maxStreak,\r\n          avgTimeSeconds,\r\n        }\r\n      };\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-progress', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-stats', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['leaderboard'] });\r\n    },\r\n  });\r\n}\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface DashboardStats {\r\n  totalTests: number;\r\n  averageScore: number;\r\n  bestScore: number;\r\n  testsThisWeek: number;\r\n  streak: number;\r\n  passedTests: number;\r\n  failedTests: number;\r\n}\r\n\r\nexport interface ProgressData {\r\n  date: string;\r\n  score: number;\r\n}\r\n\r\nexport interface RecentTest {\r\n  id: string;\r\n  category: string;\r\n  testNumber: string;\r\n  score: number;\r\n  date: string;\r\n  passed: boolean;\r\n}\r\n\r\nexport interface WeakTopicStat {\r\n  topic: string;\r\n  totalQuestions: number;\r\n  correct: number;\r\n  accuracy: number;\r\n}\r\n\r\nexport interface WeakTopicsSummary {\r\n  topics: WeakTopicStat[];\r\n  weakTopics: WeakTopicStat[];\r\n  dominantCategory: string | null;\r\n}\r\n\r\nexport interface TestAchievements {\r\n  totalTests: number;\r\n  bestPassStreak: number;\r\n  totalQuestionsAnswered: number;\r\n  firstTestCompleted: boolean;\r\n  fivePassesInRow: boolean;\r\n  hundredQuestionsAnswered: boolean;\r\n}\r\n\r\nexport interface GlobalDailyStreak {\r\n  currentStreak: number;\r\n  bestStreak: number;\r\n}\r\n\r\n// Get user's test attempts with dashboard stats\r\nexport function useTestAttempts(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['test-attempts', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data: attempts, error } = await supabase\r\n        .from('test_attempts')\r\n        .select('*')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return attempts || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute unified daily streak across tests and Decision Trainer\r\nexport function useGlobalDailyStreak(userId?: string) {\r\n  return useQuery<GlobalDailyStreak>({\r\n    queryKey: ['global-daily-streak', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempt dates\r\n      const { data: testAttempts, error: testError } = await supabase\r\n        .from('test_attempts')\r\n        .select('completed_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (testError) throw testError;\r\n\r\n      // Get all decision trainer attempt dates\r\n      const { data: dtAttempts, error: dtError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('created_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (dtError) throw dtError;\r\n\r\n      const activeDayTimestamps: number[] = [];\r\n\r\n      (testAttempts || []).forEach((a: { completed_at: string }) => {\r\n        const d = new Date(a.completed_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      (dtAttempts || []).forEach((a: { created_at: string }) => {\r\n        const d = new Date(a.created_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      const uniqueDays = [...new Set(activeDayTimestamps)].sort((a, b) => b - a); // newest first\r\n\r\n      if (uniqueDays.length === 0) {\r\n        return { currentStreak: 0, bestStreak: 0 };\r\n      }\r\n\r\n      // Compute current streak: consecutive days ending today or yesterday\r\n      const now = new Date();\r\n      const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n      const yesterdayStart = todayStart - 86400000;\r\n\r\n      let currentStreak = 0;\r\n      let bestStreak = 0;\r\n\r\n      // Only count streak if last active day is today or yesterday\r\n      if (uniqueDays[0] === todayStart || uniqueDays[0] === yesterdayStart) {\r\n        currentStreak = 1;\r\n        bestStreak = 1;\r\n\r\n        for (let i = 1; i < uniqueDays.length; i++) {\r\n          const expectedPrevDay = uniqueDays[i - 1] - 86400000;\r\n          if (uniqueDays[i] === expectedPrevDay) {\r\n            currentStreak++;\r\n            if (currentStreak > bestStreak) {\r\n              bestStreak = currentStreak;\r\n            }\r\n          } else {\r\n            // streak broken\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return { currentStreak, bestStreak };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute simple theory test achievements for a user\r\nexport function useTestAchievements(userId?: string) {\r\n  return useQuery<TestAchievements>({\r\n    queryKey: ['test-achievements', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempts for this user (ordered oldest -> newest for streak calc)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id, percentage, total_questions, completed_at')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: true });\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const testAttempts = attempts || [];\r\n      const totalTests = testAttempts.length;\r\n\r\n      // Best streak of passed tests in a row\r\n      let bestPassStreak = 0;\r\n      let currentStreak = 0;\r\n      testAttempts.forEach((attempt) => {\r\n        const passed = Number(attempt.percentage) >= 80;\r\n        if (passed) {\r\n          currentStreak++;\r\n          if (currentStreak > bestPassStreak) {\r\n            bestPassStreak = currentStreak;\r\n          }\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      });\r\n\r\n      // Total questions answered across all tests (count answers rows)\r\n      let totalQuestionsAnswered = 0;\r\n      if (testAttempts.length > 0) {\r\n        const attemptIds = testAttempts.map(a => a.id);\r\n\r\n        const { count: answersCount, error: answersError } = await supabase\r\n          .from('test_attempt_answers')\r\n          .select('*', { count: 'exact', head: true })\r\n          .in('test_attempt_id', attemptIds);\r\n\r\n        if (answersError) throw answersError;\r\n        totalQuestionsAnswered = answersCount || 0;\r\n      }\r\n\r\n      const firstTestCompleted = totalTests >= 1;\r\n      const fivePassesInRow = bestPassStreak >= 5;\r\n      const hundredQuestionsAnswered = totalQuestionsAnswered >= 100;\r\n\r\n      return {\r\n        totalTests,\r\n        bestPassStreak,\r\n        totalQuestionsAnswered,\r\n        firstTestCompleted,\r\n        fivePassesInRow,\r\n        hundredQuestionsAnswered,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n\r\n// Get dashboard stats derived from test attempts (Optimized V2)\r\nexport function useDashboardStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['dashboard-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const emptyResult = {\r\n        stats: {\r\n          totalTests: 0,\r\n          averageScore: 0,\r\n          bestScore: 0,\r\n          testsThisWeek: 0,\r\n          streak: 0,\r\n          passedTests: 0,\r\n          failedTests: 0,\r\n        },\r\n        progressData: [] as ProgressData[],\r\n        recentTests: [] as RecentTest[],\r\n      };\r\n\r\n      try {\r\n        // Parallelize fetches\r\n        const [statsRes, progressRes, recentRes, streakRes] = await Promise.all([\r\n          supabase.rpc('get_dashboard_stats', { p_user_id: userId! }),\r\n          supabase.rpc('get_weekly_progress', { p_user_id: userId! }),\r\n          supabase.rpc('get_recent_tests', { p_user_id: userId!, p_limit: 4 }),\r\n          // We still need dates for streak, but we can select JUST dates\r\n          supabase.from('test_attempts').select('completed_at').eq('user_id', userId!).order('completed_at', { ascending: false })\r\n        ]);\r\n\r\n        if (statsRes.error) throw statsRes.error;\r\n        if (progressRes.error) throw progressRes.error;\r\n        if (recentRes.error) throw recentRes.error;\r\n\r\n        const statsData = statsRes.data?.[0] || {\r\n          total_tests: 0,\r\n          average_score: 0,\r\n          best_score: 0,\r\n          tests_this_week: 0,\r\n          passed_tests: 0,\r\n          failed_tests: 0\r\n        };\r\n\r\n        // Calculate streak\r\n        const testDates = (streakRes.data || []).map((test: any) => {\r\n          const date = new Date(test.completed_at);\r\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\r\n        });\r\n        const uniqueDateTimes = [...new Set(testDates)].sort((a, b) => b - a);\r\n\r\n        let streak = 0;\r\n        const now = new Date();\r\n        const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n        const yesterdayStart = todayStart - 86400000;\r\n\r\n        if (\r\n          uniqueDateTimes.length > 0 &&\r\n          (uniqueDateTimes[0] === todayStart || uniqueDateTimes[0] === yesterdayStart)\r\n        ) {\r\n          streak = 1;\r\n          for (let i = 1; i < uniqueDateTimes.length; i++) {\r\n            const expectedPrevDay = uniqueDateTimes[i - 1] - 86400000;\r\n            if (uniqueDateTimes[i] === expectedPrevDay) {\r\n              streak++;\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Format progress data\r\n        // Map database rows to 7-day chart format\r\n        const progressData: ProgressData[] = [];\r\n        const dbProgress = progressRes.data || [];\r\n        \r\n        for (let i = 6; i >= 0; i--) {\r\n          const d = new Date();\r\n          d.setDate(d.getDate() - i);\r\n          const dateStr = d.toISOString().split('T')[0]; // YYYY-MM-DD\r\n          const dayLabel = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][d.getDay()];\r\n          \r\n          const dayStat = dbProgress.find((p: any) => p.attempt_date === dateStr);\r\n          \r\n          progressData.push({\r\n            date: dayLabel,\r\n            score: dayStat ? dayStat.daily_avg_score : 0\r\n          });\r\n        }\r\n\r\n        // Format recent tests\r\n        const recentTests: RecentTest[] = (recentRes.data || []).map((test: any) => ({\r\n          id: test.id,\r\n          category: test.category,\r\n          testNumber: test.test_number || '1',\r\n          score: Number(test.percentage),\r\n          date: new Date(test.completed_at).toLocaleDateString(),\r\n          passed: Number(test.percentage) >= 80,\r\n        }));\r\n\r\n        return {\r\n          stats: {\r\n            totalTests: statsData.total_tests,\r\n            averageScore: statsData.average_score,\r\n            bestScore: statsData.best_score,\r\n            testsThisWeek: statsData.tests_this_week,\r\n            streak: streak, // Calculated locally for now\r\n            passedTests: statsData.passed_tests,\r\n            failedTests: statsData.failed_tests,\r\n          },\r\n          progressData,\r\n          recentTests,\r\n        };\r\n\r\n      } catch (error) {\r\n        console.error('Dashboard stats error:', error);\r\n        // Fallback to empty result if RPC fails (e.g. if migration not run)\r\n        return emptyResult;\r\n      }\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n  });\r\n}\r\n\r\n// Get paginated test history\r\nexport function useTestHistory(userId?: string, page: number = 1, pageSize: number = 6) {\r\n  return useQuery({\r\n    queryKey: ['test-history', userId, page, pageSize],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n\r\n      const [attemptsResult, countResult] = await Promise.all([\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .order('completed_at', { ascending: false })\r\n          .range(from, to),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId!)\r\n      ]);\r\n\r\n      if (attemptsResult.error) throw attemptsResult.error;\r\n      if (countResult.error) throw countResult.error;\r\n\r\n      return {\r\n        tests: attemptsResult.data || [],\r\n        totalCount: countResult.count || 0,\r\n        totalPages: Math.ceil((countResult.count || 0) / pageSize),\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Delete test attempt\r\nexport function useDeleteTestAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (testId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('id', testId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Clear all test attempts for user\r\nexport function useClearAllTestAttempts() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('user_id', userId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Get test count for category\r\nexport function useTestCount(category: string, enabled: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['test-count', category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('admin_questions')\r\n        .select('test_number')\r\n        .eq('category', category);\r\n\r\n      if (error) throw error;\r\n      \r\n      // Get unique test numbers\r\n      const uniqueTests = [...new Set((data || []).map(q => q.test_number))];\r\n      return uniqueTests.length;\r\n    },\r\n    staleTime: 10 * 60 * 1000, // 10 minutes - test count doesn't change often\r\n    enabled: enabled && !!category,\r\n  });\r\n}\r\n// Get overall weak-topic statistics across all past tests for a user\r\nexport function useWeakTopics(userId?: string) {\r\n  return useQuery<WeakTopicsSummary>({\r\n    queryKey: ['weak-topics', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // 1) Get all test attempts for this user (limit to last 50 for performance/stability)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const attemptIds = (attempts || []).map(a => a.id);\r\n      if (attemptIds.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      // 2) Get all answers for those attempts\r\n      const { data: answers, error: answersError } = await supabase\r\n        .from('test_attempt_answers')\r\n        .select('question_id, is_correct')\r\n        .in('test_attempt_id', attemptIds);\r\n\r\n      if (answersError) throw answersError;\r\n      if (!answers || answers.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      const questionIds = [...new Set(answers.map(a => a.question_id))];\r\n\r\n      // 3) Get topics AND categories for those questions\r\n      const { data: questions, error: questionsError } = await supabase\r\n        .from('admin_questions')\r\n        .select('id, topic, category')\r\n        .in('id', questionIds);\r\n\r\n      if (questionsError) throw questionsError;\r\n\r\n      const topicByQuestionId = new Map<string, { topic: string | null, category: string | null }>();\r\n      (questions || []).forEach((q: { id: string; topic: string | null; category: string | null }) => {\r\n        topicByQuestionId.set(q.id, { topic: q.topic ?? null, category: q.category ?? null });\r\n      });\r\n\r\n      const topicStatsMap: Record<string, { total: number; correct: number; category: string | null }> = {};\r\n\r\n      answers.forEach((ans: { question_id: string; is_correct: boolean }) => {\r\n        const info = topicByQuestionId.get(ans.question_id);\r\n        if (!info || !info.topic) return;\r\n\r\n        const topic = info.topic;\r\n        if (!topicStatsMap[topic]) {\r\n          topicStatsMap[topic] = { total: 0, correct: 0, category: info.category };\r\n        }\r\n        topicStatsMap[topic].total += 1;\r\n        if (ans.is_correct) {\r\n          topicStatsMap[topic].correct += 1;\r\n        }\r\n      });\r\n\r\n      const topics: WeakTopicStat[] = Object.entries(topicStatsMap).map(([topic, stats]) => {\r\n        const accuracy = stats.total > 0 ? stats.correct / stats.total : 0;\r\n        return {\r\n          topic,\r\n          totalQuestions: stats.total,\r\n          correct: stats.correct,\r\n          accuracy,\r\n        };\r\n      }).sort((a, b) => a.accuracy - b.accuracy);\r\n\r\n      const weakTopics = topics.filter(t => t.totalQuestions >= 3 && t.accuracy < 0.8).slice(0, 5);\r\n\r\n      // Determine dominant category from weak topics\r\n      const categoryCounts: Record<string, number> = {};\r\n      weakTopics.forEach(wt => {\r\n        const cat = topicStatsMap[wt.topic]?.category;\r\n        if (cat) {\r\n          categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;\r\n        }\r\n      });\r\n      \r\n      let dominantCategory: string | null = null;\r\n      let maxCount = 0;\r\n      Object.entries(categoryCounts).forEach(([cat, count]) => {\r\n        if (count > maxCount) {\r\n          maxCount = count;\r\n          dominantCategory = cat;\r\n        }\r\n      });\r\n\r\n      // Fallback: if no dominant category found from weak topics (e.g. empty), use the most frequent category from all topics\r\n      if (!dominantCategory && topics.length > 0) {\r\n         const allCategoryCounts: Record<string, number> = {};\r\n         Object.values(topicStatsMap).forEach(stats => {\r\n            if (stats.category) {\r\n               allCategoryCounts[stats.category] = (allCategoryCounts[stats.category] || 0) + 1;\r\n            }\r\n         });\r\n         let allMaxCount = 0;\r\n         Object.entries(allCategoryCounts).forEach(([cat, count]) => {\r\n            if (count > allMaxCount) {\r\n               allMaxCount = count;\r\n               dominantCategory = cat;\r\n            }\r\n         });\r\n      }\r\n\r\n      return { topics, weakTopics, dominantCategory };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2',\n      key: '169zse',\n    },\n  ],\n];\n\n/**\n * @component @name Activity\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTJoLTIuNDhhMiAyIDAgMCAwLTEuOTMgMS40NmwtMi4zNSA4LjM2YS4yNS4yNSAwIDAgMS0uNDggMEw5LjI0IDIuMThhLjI1LjI1IDAgMCAwLS40OCAwbC0yLjM1IDguMzZBMiAyIDAgMCAxIDQuNDkgMTJIMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/activity\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Activity = createLucideIcon('activity', __iconNode);\n\nexport default Activity;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['circle', { cx: '12', cy: '12', r: '6', key: '1vlfrh' }],\n  ['circle', { cx: '12', cy: '12', r: '2', key: '1c9p78' }],\n];\n\n/**\n * @component @name Target\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/target\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Target = createLucideIcon('target', __iconNode);\n\nexport default Target;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 18V5', key: 'adv99a' }],\n  ['path', { d: 'M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4', key: '1e3is1' }],\n  ['path', { d: 'M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5', key: '1gqd8o' }],\n  ['path', { d: 'M17.997 5.125a4 4 0 0 1 2.526 5.77', key: 'iwvgf7' }],\n  ['path', { d: 'M18 18a4 4 0 0 0 2-7.464', key: 'efp6ie' }],\n  ['path', { d: 'M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517', key: '1gq6am' }],\n  ['path', { d: 'M6 18a4 4 0 0 1-2-7.464', key: 'k1g0md' }],\n  ['path', { d: 'M6.003 5.125a4 4 0 0 0-2.526 5.77', key: 'q97ue3' }],\n];\n\n/**\n * @component @name Brain\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMThWNSIgLz4KICA8cGF0aCBkPSJNMTUgMTNhNC4xNyA0LjE3IDAgMCAxLTMtNCA0LjE3IDQuMTcgMCAwIDEtMyA0IiAvPgogIDxwYXRoIGQ9Ik0xNy41OTggNi41QTMgMyAwIDEgMCAxMiA1YTMgMyAwIDEgMC01LjU5OCAxLjUiIC8+CiAgPHBhdGggZD0iTTE3Ljk5NyA1LjEyNWE0IDQgMCAwIDEgMi41MjYgNS43NyIgLz4KICA8cGF0aCBkPSJNMTggMThhNCA0IDAgMCAwIDItNy40NjQiIC8+CiAgPHBhdGggZD0iTTE5Ljk2NyAxNy40ODNBNCA0IDAgMSAxIDEyIDE4YTQgNCAwIDEgMS03Ljk2Ny0uNTE3IiAvPgogIDxwYXRoIGQ9Ik02IDE4YTQgNCAwIDAgMS0yLTcuNDY0IiAvPgogIDxwYXRoIGQ9Ik02LjAwMyA1LjEyNWE0IDQgMCAwIDAtMi41MjYgNS43NyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/brain\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Brain = createLucideIcon('brain', __iconNode);\n\nexport default Brain;\n"],"names":[],"mappings":"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","ignoreList":[1,3,4,5,6,9,10,11]}
module.exports=[23199,(a,b,c)=>{"use strict";b.exports=a.r(55117).vendored["react-ssr"].ReactServerDOMTurbopackClient},32421,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},93639,a=>{"use strict";var b=a.i(681),c=a.i(46444);function d({children:a,className:d,hover:e=!1,...f}){return(0,b.jsx)("div",{className:(0,c.cn)("relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl","shadow-[0_22px_70px_rgba(0,0,0,0.9)]","before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70",e&&"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]",d),...f,children:a})}a.s(["GlassCard",()=>d])},78330,38022,91660,26464,a=>{"use strict";var b=a.i(681),c=a.i(84813),d=a.i(1004),e=a.i(12710),f=a.i(53365),g=a.i(663),h=a.i(2017);let i=(0,h.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);a.s(["LogOut",()=>i],38022);let j=(0,h.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),k=(0,h.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>k],91660),a.s(["X",()=>k],26464);var l=a.i(81217),m=a.i(22309),n=a.i(61334);function o(){let[a,h]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),{t:q}=(0,l.useLanguage)(),{user:r,signOut:s,isAdmin:t,userProfile:u,loading:v}=(0,m.useAuth)(),w=(0,f.usePathname)(),x=u?.full_name||r?.user_metadata?.full_name||r?.email?.split("@")[0]||q("admin.user");(0,c.useEffect)(()=>{let a,b=()=>{a=requestAnimationFrame(()=>{p(window.scrollY>10)})};return window.addEventListener("scroll",b),()=>{window.removeEventListener("scroll",b),cancelAnimationFrame(a)}},[]);let y=async()=>{try{h(!1),await s(),n.toast.success(q("auth.logoutSuccess"))}catch(a){n.toast.error(q("auth.logoutError"))}},z=(a,c,e)=>(0,b.jsxs)(d.default,{href:a,className:`text-sm font-semibold transition-all duration-200 relative group/nav-link ${e?"text-primary":"text-foreground/80 hover:text-foreground"}`,children:[c,(0,b.jsx)("span",{className:`absolute -bottom-1 left-0 h-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full transition-all duration-200 ${e?"w-full":"w-0 group-hover/nav-link:w-full"}`})]});return(0,b.jsx)("nav",{className:`fixed left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ${o?"top-0 w-full":"top-4 w-[90%]"}`,children:(0,b.jsx)("div",{className:`bg-card/95 backdrop-blur-xl border border-border/40 shadow-lg shadow-black/20 transition-all duration-300 ${o?"rounded-none border-t-0 border-x-0":"rounded-2xl"}`,children:(0,b.jsxs)("div",{className:"container mx-auto px-4",children:[(0,b.jsxs)("div",{className:"flex h-20 items-center justify-between",children:[(0,b.jsxs)(d.default,{href:"/",className:"flex items-center gap-3 group",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/30 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-300"}),(0,b.jsx)("div",{className:"relative w-12 h-12 rounded-2xl overflow-hidden shadow-xl shadow-primary/20 group-hover:shadow-primary/30 transition-all duration-300 group-hover:scale-105 border-2 border-primary/30 group-hover:border-primary/50",children:(0,b.jsx)(e.default,{src:"/logo-white.png",alt:"DriveWise Logo",width:48,height:48,className:"w-full h-full object-cover"})})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-2xl font-bold text-white tracking-tight",children:"DriveWise"}),(0,b.jsx)("span",{className:"text-xs text-primary font-medium -mt-1",children:q("nav.subtitle")})]})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[z("/",q("nav.home"),"/"===w),z("/pricing",q("nav.pricing"),"/pricing"===w),z("/materials",q("nav.materials"),"/materials"===w),r&&z("/decision-trainer",q("nav.decisionTrainer"),w.startsWith("/decision-trainer")),z("/category",q("nav.tests"),w.startsWith("/category")),z("/dashboard",q("nav.dashboard"),"/dashboard"===w),r&&z("/profile",q("nav.account"),"/profile"===w),r&&t&&z("/admin",q("nav.admin"),"/admin"===w||w.startsWith("/admin"))]}),(0,b.jsx)("div",{className:"hidden md:flex items-center gap-3",children:v?(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/5 border border-primary/10",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/10 border border-primary/20",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,b.jsx)("span",{className:"text-sm font-medium text-primary",children:x})]}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:y,className:"border-border/50 hover:border-primary/50",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),q("nav.logout")]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,className:"hover:bg-primary/10 hover:text-primary",children:(0,b.jsx)(d.default,{href:"/login",children:q("nav.login")})}),(0,b.jsx)(g.Button,{size:"sm",asChild:!0,className:"shadow-lg shadow-primary/30 hover:shadow-primary/40 transition-all duration-300 font-semibold",children:(0,b.jsx)(d.default,{href:"/register",children:q("nav.getStarted")})})]})}),(0,b.jsx)("button",{className:"md:hidden p-2 hover:bg-primary/10 rounded-lg transition-all duration-200 border border-border/50 hover:border-primary/30",onClick:()=>h(!a),children:a?(0,b.jsx)(k,{className:"w-5 h-5 text-primary"}):(0,b.jsx)(j,{className:"w-5 h-5 text-foreground"})})]}),a&&(0,b.jsx)("div",{className:"md:hidden py-6 border-t border-border/40 bg-card/50 backdrop-blur-xl animate-in slide-in-from-top-2",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[r&&(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 mb-2 rounded-xl bg-primary/10 border border-primary/20",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,b.jsx)("span",{className:"text-sm font-medium text-primary",children:x})]}),(0,b.jsx)(d.default,{href:"/",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/"===w?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.home")}),(0,b.jsx)(d.default,{href:"/pricing",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/pricing"===w?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.pricing")}),(0,b.jsx)(d.default,{href:"/materials",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/materials"===w?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.materials")}),r&&(0,b.jsx)(d.default,{href:"/decision-trainer",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${w.startsWith("/decision-trainer")?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.decisionTrainer")}),(0,b.jsx)(d.default,{href:"/category",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${w.startsWith("/category")?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.tests")}),(0,b.jsx)(d.default,{href:"/dashboard",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/dashboard"===w?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.dashboard")}),r&&(0,b.jsx)(d.default,{href:"/profile",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/profile"===w?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.account")}),r&&t&&(0,b.jsx)(d.default,{href:"/admin",className:`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${"/admin"===w||w.startsWith("/admin")?"bg-primary/10 text-primary border border-primary/20":"text-foreground/80 hover:bg-primary/5 hover:text-foreground"}`,onClick:()=>h(!1),children:q("nav.admin")}),(0,b.jsx)("div",{className:"h-px bg-border/40 my-3"}),v?(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/5 border border-primary/10",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):r?(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:y,className:"w-full justify-start border-border/50 hover:border-primary/50",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),q("nav.logout")]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,className:"w-full justify-start hover:bg-primary/10 hover:text-primary",children:(0,b.jsx)(d.default,{href:"/login",onClick:()=>h(!1),children:q("nav.login")})}),(0,b.jsx)(g.Button,{size:"sm",asChild:!0,className:"w-full justify-start shadow-lg shadow-primary/30",children:(0,b.jsx)(d.default,{href:"/register",onClick:()=>h(!1),children:q("nav.getStarted")})})]})]})})]})})})}a.s(["Navbar",()=>o],78330)},57737,a=>{"use strict";let b={freeTestLimitPerCategory:Number(process.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY??"3"),paidTestLimitPerCategory:Number(process.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY??"9999"),billingCycleDays:Number(process.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS??"30"),bestValuePlan:process.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN??"PLAN_C",plans:[{id:"PLAN_A",label:"1 month",months:1,priceEur:3},{id:"PLAN_B",label:"2 months",months:2,priceEur:6},{id:"PLAN_C",label:"3 months",months:3,priceEur:8,badge:"BEST_VALUE",emphasize:!0}].reduce((a,b)=>{let c=b.priceEur/b.months;return a[b.id]={...b,pricePerMonthEur:c},a},{})};function c(a,b=new Date){if(!a)return!1;let d=new Date(a.startDate).getTime(),e=new Date(a.endDate).getTime(),f=b.getTime();return f>=d&&f<=e}function d(a){let{isAdmin:d,testsTakenThisCycle:e,activePlan:f,now:g}=a;if(d)return{canAccessTests:!0,canStartNewTest:!0,remainingFreeTests:void 0,canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};if(f&&c({startDate:f.startDate,endDate:f.endDate},g))return{canAccessTests:!0,canStartNewTest:e<b.paidTestLimitPerCategory,remainingFreeTests:Math.max(0,b.paidTestLimitPerCategory-e),canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};let h=Math.max(0,b.freeTestLimitPerCategory-e);return{canAccessTests:!0,canStartNewTest:h>0,remainingFreeTests:h,canAccessDecisionTrainer:!1,canAccessStudyMaterial:!1,canReviewTestsInDetail:!1}}function e(a){let{attempts:c,category:d,now:e}=a,f=e??new Date,g=new Date(f);g.setDate(g.getDate()-b.billingCycleDays+1);let h=g.getTime(),i=f.getTime();return c.filter(a=>{if(a.category!==d)return!1;let b=new Date(a.completed_at).getTime();return b>=h&&b<=i}).length}a.s(["BILLING_CONFIG",0,b,"computeEntitlements",()=>d,"countTestsInCurrentCycle",()=>e,"isPlanCurrentlyActive",()=>c])},66355,a=>{"use strict";var b=a.i(60854),c=a.i(25761),d=a.i(57737);function e(a){return(0,b.useQuery)({queryKey:["user-plans",a],queryFn:async()=>{let b=(0,c.createClient)(),{data:d,error:e}=await b.from("user_plans").select("*").eq("user_id",a);if(e)throw e;return d||[]},enabled:!!a,staleTime:0,refetchOnMount:"always"})}function f(a,b){let c=e(a),f=new Date,g=!!b||(c.data||[]).some(a=>"active"===a.status&&(0,d.isPlanCurrentlyActive)({startDate:a.start_date,endDate:a.end_date},f));return{...c,hasAnyActivePlan:g}}function g(a,e,f){return(0,b.useQuery)({queryKey:["category-entitlements",a,e,f],queryFn:async()=>{let b=(0,c.createClient)(),[g,h]=await Promise.all([b.from("user_plans").select("*").eq("user_id",a).eq("category",e).order("end_date",{ascending:!1}).limit(1),b.from("test_attempts").select("category, completed_at").eq("user_id",a)]);if(g.error)throw g.error;if(h.error)throw h.error;let i=(g.data||[])[0],j=new Date,k=(0,d.countTestsInCurrentCycle)({attempts:(h.data||[]).map(a=>({category:a.category,completed_at:a.completed_at})),category:e,now:j}),l=i?{id:i.id,userId:i.user_id,category:i.category,planTier:i.plan_tier,startDate:i.start_date,endDate:i.end_date,isActive:"active"===i.status,createdAt:i.created_at}:null;return{entitlements:(0,d.computeEntitlements)({isAdmin:f,testsTakenThisCycle:k,activePlan:l?{planTier:l.planTier,startDate:l.startDate,endDate:l.endDate,isActive:l.isActive}:null,now:j}),plan:l,testsTakenThisCycle:k}},enabled:!!a&&!!e,staleTime:3e5})}a.s(["useCategoryEntitlements",()=>g,"useGlobalPremium",()=>f,"useUserPlans",()=>e])},37322,a=>{"use strict";let b=(0,a.i(2017).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],37322)},97684,a=>{"use strict";let b=(0,a.i(2017).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],97684)},98270,a=>{"use strict";let b=(0,a.i(2017).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],98270)},81509,a=>{"use strict";var b=a.i(681),c=a.i(84813),d=a.i(53365),e=a.i(1004),f=a.i(78330),g=a.i(93639),h=a.i(663),i=a.i(81217),j=a.i(22309),k=a.i(66355),l=a.i(57737),m=a.i(98270),n=a.i(97684),o=a.i(37322),p=a.i(37979);function q(){(0,d.useRouter)();let{t:a,language:q}=(0,i.useLanguage)(),{user:r,loading:s}=(0,j.useAuth)(),t="sq"===q,u=(0,p.useQueryClient)(),{data:v,refetch:w,isError:x}=(0,k.useUserPlans)(r?.id),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(0),E=v?.some(a=>"active"===a.status&&(0,l.isPlanCurrentlyActive)({startDate:a.start_date,endDate:a.end_date}));(0,c.useEffect)(()=>{r?.id&&(u.invalidateQueries({queryKey:["user-plans",r.id]}),w())},[r?.id,u,w]),(0,c.useEffect)(()=>{if(!s&&r){if(E){B(!0),z(!1),u.invalidateQueries({queryKey:["premium-status",r.id]});return}if(C<20){let a=setTimeout(()=>{w(),D(a=>a+1)},2e3);return()=>clearTimeout(a)}z(!1)}},[s,r,E,C,w,u]);let F=(0,b.jsx)(n.Loader2,{className:"w-12 h-12 text-primary animate-spin"}),G=t?"Duke verifikuar pagesën...":"Verifying payment...",H=t?"Jemi duke pritur konfirmimin nga banka. Kjo mund të zgjasë pak sekonda.":"We are waiting for confirmation from the payment provider. This may take a few seconds.",I="border-primary/50 bg-primary/5";return A?(F=(0,b.jsx)(m.CheckCircle2,{className:"w-12 h-12 text-emerald-500"}),G=t?"Pagesa u krye me sukses!":"Payment successful!",H=t?"Plani juaj tani është aktiv. Mund të filloni të përdorni të gjitha veçoritë premium.":"Your plan is now active. You can start using all premium features.",I="border-emerald-500/50 bg-emerald-500/5"):y||A||(F=(0,b.jsx)(o.AlertCircle,{className:"w-12 h-12 text-amber-500"}),G=t?"Pagesa është në proces":"Payment processing",H=t?"Ende nuk kemi marrë konfirmimin përfundimtar. Ju lutemi prisni pak minuta dhe rifreskoni faqen, ose kontrolloni email-in tuaj.":"We haven't received final confirmation yet. Please wait a few minutes and refresh the page, or check your email.",I="border-amber-500/50 bg-amber-500/5"),(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(f.Navbar,{}),(0,b.jsx)("div",{className:"pt-32 pb-12",children:(0,b.jsx)("div",{className:"container mx-auto px-4 max-w-xl",children:(0,b.jsxs)(g.GlassCard,{className:`p-8 border ${I} text-center flex flex-col items-center`,children:[(0,b.jsx)("div",{className:"mb-6 p-4 rounded-full bg-black/20 backdrop-blur-md",children:F}),(0,b.jsx)("h1",{className:"text-2xl font-bold mb-3",children:G}),(0,b.jsx)("p",{className:"text-muted-foreground mb-8 leading-relaxed max-w-md mx-auto",children:H}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-xs mx-auto",children:[(0,b.jsx)(h.Button,{asChild:!0,className:"flex-1 w-full",size:"lg",children:(0,b.jsx)(e.default,{href:"/dashboard",children:a("auth.backToHome")||"Go to Dashboard"})}),!A&&!y&&(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>{D(0),z(!0),w()},className:"flex-1 w-full",children:t?"Provo përsëri":"Try again"})]})]})})})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=Desktop_drivewise_b2b16731._.js.map
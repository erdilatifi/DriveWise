module.exports=[14505,a=>{"use strict";var b=a.i(681),c=a.i(84813),d=a.i(46444);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-xl border border-input/70 bg-background/60 px-3.5 py-2 text-sm text-foreground shadow-[0_8px_24px_rgba(0,0,0,0.7)] backdrop-blur-xl","transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/80 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},92347,a=>{"use strict";var b=a.i(681),c=a.i(46444);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]",a),...d})}a.s(["Skeleton",()=>d])},57737,a=>{"use strict";let b={freeTestLimitPerCategory:Number(process.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY??"3"),paidTestLimitPerCategory:Number(process.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY??"9999"),billingCycleDays:Number(process.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS??"30"),bestValuePlan:process.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN??"PLAN_C",plans:[{id:"PLAN_A",label:"1 month",months:1,priceEur:3},{id:"PLAN_B",label:"2 months",months:2,priceEur:6},{id:"PLAN_C",label:"3 months",months:3,priceEur:8,badge:"BEST_VALUE",emphasize:!0}].reduce((a,b)=>{let c=b.priceEur/b.months;return a[b.id]={...b,pricePerMonthEur:c},a},{})};function c(a,b=new Date){if(!a)return!1;let d=new Date(a.startDate).getTime(),e=new Date(a.endDate).getTime(),f=b.getTime();return f>=d&&f<=e}function d(a){let{isAdmin:d,testsTakenThisCycle:e,activePlan:f,now:g}=a;if(d)return{canAccessTests:!0,canStartNewTest:!0,remainingFreeTests:void 0,canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};if(f&&c({startDate:f.startDate,endDate:f.endDate},g))return{canAccessTests:!0,canStartNewTest:e<b.paidTestLimitPerCategory,remainingFreeTests:Math.max(0,b.paidTestLimitPerCategory-e),canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};let h=Math.max(0,b.freeTestLimitPerCategory-e);return{canAccessTests:!0,canStartNewTest:h>0,remainingFreeTests:h,canAccessDecisionTrainer:!1,canAccessStudyMaterial:!1,canReviewTestsInDetail:!1}}function e(a){let{attempts:c,category:d,now:e}=a,f=e??new Date,g=new Date(f);g.setDate(g.getDate()-b.billingCycleDays+1);let h=g.getTime(),i=f.getTime();return c.filter(a=>{if(a.category!==d)return!1;let b=new Date(a.completed_at).getTime();return b>=h&&b<=i}).length}a.s(["BILLING_CONFIG",0,b,"computeEntitlements",()=>d,"countTestsInCurrentCycle",()=>e,"isPlanCurrentlyActive",()=>c])},66355,a=>{"use strict";var b=a.i(60854),c=a.i(25761),d=a.i(57737);function e(a){return(0,b.useQuery)({queryKey:["user-plans",a],queryFn:async()=>{let b=(0,c.createClient)(),{data:d,error:e}=await b.from("user_plans").select("*").eq("user_id",a);if(e)throw e;return d||[]},enabled:!!a,staleTime:0,refetchOnMount:"always"})}function f(a,b){let c=e(a),f=new Date,g=!!b||(c.data||[]).some(a=>"active"===a.status&&(0,d.isPlanCurrentlyActive)({startDate:a.start_date,endDate:a.end_date},f));return{...c,hasAnyActivePlan:g}}function g(a,e,f){return(0,b.useQuery)({queryKey:["category-entitlements",a,e,f],queryFn:async()=>{let b=(0,c.createClient)(),[g,h]=await Promise.all([b.from("user_plans").select("*").eq("user_id",a).eq("category",e).order("end_date",{ascending:!1}).limit(1),b.from("test_attempts").select("category, completed_at").eq("user_id",a)]);if(g.error)throw g.error;if(h.error)throw h.error;let i=(g.data||[])[0],j=new Date,k=(0,d.countTestsInCurrentCycle)({attempts:(h.data||[]).map(a=>({category:a.category,completed_at:a.completed_at})),category:e,now:j}),l=i?{id:i.id,userId:i.user_id,category:i.category,planTier:i.plan_tier,startDate:i.start_date,endDate:i.end_date,isActive:"active"===i.status,createdAt:i.created_at}:null;return{entitlements:(0,d.computeEntitlements)({isAdmin:f,testsTakenThisCycle:k,activePlan:l?{planTier:l.planTier,startDate:l.startDate,endDate:l.endDate,isActive:l.isActive}:null,now:j}),plan:l,testsTakenThisCycle:k}},enabled:!!a&&!!e,staleTime:3e5})}a.s(["useCategoryEntitlements",()=>g,"useGlobalPremium",()=>f,"useUserPlans",()=>e])},37322,a=>{"use strict";let b=(0,a.i(2017).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],37322)},46456,a=>{"use strict";let b=(0,a.i(2017).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],46456)},35644,a=>{"use strict";var b=a.i(60854),c=a.i(20416),d=a.i(37979),e=a.i(25761);function f(a={}){let{search:c,chapterId:d,category:g,page:h=1,pageSize:i=50,includeUnpublished:j=!1,fields:k="*"}=a,l=(0,e.createClient)();return(0,b.useQuery)({queryKey:["materials",c,d,g,h,i,j,k],queryFn:async()=>{let a=(h-1)*i,b=l.from("study_materials").select(k,{count:"planned"}).order("order_index",{ascending:!0});if(d&&(b=b.eq("chapter_id",d)),g&&(b=b.eq("category",g)),j||(b=b.eq("is_published",!0)),c&&c.trim()){let a=c.trim();b=b.ilike("title",`%${a}%`)}let{data:e,error:f,count:m}=await b.range(a,a+i-1);if(f)throw f;let n=e||[];if("*"!==k)return{materials:n,total:m||0};let o=n.map(a=>a.id),p=[];if(o.length>0){let{data:a,error:b}=await l.from("material_images").select("*").in("material_id",o).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(b)throw b;p=a||[]}return{materials:n.map(a=>({...a,images:p.filter(b=>b.material_id===a.id)})),total:m||0}}})}function g(a){let c=(0,e.createClient)();return(0,b.useQuery)({queryKey:["material-by-chapter",a],queryFn:async()=>{if(void 0===a)return null;let{data:b,error:d}=await c.from("study_materials").select("*").eq("chapter_id",a).single();if(d)throw d;let{data:e,error:f}=await c.from("material_images").select("*").eq("material_id",b.id).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(f)throw f;return{...b,images:e||[]}},enabled:!!a,staleTime:3e5})}function h(a){let c=(0,e.createClient)();return(0,b.useQuery)({queryKey:["material",a],queryFn:async()=>{if(!a)return null;let{data:b,error:d}=await c.from("study_materials").select("*").eq("id",a).single();if(d)throw d;let{data:e,error:f}=await c.from("material_images").select("*").eq("material_id",a).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(f)throw f;return{...b,images:e||[]}},enabled:!!a})}function i(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async a=>{let{data:c,error:d}=await b.from("study_materials").insert([a]).select().single();if(d)throw Error(d.message||d.details||"Failed to create material");return c},onSuccess:()=>{a.invalidateQueries({queryKey:["materials"]})}})}function j(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async({id:a,...c})=>{let{data:d,error:e}=await b.from("study_materials").update(c).eq("id",a).select().single();if(e)throw Error(e.message||e.details||"Failed to update material");return d},onSuccess:b=>{a.invalidateQueries({queryKey:["materials"]}),a.invalidateQueries({queryKey:["material",b.id]})}})}function k(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async a=>{let{error:c}=await b.from("study_materials").delete().eq("id",a);if(c)throw Error(c.message||"Failed to delete material");return a},onSuccess:()=>{a.invalidateQueries({queryKey:["materials"]})}})}function l(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async a=>{let{data:c,error:d}=await b.from("material_images").insert([a]).select().single();if(d)throw Error(d.message||d.details||"Failed to create material image");return c},onSuccess:b=>{a.invalidateQueries({queryKey:["material",b.material_id]}),a.invalidateQueries({queryKey:["materials"]})}})}function m(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async a=>{let{data:c,error:d}=await b.from("material_images").delete().eq("id",a).select().single();if(d)throw Error(d.message||"Failed to delete material image");return c},onSuccess:b=>{b?.material_id&&a.invalidateQueries({queryKey:["material",b.material_id]}),a.invalidateQueries({queryKey:["materials"]})}})}function n(){let a=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async b=>{let c=b.name.split(".").pop()||"jpg",d=`${Date.now()}-${Math.random().toString(36).slice(2)}`,e=`materials/${d}.${c}`,{error:f}=await a.storage.from("material-images").upload(e,b,{cacheControl:"3600",upsert:!1});if(f)throw Error(f.message||"Failed to upload material image");let{data:{publicUrl:g}}=a.storage.from("material-images").getPublicUrl(e);return g}})}a.s(["useCreateMaterial",()=>i,"useCreateMaterialImage",()=>l,"useDeleteMaterial",()=>k,"useDeleteMaterialImage",()=>m,"useMaterial",()=>h,"useMaterialByChapterId",()=>g,"useMaterials",()=>f,"useUpdateMaterial",()=>j,"useUploadMaterialImage",()=>n])},39232,a=>{"use strict";var b=a.i(91097);a.s(["ChevronRight",()=>b.default])},70805,a=>{"use strict";let b=(0,a.i(2017).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],70805)},91097,a=>{"use strict";let b=(0,a.i(2017).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["default",()=>b])},66778,a=>{"use strict";let b=(0,a.i(2017).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],66778)},24425,a=>{"use strict";let b=(0,a.i(2017).default)("signpost",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M18 6a2 2 0 0 1 1.387.56l2.307 2.22a1 1 0 0 1 0 1.44l-2.307 2.22A2 2 0 0 1 18 13H6a2 2 0 0 1-1.387-.56l-2.306-2.22a1 1 0 0 1 0-1.44l2.306-2.22A2 2 0 0 1 6 6z",key:"gqqp9m"}]]);a.s(["Signpost",()=>b],24425)},64392,a=>{"use strict";var b=a.i(60854),c=a.i(20416),d=a.i(37979),e=a.i(25761);function f(a={}){let{category:c,search:d,page:g=1,pageSize:h=50}=a,i=(0,e.createClient)();return(0,b.useQuery)({queryKey:["traffic-signs",c,d,g,h],queryFn:async()=>{let a=i.from("traffic_signs").select("*",{count:"planned"}).order("code",{ascending:!0});c&&"all"!==c&&(a=a.eq("category",c)),d&&(a=a.or(`name.ilike.%${d}%,code.ilike.%${d}%`));let b=(g-1)*h,{data:e,error:f,count:j}=await a.range(b,b+h-1);if(f)throw f;return{signs:(e||[]).map(a=>{if(a.image_url&&!a.image_url.startsWith("http")){let{data:{publicUrl:b}}=i.storage.from("signs").getPublicUrl(a.image_url);return{...a,image_url:b}}return a}),total:j||0}}})}function g(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async({id:a,...c})=>{let{data:d,error:e}=await b.from("traffic_signs").update(c).eq("id",a).select().single();if(e)throw e;return d},onSuccess:()=>{a.invalidateQueries({queryKey:["traffic-signs"]})}})}function h(){let a=(0,d.useQueryClient)(),b=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async a=>{let{error:c}=await b.from("traffic_signs").delete().eq("id",a);if(c)throw c;return a},onSuccess:()=>{a.invalidateQueries({queryKey:["traffic-signs"]})}})}function i(){let a=(0,e.createClient)();return(0,c.useMutation)({mutationFn:async b=>{let c=b.name.split(".").pop()||"png",d=`${Date.now()}-${Math.random().toString(36).slice(2)}`,e=`signs/${d}.${c}`,{error:f}=await a.storage.from("signs").upload(e,b,{cacheControl:"3600",upsert:!1});if(f)throw f;let{data:{publicUrl:g}}=a.storage.from("signs").getPublicUrl(e);return g}})}a.s(["useDeleteTrafficSign",()=>h,"useTrafficSigns",()=>f,"useUpdateTrafficSign",()=>g,"useUploadSignImage",()=>i])}];

//# sourceMappingURL=Desktop_drivewise_fce692a5._.js.map
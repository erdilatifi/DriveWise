{"version":3,"sources":["turbopack:///[project]/Desktop/drivewise/web/components/ui/skeleton.tsx","turbopack:///[project]/Desktop/drivewise/web/components/ui/alert-dialog.tsx","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/circle-check-big.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/circle-x.ts","turbopack:///[project]/Desktop/drivewise/web/hooks/use-test-attempts.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/chevron-right.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/trash-2.ts","turbopack:///[project]/Desktop/drivewise/node_modules/lucide-react/src/icons/chevron-left.ts"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface AlertDialogProps {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: React.ReactNode;\n}\n\nconst AlertDialog = ({ open, onOpenChange, children }: AlertDialogProps) => {\n  return (\n    <>\n      {open && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n          <div \n            className=\"fixed inset-0 bg-black/70 backdrop-blur-xl\"\n            onClick={() => onOpenChange?.(false)}\n          />\n          <div className=\"relative z-50\">\n            {children}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nconst AlertDialogContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl border border-border/70 bg-card/90 p-6 shadow-[0_24px_80px_rgba(0,0,0,0.9)] backdrop-blur-2xl duration-200\",\n      className\n    )}\n    {...props}\n  />\n));\nAlertDialogContent.displayName = \"AlertDialogContent\";\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nAlertDialogHeader.displayName = \"AlertDialogHeader\";\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nAlertDialogFooter.displayName = \"AlertDialogFooter\";\n\nconst AlertDialogTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h2\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n));\nAlertDialogTitle.displayName = \"AlertDialogTitle\";\n\nconst AlertDialogDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nAlertDialogDescription.displayName = \"AlertDialogDescription\";\n\nconst AlertDialogAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ButtonHTMLAttributes<HTMLButtonElement>\n>(({ className, ...props }, ref) => (\n  <Button\n    ref={ref}\n    className={cn(\"\", className)}\n    {...props}\n  />\n));\nAlertDialogAction.displayName = \"AlertDialogAction\";\n\nconst AlertDialogCancel = React.forwardRef<\n  HTMLButtonElement,\n  React.ButtonHTMLAttributes<HTMLButtonElement>\n>(({ className, ...props }, ref) => (\n  <Button\n    ref={ref}\n    variant=\"outline\"\n    className={cn(\"mt-2 sm:mt-0\", className)}\n    {...props}\n  />\n));\nAlertDialogCancel.displayName = \"AlertDialogCancel\";\n\nexport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n};\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n];\n\n/**\n * @component @name CircleX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleX = createLucideIcon('circle-x', __iconNode);\n\nexport default CircleX;\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface DashboardStats {\r\n  totalTests: number;\r\n  averageScore: number;\r\n  bestScore: number;\r\n  testsThisWeek: number;\r\n  streak: number;\r\n  passedTests: number;\r\n  failedTests: number;\r\n}\r\n\r\nexport interface ProgressData {\r\n  date: string;\r\n  score: number;\r\n}\r\n\r\nexport interface RecentTest {\r\n  id: string;\r\n  category: string;\r\n  testNumber: string;\r\n  score: number;\r\n  date: string;\r\n  passed: boolean;\r\n}\r\n\r\nexport interface WeakTopicStat {\r\n  topic: string;\r\n  totalQuestions: number;\r\n  correct: number;\r\n  accuracy: number;\r\n}\r\n\r\nexport interface WeakTopicsSummary {\r\n  topics: WeakTopicStat[];\r\n  weakTopics: WeakTopicStat[];\r\n  dominantCategory: string | null;\r\n}\r\n\r\nexport interface TestAchievements {\r\n  totalTests: number;\r\n  bestPassStreak: number;\r\n  totalQuestionsAnswered: number;\r\n  firstTestCompleted: boolean;\r\n  fivePassesInRow: boolean;\r\n  hundredQuestionsAnswered: boolean;\r\n}\r\n\r\nexport interface GlobalDailyStreak {\r\n  currentStreak: number;\r\n  bestStreak: number;\r\n}\r\n\r\n// Get user's test attempts with dashboard stats\r\nexport function useTestAttempts(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['test-attempts', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data: attempts, error } = await supabase\r\n        .from('test_attempts')\r\n        .select('*')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return attempts || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute unified daily streak across tests and Decision Trainer\r\nexport function useGlobalDailyStreak(userId?: string) {\r\n  return useQuery<GlobalDailyStreak>({\r\n    queryKey: ['global-daily-streak', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempt dates\r\n      const { data: testAttempts, error: testError } = await supabase\r\n        .from('test_attempts')\r\n        .select('completed_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (testError) throw testError;\r\n\r\n      // Get all decision trainer attempt dates\r\n      const { data: dtAttempts, error: dtError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('created_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (dtError) throw dtError;\r\n\r\n      const activeDayTimestamps: number[] = [];\r\n\r\n      (testAttempts || []).forEach((a: { completed_at: string }) => {\r\n        const d = new Date(a.completed_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      (dtAttempts || []).forEach((a: { created_at: string }) => {\r\n        const d = new Date(a.created_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      const uniqueDays = [...new Set(activeDayTimestamps)].sort((a, b) => b - a); // newest first\r\n\r\n      if (uniqueDays.length === 0) {\r\n        return { currentStreak: 0, bestStreak: 0 };\r\n      }\r\n\r\n      // Compute current streak: consecutive days ending today or yesterday\r\n      const now = new Date();\r\n      const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n      const yesterdayStart = todayStart - 86400000;\r\n\r\n      let currentStreak = 0;\r\n      let bestStreak = 0;\r\n\r\n      // Only count streak if last active day is today or yesterday\r\n      if (uniqueDays[0] === todayStart || uniqueDays[0] === yesterdayStart) {\r\n        currentStreak = 1;\r\n        bestStreak = 1;\r\n\r\n        for (let i = 1; i < uniqueDays.length; i++) {\r\n          const expectedPrevDay = uniqueDays[i - 1] - 86400000;\r\n          if (uniqueDays[i] === expectedPrevDay) {\r\n            currentStreak++;\r\n            if (currentStreak > bestStreak) {\r\n              bestStreak = currentStreak;\r\n            }\r\n          } else {\r\n            // streak broken\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return { currentStreak, bestStreak };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute simple theory test achievements for a user\r\nexport function useTestAchievements(userId?: string) {\r\n  return useQuery<TestAchievements>({\r\n    queryKey: ['test-achievements', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempts for this user (ordered oldest -> newest for streak calc)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id, percentage, total_questions, completed_at')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: true });\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const testAttempts = attempts || [];\r\n      const totalTests = testAttempts.length;\r\n\r\n      // Best streak of passed tests in a row\r\n      let bestPassStreak = 0;\r\n      let currentStreak = 0;\r\n      testAttempts.forEach((attempt) => {\r\n        const passed = Number(attempt.percentage) >= 80;\r\n        if (passed) {\r\n          currentStreak++;\r\n          if (currentStreak > bestPassStreak) {\r\n            bestPassStreak = currentStreak;\r\n          }\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      });\r\n\r\n      // Total questions answered across all tests (count answers rows)\r\n      let totalQuestionsAnswered = 0;\r\n      if (testAttempts.length > 0) {\r\n        const attemptIds = testAttempts.map(a => a.id);\r\n\r\n        const { count: answersCount, error: answersError } = await supabase\r\n          .from('test_attempt_answers')\r\n          .select('*', { count: 'exact', head: true })\r\n          .in('test_attempt_id', attemptIds);\r\n\r\n        if (answersError) throw answersError;\r\n        totalQuestionsAnswered = answersCount || 0;\r\n      }\r\n\r\n      const firstTestCompleted = totalTests >= 1;\r\n      const fivePassesInRow = bestPassStreak >= 5;\r\n      const hundredQuestionsAnswered = totalQuestionsAnswered >= 100;\r\n\r\n      return {\r\n        totalTests,\r\n        bestPassStreak,\r\n        totalQuestionsAnswered,\r\n        firstTestCompleted,\r\n        fivePassesInRow,\r\n        hundredQuestionsAnswered,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n\r\n// Get dashboard stats derived from test attempts (Optimized V2)\r\nexport function useDashboardStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['dashboard-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const emptyResult = {\r\n        stats: {\r\n          totalTests: 0,\r\n          averageScore: 0,\r\n          bestScore: 0,\r\n          testsThisWeek: 0,\r\n          streak: 0,\r\n          passedTests: 0,\r\n          failedTests: 0,\r\n        },\r\n        progressData: [] as ProgressData[],\r\n        recentTests: [] as RecentTest[],\r\n      };\r\n\r\n      try {\r\n        // Parallelize fetches\r\n        const [statsRes, progressRes, recentRes, streakRes] = await Promise.all([\r\n          supabase.rpc('get_dashboard_stats', { p_user_id: userId! }),\r\n          supabase.rpc('get_weekly_progress', { p_user_id: userId! }),\r\n          supabase.rpc('get_recent_tests', { p_user_id: userId!, p_limit: 4 }),\r\n          // We still need dates for streak, but we can select JUST dates\r\n          supabase.from('test_attempts').select('completed_at').eq('user_id', userId!).order('completed_at', { ascending: false })\r\n        ]);\r\n\r\n        if (statsRes.error) throw statsRes.error;\r\n        if (progressRes.error) throw progressRes.error;\r\n        if (recentRes.error) throw recentRes.error;\r\n\r\n        const statsData = statsRes.data?.[0] || {\r\n          total_tests: 0,\r\n          average_score: 0,\r\n          best_score: 0,\r\n          tests_this_week: 0,\r\n          passed_tests: 0,\r\n          failed_tests: 0\r\n        };\r\n\r\n        // Calculate streak\r\n        const testDates = (streakRes.data || []).map((test: any) => {\r\n          const date = new Date(test.completed_at);\r\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\r\n        });\r\n        const uniqueDateTimes = [...new Set(testDates)].sort((a, b) => b - a);\r\n\r\n        let streak = 0;\r\n        const now = new Date();\r\n        const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n        const yesterdayStart = todayStart - 86400000;\r\n\r\n        if (\r\n          uniqueDateTimes.length > 0 &&\r\n          (uniqueDateTimes[0] === todayStart || uniqueDateTimes[0] === yesterdayStart)\r\n        ) {\r\n          streak = 1;\r\n          for (let i = 1; i < uniqueDateTimes.length; i++) {\r\n            const expectedPrevDay = uniqueDateTimes[i - 1] - 86400000;\r\n            if (uniqueDateTimes[i] === expectedPrevDay) {\r\n              streak++;\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Format progress data\r\n        // Map database rows to 7-day chart format\r\n        const progressData: ProgressData[] = [];\r\n        const dbProgress = progressRes.data || [];\r\n        \r\n        for (let i = 6; i >= 0; i--) {\r\n          const d = new Date();\r\n          d.setDate(d.getDate() - i);\r\n          const dateStr = d.toISOString().split('T')[0]; // YYYY-MM-DD\r\n          const dayLabel = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][d.getDay()];\r\n          \r\n          const dayStat = dbProgress.find((p: any) => p.attempt_date === dateStr);\r\n          \r\n          progressData.push({\r\n            date: dayLabel,\r\n            score: dayStat ? dayStat.daily_avg_score : 0\r\n          });\r\n        }\r\n\r\n        // Format recent tests\r\n        const recentTests: RecentTest[] = (recentRes.data || []).map((test: any) => ({\r\n          id: test.id,\r\n          category: test.category,\r\n          testNumber: test.test_number || '1',\r\n          score: Number(test.percentage),\r\n          date: new Date(test.completed_at).toLocaleDateString(),\r\n          passed: Number(test.percentage) >= 80,\r\n        }));\r\n\r\n        return {\r\n          stats: {\r\n            totalTests: statsData.total_tests,\r\n            averageScore: statsData.average_score,\r\n            bestScore: statsData.best_score,\r\n            testsThisWeek: statsData.tests_this_week,\r\n            streak: streak, // Calculated locally for now\r\n            passedTests: statsData.passed_tests,\r\n            failedTests: statsData.failed_tests,\r\n          },\r\n          progressData,\r\n          recentTests,\r\n        };\r\n\r\n      } catch (error) {\r\n        console.error('Dashboard stats error:', error);\r\n        // Fallback to empty result if RPC fails (e.g. if migration not run)\r\n        return emptyResult;\r\n      }\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n  });\r\n}\r\n\r\n// Get paginated test history\r\nexport function useTestHistory(userId?: string, page: number = 1, pageSize: number = 6) {\r\n  return useQuery({\r\n    queryKey: ['test-history', userId, page, pageSize],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n\r\n      const [attemptsResult, countResult] = await Promise.all([\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .order('completed_at', { ascending: false })\r\n          .range(from, to),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId!)\r\n      ]);\r\n\r\n      if (attemptsResult.error) throw attemptsResult.error;\r\n      if (countResult.error) throw countResult.error;\r\n\r\n      return {\r\n        tests: attemptsResult.data || [],\r\n        totalCount: countResult.count || 0,\r\n        totalPages: Math.ceil((countResult.count || 0) / pageSize),\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Delete test attempt\r\nexport function useDeleteTestAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (testId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('id', testId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Clear all test attempts for user\r\nexport function useClearAllTestAttempts() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('user_id', userId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Get test count for category\r\nexport function useTestCount(category: string, enabled: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['test-count', category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('admin_questions')\r\n        .select('test_number')\r\n        .eq('category', category);\r\n\r\n      if (error) throw error;\r\n      \r\n      // Get unique test numbers\r\n      const uniqueTests = [...new Set((data || []).map(q => q.test_number))];\r\n      return uniqueTests.length;\r\n    },\r\n    staleTime: 10 * 60 * 1000, // 10 minutes - test count doesn't change often\r\n    enabled: enabled && !!category,\r\n  });\r\n}\r\n// Get overall weak-topic statistics across all past tests for a user\r\nexport function useWeakTopics(userId?: string) {\r\n  return useQuery<WeakTopicsSummary>({\r\n    queryKey: ['weak-topics', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // 1) Get all test attempts for this user (limit to last 50 for performance/stability)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const attemptIds = (attempts || []).map(a => a.id);\r\n      if (attemptIds.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      // 2) Get all answers for those attempts\r\n      const { data: answers, error: answersError } = await supabase\r\n        .from('test_attempt_answers')\r\n        .select('question_id, is_correct')\r\n        .in('test_attempt_id', attemptIds);\r\n\r\n      if (answersError) throw answersError;\r\n      if (!answers || answers.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      const questionIds = [...new Set(answers.map(a => a.question_id))];\r\n\r\n      // 3) Get topics AND categories for those questions\r\n      const { data: questions, error: questionsError } = await supabase\r\n        .from('admin_questions')\r\n        .select('id, topic, category')\r\n        .in('id', questionIds);\r\n\r\n      if (questionsError) throw questionsError;\r\n\r\n      const topicByQuestionId = new Map<string, { topic: string | null, category: string | null }>();\r\n      (questions || []).forEach((q: { id: string; topic: string | null; category: string | null }) => {\r\n        topicByQuestionId.set(q.id, { topic: q.topic ?? null, category: q.category ?? null });\r\n      });\r\n\r\n      const topicStatsMap: Record<string, { total: number; correct: number; category: string | null }> = {};\r\n\r\n      answers.forEach((ans: { question_id: string; is_correct: boolean }) => {\r\n        const info = topicByQuestionId.get(ans.question_id);\r\n        if (!info || !info.topic) return;\r\n\r\n        const topic = info.topic;\r\n        if (!topicStatsMap[topic]) {\r\n          topicStatsMap[topic] = { total: 0, correct: 0, category: info.category };\r\n        }\r\n        topicStatsMap[topic].total += 1;\r\n        if (ans.is_correct) {\r\n          topicStatsMap[topic].correct += 1;\r\n        }\r\n      });\r\n\r\n      const topics: WeakTopicStat[] = Object.entries(topicStatsMap).map(([topic, stats]) => {\r\n        const accuracy = stats.total > 0 ? stats.correct / stats.total : 0;\r\n        return {\r\n          topic,\r\n          totalQuestions: stats.total,\r\n          correct: stats.correct,\r\n          accuracy,\r\n        };\r\n      }).sort((a, b) => a.accuracy - b.accuracy);\r\n\r\n      const weakTopics = topics.filter(t => t.totalQuestions >= 3 && t.accuracy < 0.8).slice(0, 5);\r\n\r\n      // Determine dominant category from weak topics\r\n      const categoryCounts: Record<string, number> = {};\r\n      weakTopics.forEach(wt => {\r\n        const cat = topicStatsMap[wt.topic]?.category;\r\n        if (cat) {\r\n          categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;\r\n        }\r\n      });\r\n      \r\n      let dominantCategory: string | null = null;\r\n      let maxCount = 0;\r\n      Object.entries(categoryCounts).forEach(([cat, count]) => {\r\n        if (count > maxCount) {\r\n          maxCount = count;\r\n          dominantCategory = cat;\r\n        }\r\n      });\r\n\r\n      // Fallback: if no dominant category found from weak topics (e.g. empty), use the most frequent category from all topics\r\n      if (!dominantCategory && topics.length > 0) {\r\n         const allCategoryCounts: Record<string, number> = {};\r\n         Object.values(topicStatsMap).forEach(stats => {\r\n            if (stats.category) {\r\n               allCategoryCounts[stats.category] = (allCategoryCounts[stats.category] || 0) + 1;\r\n            }\r\n         });\r\n         let allMaxCount = 0;\r\n         Object.entries(allCategoryCounts).forEach(([cat, count]) => {\r\n            if (count > allMaxCount) {\r\n               allMaxCount = count;\r\n               dominantCategory = cat;\r\n            }\r\n         });\r\n      }\r\n\r\n      return { topics, weakTopics, dominantCategory };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm9 18 6-6-6-6', key: 'mthhwq' }]];\n\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronRight = createLucideIcon('chevron-right', __iconNode);\n\nexport default ChevronRight;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n"],"names":[],"mappings":"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","ignoreList":[2,3,6]}
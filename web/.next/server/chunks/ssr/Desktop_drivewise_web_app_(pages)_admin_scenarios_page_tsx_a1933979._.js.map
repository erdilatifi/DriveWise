{"version":3,"sources":["turbopack:///[project]/Desktop/drivewise/web/app/(pages)/admin/scenarios/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport type { ChangeEvent, FormEvent } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { Navbar } from '@/components/navbar';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { GlassCard } from '@/components/ui/glass-card';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\nimport { ArrowLeft, Plus, Edit, Trash2, Image as ImageIcon, X, Search, Filter, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport { toast } from 'sonner';\r\nimport { CATEGORY_INFO, type Category } from '@/data/scenarios';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\n\r\ninterface ScenarioOption {\r\n  text: string;\r\n  isCorrect: boolean;\r\n  explanation: string;\r\n}\r\n\r\ninterface Scenario {\r\n  id: string;\r\n  category: string;\r\n  level: number;\r\n  question: string;\r\n  image_url?: string;\r\n  options: ScenarioOption[];\r\n  correct_explanation: string;\r\n  real_world_tip: string;\r\n  xp: number;\r\n  is_active: boolean;\r\n  created_at?: string;\r\n  chapter_id?: number | null;\r\n  is_published?: boolean;\r\n}\r\n\r\nexport default function AdminScenariosPageOptimized() {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const router = useRouter();\r\n  \r\n  // Data state\r\n  const [scenarios, setScenarios] = useState<Scenario[]>([]);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize] = useState(20); // Show 20 scenarios per page\r\n  \r\n  // Filter and search state\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\r\n  const [levelFilter, setLevelFilter] = useState<string>('all');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [publishedFilter, setPublishedFilter] = useState<string>('all');\r\n  \r\n  // Form state\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingScenario, setEditingScenario] = useState<Scenario | null>(null);\r\n  const [imageFile, setImageFile] = useState<File | null>(null);\r\n  const [imagePreview, setImagePreview] = useState<string>('');\r\n  const [uploading, setUploading] = useState(false);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [scenarioToDelete, setScenarioToDelete] = useState<string | null>(null);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    category: 'traffic-lights' as Category,\r\n    level: 1,\r\n    question: '',\r\n    image_url: '',\r\n    options: [\r\n      { text: '', isCorrect: false, explanation: '' },\r\n      { text: '', isCorrect: false, explanation: '' },\r\n      { text: '', isCorrect: false, explanation: '' },\r\n      { text: '', isCorrect: false, explanation: '' },\r\n    ] as ScenarioOption[],\r\n    correct_explanation: '',\r\n    real_world_tip: '',\r\n    xp: 25,\r\n    chapter_id: 1,\r\n    is_published: true,\r\n  });\r\n\r\n  // Reset form to default values\r\n  const resetForm = () => {\r\n    setEditingScenario(null);\r\n    setImageFile(null);\r\n    setImagePreview('');\r\n    setFormData({\r\n      category: 'traffic-lights' as Category,\r\n      level: 1,\r\n      question: '',\r\n      image_url: '',\r\n      options: [\r\n        { text: '', isCorrect: false, explanation: '' },\r\n        { text: '', isCorrect: false, explanation: '' },\r\n        { text: '', isCorrect: false, explanation: '' },\r\n        { text: '', isCorrect: false, explanation: '' },\r\n      ],\r\n      correct_explanation: '',\r\n      real_world_tip: '',\r\n      xp: 25,\r\n      chapter_id: 1,\r\n      is_published: true,\r\n    });\r\n  };\r\n\r\n  // Open create form\r\n  const handleOpenCreateForm = () => {\r\n    resetForm();\r\n    setShowForm(true);\r\n  };\r\n\r\n  // Close form\r\n  const handleCloseForm = () => {\r\n    setShowForm(false);\r\n    resetForm();\r\n  };\r\n\r\n  // Calculate pagination info\r\n  const totalPages = Math.ceil(totalCount / pageSize);\r\n  const hasNextPage = currentPage < totalPages;\r\n  const hasPrevPage = currentPage > 1;\r\n\r\n  // Image preview when selecting a new file\r\n  useEffect(() => {\r\n    if (!imageFile) return;\r\n\r\n    const url = URL.createObjectURL(imageFile);\r\n    setImagePreview(url);\r\n\r\n    return () => URL.revokeObjectURL(url);\r\n  }, [imageFile]);\r\n\r\n  // Optimized fetch with pagination and filtering\r\n  const fetchScenarios = useCallback(async (page = 1, resetData = false) => {\r\n    try {\r\n      if (resetData) {\r\n        setLoading(true);\r\n      }\r\n      \r\n      const supabase = createClient();\r\n      \r\n      // Build query with filters\r\n      let query = supabase\r\n        .from('decision_trainer_scenarios')\r\n        .select('*', { count: 'exact' });\r\n      \r\n      // Apply filters\r\n      if (searchQuery.trim()) {\r\n        query = query.or(`question.ilike.%${searchQuery}%,correct_explanation.ilike.%${searchQuery}%,real_world_tip.ilike.%${searchQuery}%`);\r\n      }\r\n      \r\n      if (categoryFilter !== 'all') {\r\n        query = query.eq('category', categoryFilter);\r\n      }\r\n      \r\n      if (levelFilter !== 'all') {\r\n        query = query.eq('level', parseInt(levelFilter));\r\n      }\r\n      \r\n      if (statusFilter !== 'all') {\r\n        query = query.eq('is_active', statusFilter === 'active');\r\n      }\r\n      \r\n      if (publishedFilter !== 'all') {\r\n        query = query.eq('is_published', publishedFilter === 'published');\r\n      }\r\n      \r\n      // Apply pagination\r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n      \r\n      const { data, error, count } = await query\r\n        .order('created_at', { ascending: false })\r\n        .range(from, to);\r\n\r\n      if (error) {\r\n        console.error('âŒ Fetch error:', error);\r\n        throw error;\r\n      }\r\n      \r\n      console.log(`âœ… Scenarios loaded: ${data?.length || 0} of ${count || 0} total`);\r\n      \r\n      setScenarios(data || []);\r\n      setTotalCount(count || 0);\r\n      setCurrentPage(page);\r\n    } catch (error: unknown) {\r\n      console.error('Error fetching scenarios:', error);\r\n      const errorMessage = (error as Error).message || 'Failed to load scenarios';\r\n      \r\n      if (errorMessage.includes('42P01')) {\r\n        toast.error('Decision trainer table not found. Please run the database migration.');\r\n      } else if (errorMessage.includes('42501')) {\r\n        toast.error('Permission denied. Please check your admin privileges.');\r\n      } else {\r\n        toast.error(errorMessage);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [searchQuery, categoryFilter, levelFilter, statusFilter, publishedFilter, pageSize]);\r\n\r\n  // Debounced search effect\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      if (user) {\r\n        setCurrentPage(1);\r\n        fetchScenarios(1, true);\r\n      }\r\n    }, 300);\r\n    \r\n    return () => clearTimeout(timeoutId);\r\n  }, [searchQuery, fetchScenarios, user]);\r\n\r\n  // Filter change effect\r\n  useEffect(() => {\r\n    if (user) {\r\n      setCurrentPage(1);\r\n      fetchScenarios(1, true);\r\n    }\r\n  }, [categoryFilter, levelFilter, statusFilter, publishedFilter, fetchScenarios, user]);\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/login');\r\n    } else if (user) {\r\n      fetchScenarios(1, true);\r\n    }\r\n  }, [user, authLoading, router, fetchScenarios]);\r\n\r\n  // Pagination handlers\r\n  const handleNextPage = () => {\r\n    if (hasNextPage) {\r\n      fetchScenarios(currentPage + 1, true);\r\n    }\r\n  };\r\n\r\n  const handlePrevPage = () => {\r\n    if (hasPrevPage) {\r\n      fetchScenarios(currentPage - 1, true);\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (page: number) => {\r\n    if (page >= 1 && page <= totalPages) {\r\n      fetchScenarios(page, true);\r\n    }\r\n  };\r\n\r\n  // Clear filters\r\n  const clearFilters = () => {\r\n    setSearchQuery('');\r\n    setCategoryFilter('all');\r\n    setLevelFilter('all');\r\n    setStatusFilter('all');\r\n    setPublishedFilter('all');\r\n  };\r\n\r\n  // Form helpers\r\n  type FormFieldKey =\r\n    | 'category'\r\n    | 'level'\r\n    | 'question'\r\n    | 'correct_explanation'\r\n    | 'real_world_tip'\r\n    | 'xp'\r\n    | 'image_url'\r\n    | 'chapter_id';\r\n\r\n  type FormFieldValue = string | number | null | Category;\r\n\r\n  const handleFormFieldChange = (field: FormFieldKey, value: FormFieldValue) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleOptionFieldChange = (index: number, field: 'text' | 'explanation', value: string) => {\r\n    setFormData((prev) => {\r\n      const options = [...prev.options];\r\n      options[index] = {\r\n        ...options[index],\r\n        [field]: value,\r\n      };\r\n      return {\r\n        ...prev,\r\n        options,\r\n      };\r\n    });\r\n  };\r\n\r\n  const toggleOptionCorrect = (index: number) => {\r\n    setFormData((prev) => {\r\n      const options = prev.options.map((opt, i) =>\r\n        i === index ? { ...opt, isCorrect: !opt.isCorrect } : opt\r\n      );\r\n      return {\r\n        ...prev,\r\n        options,\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0] ?? null;\r\n    if (!file) return;\r\n    setImageFile(file);\r\n  };\r\n\r\n  const handleSubmitScenario = async (e: FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (uploading) return;\r\n\r\n    try {\r\n      const trimmedQuestion = formData.question.trim();\r\n      if (!trimmedQuestion) {\r\n        toast.error('Question is required');\r\n        return;\r\n      }\r\n\r\n      const normalizedOptions = formData.options\r\n        .map((opt) => ({\r\n          ...opt,\r\n          text: opt.text.trim(),\r\n          explanation: opt.explanation?.trim() || '',\r\n        }))\r\n        .filter((opt) => opt.text.length > 0);\r\n\r\n      if (normalizedOptions.length < 2) {\r\n        toast.error('Please provide at least two answer options');\r\n        return;\r\n      }\r\n\r\n      if (!normalizedOptions.some((opt) => opt.isCorrect)) {\r\n        toast.error('Please mark at least one option as correct');\r\n        return;\r\n      }\r\n\r\n      const trimmedCorrect = formData.correct_explanation.trim();\r\n      if (!trimmedCorrect) {\r\n        toast.error('Correct explanation is required');\r\n        return;\r\n      }\r\n\r\n      const trimmedTip = formData.real_world_tip.trim();\r\n      if (!trimmedTip) {\r\n        toast.error('Real-world tip is required');\r\n        return;\r\n      }\r\n\r\n      if (!formData.xp || formData.xp <= 0) {\r\n        toast.error('XP must be greater than 0');\r\n        return;\r\n      }\r\n\r\n      setUploading(true);\r\n      const supabase = createClient();\r\n\r\n      let imageUrl = formData.image_url || '';\r\n\r\n      if (imageFile) {\r\n        const fileExt = imageFile.name.split('.').pop();\r\n        const fileName = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}.${fileExt}`;\r\n        const filePath = `scenario-images/${fileName}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n          .from('decision-trainer')\r\n          .upload(filePath, imageFile);\r\n\r\n        if (uploadError) {\r\n          console.error('Error uploading image:', uploadError);\r\n          toast.error('Failed to upload image');\r\n          setUploading(false);\r\n          return;\r\n        }\r\n\r\n        const { data: publicUrlData } = supabase.storage\r\n          .from('decision-trainer')\r\n          .getPublicUrl(filePath);\r\n\r\n        imageUrl = publicUrlData.publicUrl;\r\n      }\r\n\r\n      if (editingScenario) {\r\n        const { error } = await supabase\r\n          .from('decision_trainer_scenarios')\r\n          .update({\r\n            category: formData.category,\r\n            level: formData.level,\r\n            question: trimmedQuestion,\r\n            image_url: imageUrl || null,\r\n            options: normalizedOptions,\r\n            correct_explanation: trimmedCorrect,\r\n            real_world_tip: trimmedTip,\r\n            xp: formData.xp,\r\n            chapter_id: formData.chapter_id || null,\r\n          })\r\n          .eq('id', editingScenario.id);\r\n\r\n        if (error) {\r\n          console.error('Error updating scenario:', error);\r\n          toast.error('Failed to update scenario');\r\n          setUploading(false);\r\n          return;\r\n        }\r\n\r\n        toast.success('Scenario updated successfully');\r\n      } else {\r\n        const generatedId = `scn-${Date.now()}`;\r\n\r\n        const { error } = await supabase\r\n          .from('decision_trainer_scenarios')\r\n          .insert({\r\n            id: generatedId,\r\n            category: formData.category,\r\n            level: formData.level,\r\n            question: trimmedQuestion,\r\n            image_url: imageUrl || null,\r\n            options: normalizedOptions,\r\n            correct_explanation: trimmedCorrect,\r\n            real_world_tip: trimmedTip,\r\n            xp: formData.xp,\r\n            is_active: true,\r\n            chapter_id: formData.chapter_id || null,\r\n          });\r\n\r\n        if (error) {\r\n          console.error('Error creating scenario:', error);\r\n          toast.error('Failed to create scenario');\r\n          setUploading(false);\r\n          return;\r\n        }\r\n\r\n        toast.success('Scenario created successfully');\r\n      }\r\n\r\n      handleCloseForm();\r\n      fetchScenarios(currentPage, true);\r\n    } catch (error) {\r\n      console.error('Error saving scenario:', error);\r\n      toast.error('Failed to save scenario');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Loading skeleton component\r\n  const LoadingSkeleton = () => (\r\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n      {Array.from({ length: pageSize }).map((_, i) => (\r\n        <div key={i} className=\"p-4 border rounded-lg\">\r\n          <Skeleton className=\"h-4 w-3/4 mb-2\" />\r\n          <Skeleton className=\"h-3 w-1/2 mb-4\" />\r\n          <Skeleton className=\"h-20 w-full mb-2\" />\r\n          <div className=\"flex gap-2\">\r\n            <Skeleton className=\"h-8 w-16\" />\r\n            <Skeleton className=\"h-8 w-16\" />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  if (authLoading || loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n        <div className=\"container mx-auto px-6 py-8 max-w-7xl pt-28\">\r\n          <div className=\"flex items-center justify-between mb-8\">\r\n            <div>\r\n              <Skeleton className=\"h-8 w-48 mb-2\" />\r\n              <Skeleton className=\"h-4 w-32\" />\r\n            </div>\r\n            <Skeleton className=\"h-10 w-32\" />\r\n          </div>\r\n          <LoadingSkeleton />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground\">\r\n      <Navbar />\r\n      \r\n      <div className=\"container mx-auto px-6 py-8 max-w-7xl pt-28\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div>\r\n            <div className=\"flex items-center gap-4 mb-2\">\r\n              <Button variant=\"ghost\" asChild>\r\n                <Link href=\"/admin\">\r\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n                  Back to Admin\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n            <h1 className=\"text-3xl font-bold\">Decision Trainer Scenarios</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Manage interactive driving scenarios ({totalCount} total)\r\n            </p>\r\n          </div>\r\n          <Button onClick={handleOpenCreateForm}>\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            Add Scenario\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Filters and Search */}\r\n        <GlassCard className=\"p-6 mb-6 border border-border/80 bg-black/80\">\r\n          <div className=\"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between\">\r\n            <div className=\"flex flex-col sm:flex-row gap-4 flex-1\">\r\n              {/* Search */}\r\n              <div className=\"relative flex-1 max-w-md\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\r\n                <Input\r\n                  placeholder=\"Search scenarios...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Filters */}\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <Select value={categoryFilter} onValueChange={setCategoryFilter}>\r\n                  <SelectTrigger className=\"w-40 min-w-[9rem]\">\r\n                    <SelectValue placeholder=\"Category\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Categories</SelectItem>\r\n                    {Object.entries(CATEGORY_INFO).map(([key, info]) => (\r\n                      <SelectItem key={key} value={key}>\r\n                        {info.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                <Select value={levelFilter} onValueChange={setLevelFilter}>\r\n                  <SelectTrigger className=\"w-32 min-w-[7rem]\">\r\n                    <SelectValue placeholder=\"Level\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Levels</SelectItem>\r\n                    <SelectItem value=\"1\">Level 1</SelectItem>\r\n                    <SelectItem value=\"2\">Level 2</SelectItem>\r\n                    <SelectItem value=\"3\">Level 3</SelectItem>\r\n                    <SelectItem value=\"4\">Level 4</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                  <SelectTrigger className=\"w-32 min-w-[7rem]\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Status</SelectItem>\r\n                    <SelectItem value=\"active\">Active</SelectItem>\r\n                    <SelectItem value=\"inactive\">Inactive</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n\r\n                <Select value={publishedFilter} onValueChange={setPublishedFilter}>\r\n                  <SelectTrigger className=\"w-32 min-w-[7rem]\">\r\n                    <SelectValue placeholder=\"Published\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Publish</SelectItem>\r\n                    <SelectItem value=\"published\">Published</SelectItem>\r\n                    <SelectItem value=\"draft\">Draft</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Clear filters button */}\r\n            {(searchQuery || categoryFilter !== 'all' || levelFilter !== 'all' || statusFilter !== 'all') && (\r\n              <Button variant=\"outline\" onClick={clearFilters}>\r\n                <X className=\"w-4 h-4 mr-2\" />\r\n                Clear Filters\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </GlassCard>\r\n\r\n        {/* Scenarios Grid */}\r\n        {loading ? (\r\n          <LoadingSkeleton />\r\n        ) : scenarios.length === 0 ? (\r\n          <GlassCard className=\"p-12 text-center border border-border/80 bg-black/80\">\r\n            <div className=\"text-6xl mb-4\">ðŸŽ¯</div>\r\n            <h3 className=\"text-xl font-bold mb-2\">No scenarios found</h3>\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              {searchQuery || categoryFilter !== 'all' || levelFilter !== 'all' || statusFilter !== 'all'\r\n                ? 'Try adjusting your filters or search query.'\r\n                : 'Get started by creating your first scenario.'}\r\n            </p>\r\n            <Button onClick={() => setShowForm(true)}>\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Add First Scenario\r\n            </Button>\r\n          </GlassCard>\r\n        ) : (\r\n          <>\r\n            {/* Scenarios Grid */}\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8\">\r\n              {scenarios.map((scenario) => (\r\n                <GlassCard key={scenario.id} className=\"p-6 border border-border/80 bg-black/80 hover:border-primary/50 hover:shadow-[0_22px_60px_rgba(0,0,0,0.9)] transition-all\">\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex gap-2\">\r\n                      <Badge variant=\"outline\">\r\n                        {CATEGORY_INFO[scenario.category as Category]?.name || scenario.category}\r\n                      </Badge>\r\n                      <Badge variant=\"secondary\">\r\n                        Level {scenario.level}\r\n                      </Badge>\r\n                      <Badge variant={scenario.is_active ? \"default\" : \"destructive\"}>\r\n                        {scenario.is_active ? 'Active' : 'Inactive'}\r\n                      </Badge>\r\n                      <Badge variant={scenario.is_published !== false ? \"outline\" : \"destructive\"}>\r\n                        {scenario.is_published !== false ? 'Published' : 'Draft'}\r\n                      </Badge>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <h3 className=\"font-semibold mb-2 line-clamp-2\">\r\n                    {scenario.question}\r\n                  </h3>\r\n                  \r\n                  {scenario.image_url && (\r\n                    <div className=\"mb-3\">\r\n                      <img\r\n                        src={scenario.image_url}\r\n                        alt=\"Scenario\"\r\n                        className=\"w-full h-32 object-cover rounded-md\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <p className=\"text-sm text-muted-foreground mb-4 line-clamp-2\">\r\n                    {scenario.correct_explanation}\r\n                  </p>\r\n                  \r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium text-primary\">\r\n                      {scenario.xp} XP\r\n                    </span>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => {\r\n                          setEditingScenario(scenario);\r\n                          setFormData({\r\n                            category: scenario.category as Category,\r\n                            level: scenario.level,\r\n                            question: scenario.question,\r\n                            image_url: scenario.image_url || '',\r\n                            options: scenario.options,\r\n                            correct_explanation: scenario.correct_explanation,\r\n                            real_world_tip: scenario.real_world_tip,\r\n                            xp: scenario.xp,\r\n                            chapter_id: scenario.chapter_id || 1,\r\n                            is_published: scenario.is_published !== false,\r\n                          });\r\n                          setImagePreview(scenario.image_url || '');\r\n                          setShowForm(true);\r\n                        }}\r\n                      >\r\n                        <Edit className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"destructive\"\r\n                        onClick={() => {\r\n                          setScenarioToDelete(scenario.id);\r\n                          setDeleteDialogOpen(true);\r\n                        }}\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </GlassCard>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            {totalPages > 1 && (\r\n              <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Showing {((currentPage - 1) * pageSize) + 1} to {Math.min(currentPage * pageSize, totalCount)} of {totalCount} scenarios\r\n                </p>\r\n                \r\n                <div className=\"flex items-center gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handlePrevPage}\r\n                    disabled={!hasPrevPage}\r\n                  >\r\n                    <ChevronLeft className=\"w-4 h-4\" />\r\n                    Previous\r\n                  </Button>\r\n                  \r\n                  {/* Page numbers */}\r\n                  <div className=\"flex gap-1\">\r\n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                      let pageNum;\r\n                      if (totalPages <= 5) {\r\n                        pageNum = i + 1;\r\n                      } else if (currentPage <= 3) {\r\n                        pageNum = i + 1;\r\n                      } else if (currentPage >= totalPages - 2) {\r\n                        pageNum = totalPages - 4 + i;\r\n                      } else {\r\n                        pageNum = currentPage - 2 + i;\r\n                      }\r\n                      \r\n                      return (\r\n                        <Button\r\n                          key={pageNum}\r\n                          variant={pageNum === currentPage ? \"default\" : \"outline\"}\r\n                          size=\"sm\"\r\n                          onClick={() => handlePageChange(pageNum)}\r\n                          className=\"w-10\"\r\n                        >\r\n                          {pageNum}\r\n                        </Button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleNextPage}\r\n                    disabled={!hasNextPage}\r\n                  >\r\n                    Next\r\n                    <ChevronRight className=\"w-4 h-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Add / Edit Scenario Form */}\r\n      {showForm && (\r\n        <div className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center\">\r\n          <div className=\"w-full max-w-4xl mx-4\">\r\n            <GlassCard className=\"p-6 border border-border/80 bg-black/90 max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h2 className=\"text-xl font-bold\">\r\n                  {editingScenario ? 'Edit Scenario' : 'Add Scenario'}\r\n                </h2>\r\n                <Button variant=\"ghost\" size=\"icon\" onClick={handleCloseForm}>\r\n                  <X className=\"w-4 h-4\" />\r\n                </Button>\r\n              </div>\r\n\r\n              <form className=\"space-y-6\" onSubmit={handleSubmitScenario}>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                  <div>\r\n                    <Label className=\"mb-1 block\">Category</Label>\r\n                    <Select\r\n                      value={formData.category}\r\n                      onValueChange={(value) => handleFormFieldChange('category', value as Category)}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select category\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {Object.entries(CATEGORY_INFO).map(([key, info]) => (\r\n                          <SelectItem key={key} value={key}>\r\n                            {info.name}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"mb-1 block\">Level</Label>\r\n                    <Select\r\n                      value={String(formData.level)}\r\n                      onValueChange={(value) => handleFormFieldChange('level', parseInt(value))}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select level\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"1\">Level 1</SelectItem>\r\n                        <SelectItem value=\"2\">Level 2</SelectItem>\r\n                        <SelectItem value=\"3\">Level 3</SelectItem>\r\n                        <SelectItem value=\"4\">Level 4</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"mb-1 block\">XP</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min={0}\r\n                      value={formData.xp}\r\n                      onChange={(e) => handleFormFieldChange('xp', parseInt(e.target.value || '0'))}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label className=\"mb-1 block\">Chapter (optional)</Label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      min={1}\r\n                      max={20}\r\n                      value={formData.chapter_id ?? ''}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        handleFormFieldChange(\r\n                          'chapter_id',\r\n                          value === '' ? null : parseInt(value, 10) || null,\r\n                        );\r\n                      }}\r\n                      placeholder=\"e.g. 5\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <Label className=\"mb-1 block\">Status</Label>\r\n                    <Select\r\n                      value={formData.is_published ? 'published' : 'draft'}\r\n                      onValueChange={(value) =>\r\n                        setFormData((prev) => ({\r\n                          ...prev,\r\n                          is_published: value === 'published',\r\n                        }))\r\n                      }\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Select status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"published\">Published</SelectItem>\r\n                        <SelectItem value=\"draft\">Draft</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"block\">Question</Label>\r\n                    <Textarea\r\n                      value={formData.question}\r\n                      onChange={(e) => handleFormFieldChange('question', e.target.value)}\r\n                      placeholder=\"Enter the scenario question...\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"block\">Correct Explanation</Label>\r\n                    <Textarea\r\n                      value={formData.correct_explanation}\r\n                      onChange={(e) => handleFormFieldChange('correct_explanation', e.target.value)}\r\n                      placeholder=\"Explain why the correct answer is right...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label className=\"block\">Real-world Tip</Label>\r\n                    <Textarea\r\n                      value={formData.real_world_tip}\r\n                      onChange={(e) => handleFormFieldChange('real_world_tip', e.target.value)}\r\n                      placeholder=\"Give a practical real-world driving tip...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label className=\"block\">Answer Options</Label>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      Mark all correct answers (multiple correct options supported)\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"grid gap-4 md:grid-cols-2\">\r\n                    {formData.options.map((option, index) => (\r\n                      <div key={index} className=\"space-y-2 border rounded-lg p-3\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"text-xs font-medium text-muted-foreground\">\r\n                            Option {index + 1}\r\n                          </span>\r\n                          <Button\r\n                            type=\"button\"\r\n                            size=\"sm\"\r\n                            variant={option.isCorrect ? 'default' : 'outline'}\r\n                            onClick={() => toggleOptionCorrect(index)}\r\n                          >\r\n                            {option.isCorrect ? 'Correct' : 'Mark Correct'}\r\n                          </Button>\r\n                        </div>\r\n                        <Input\r\n                          placeholder=\"Option text\"\r\n                          value={option.text}\r\n                          onChange={(e) => handleOptionFieldChange(index, 'text', e.target.value)}\r\n                        />\r\n                        <Textarea\r\n                          placeholder=\"Optional explanation for this option\"\r\n                          value={option.explanation}\r\n                          onChange={(e) => handleOptionFieldChange(index, 'explanation', e.target.value)}\r\n                          className=\"mt-2\"\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label className=\"block\">Image (optional)</Label>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <Button type=\"button\" variant=\"outline\" className=\"flex items-center gap-2 relative overflow-hidden\">\r\n                      <ImageIcon className=\"w-4 h-4\" />\r\n                      <span>Choose Image</span>\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n                        onChange={handleImageChange}\r\n                      />\r\n                    </Button>\r\n                    {imagePreview && (\r\n                      <div className=\"w-24 h-16 rounded-md overflow-hidden border\">\r\n                        <img\r\n                          src={imagePreview}\r\n                          alt=\"Preview\"\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  {formData.image_url && !imagePreview && (\r\n                    <p className=\"text-xs text-muted-foreground break-all\">\r\n                      Current image: {formData.image_url}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 pt-2\">\r\n                  <Button type=\"button\" variant=\"outline\" onClick={handleCloseForm} disabled={uploading} className=\"w-full sm:w-auto\">\r\n                    Cancel\r\n                  </Button>\r\n                  <Button type=\"submit\" disabled={uploading} className=\"w-full sm:w-auto\">\r\n                    {uploading ? 'Saving...' : editingScenario ? 'Save Changes' : 'Create Scenario'}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </GlassCard>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Scenario</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this scenario? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={async () => {\r\n                if (!scenarioToDelete) return;\r\n                \r\n                try {\r\n                  const supabase = createClient();\r\n                  const { error } = await supabase\r\n                    .from('decision_trainer_scenarios')\r\n                    .delete()\r\n                    .eq('id', scenarioToDelete);\r\n                  \r\n                  if (error) throw error;\r\n                  \r\n                  toast.success('Scenario deleted successfully');\r\n                  fetchScenarios(currentPage, true);\r\n                } catch (error) {\r\n                  console.error('Error deleting scenario:', error);\r\n                  toast.error('Failed to delete scenario');\r\n                } finally {\r\n                  setDeleteDialogOpen(false);\r\n                  setScenarioToDelete(null);\r\n                }\r\n              }}\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}
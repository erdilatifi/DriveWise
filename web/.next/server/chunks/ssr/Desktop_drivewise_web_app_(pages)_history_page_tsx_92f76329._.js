module.exports=[48983,a=>{"use strict";var b=a.i(681),c=a.i(84813),d=a.i(53365),e=a.i(78330),f=a.i(93639),g=a.i(663),h=a.i(92347),i=a.i(1004),j=a.i(40591),k=a.i(46667),l=a.i(96112),m=a.i(93962),n=a.i(39232);let o=(0,a.i(2017).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=a.i(10226),q=a.i(34213),r=a.i(22309),s=a.i(87454),t=a.i(61334),u=a.i(89796);function v(){let{user:a,loading:v}=(0,r.useAuth)(),w=(0,d.useRouter)(),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)("all"),{data:H,isLoading:I,error:J}=(0,u.useTestHistory)(a?.id,x,6),K=(0,u.useDeleteTestAttempt)(),L=(0,u.useClearAllTestAttempts)(),M=H?.tests||[],N=H?.totalCount||0,O=H?.totalPages||1,P=M.filter(a=>{let b=a.percentage>=80;return"passed"===F?b:"failed"!==F||!b});(0,c.useEffect)(()=>{v||a||w.push("/")},[v,a,w]);let Q=async()=>{if(D)try{await K.mutateAsync(D),t.toast.success("Test deleted successfully"),A(!1),E(null)}catch(a){t.toast.error("Failed to delete test")}},R=async()=>{if(a?.id)try{await L.mutateAsync(a.id),t.toast.success("All test history cleared successfully"),C(!1),y(1)}catch(a){t.toast.error("Failed to clear history")}};return v||!a||I?(0,b.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,b.jsx)(e.Navbar,{}),(0,b.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl pt-28",children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between flex-wrap gap-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-9 w-40"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-72"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right space-y-1",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-16"}),(0,b.jsx)(h.Skeleton,{className:"h-3 w-24"})]}),(0,b.jsx)(h.Skeleton,{className:"h-10 w-40"})]})]}),(0,b.jsx)("div",{className:"space-y-4 mb-8",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(f.GlassCard,{className:"p-6 border border-border/80 bg-black/80",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)(h.Skeleton,{className:"w-12 h-12 rounded-xl"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-64"}),(0,b.jsx)(h.Skeleton,{className:"h-3 w-40"})]}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-7 w-12"}),(0,b.jsx)(h.Skeleton,{className:"h-3 w-16"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-9 w-20"}),(0,b.jsx)(h.Skeleton,{className:"h-9 w-9"})]})]})},c))})]})]}):(0,b.jsxs)("div",{className:"relative min-h-screen bg-background text-foreground overflow-hidden",children:[(0,b.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]",children:(0,b.jsxs)("svg",{className:"h-full w-full opacity-[0.06]",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("defs",{children:(0,b.jsx)("pattern",{id:"history-grid",width:"32",height:"32",patternUnits:"userSpaceOnUse",children:(0,b.jsx)("path",{d:"M32 0H0V32",fill:"none",stroke:"currentColor",strokeWidth:"0.4"})})}),(0,b.jsx)("rect",{width:"100%",height:"100%",fill:"url(#history-grid)"})]})}),(0,b.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/25 via-transparent to-transparent blur-3xl"}),(0,b.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[(0,b.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent"}),(0,b.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent"})]}),(0,b.jsx)(e.Navbar,{}),(0,b.jsxs)(q.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-6 py-8 max-w-7xl pt-28",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(g.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,b.jsxs)(i.default,{href:"/dashboard",children:[(0,b.jsx)(j.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Test History"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Review all your completed tests and track your progress"})]}),N>0&&(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-primary",children:N}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Tests"})]}),(0,b.jsxs)(g.Button,{variant:"destructive",onClick:()=>C(!0),children:[(0,b.jsx)(p.Trash2,{className:"w-4 h-4 mr-2"}),"Clear All History"]})]})]})]}),N>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Filter by result"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"all"===F?"default":"outline",size:"sm",onClick:()=>G("all"),children:"All"}),(0,b.jsx)(g.Button,{variant:"passed"===F?"default":"outline",size:"sm",onClick:()=>G("passed"),children:"Passed"}),(0,b.jsx)(g.Button,{variant:"failed"===F?"default":"outline",size:"sm",onClick:()=>G("failed"),children:"Failed"})]})]}),P.length>0?(0,b.jsx)("div",{className:"space-y-4 mb-8",children:P.map(a=>{let c=a.percentage>=80;return(0,b.jsx)(q.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:(0,b.jsx)(f.GlassCard,{className:"p-5 sm:p-6 border border-border/80 bg-black/80 hover:border-primary/40 transition-colors",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${c?"bg-green-500/10":"bg-red-500/10"}`,children:c?(0,b.jsx)(k.CheckCircle,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):(0,b.jsx)(l.XCircle,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-base sm:text-lg mb-0.5",children:["Category ",a.category," - ","mixed"===a.test_number?"Mixed Test":"personalized"===a.test_number?"Personalized Test":`Test #${a.test_number}`]}),(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[new Date(a.completed_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," â€¢ ",a.total_questions," questions"]})]})]}),(0,b.jsx)("div",{className:"hidden sm:flex flex-col items-end text-xs",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full font-medium ${c?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:c?"Passed":"Failed"})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{className:`text-2xl sm:text-3xl font-bold ${c?"text-green-500":"text-red-500"}`,children:[a.percentage,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Score"})]}),(0,b.jsx)("div",{className:"hidden sm:block h-8 w-px bg-border"}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[a.score,"/",a.total_questions," correct"]})]}),(0,b.jsxs)("div",{className:"flex flex-row sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto sm:justify-end",children:[(0,b.jsx)(g.Button,{asChild:!0,className:"flex-[0.7] sm:flex-none",children:(0,b.jsxs)(i.default,{href:`/history/${a.id}`,children:[(0,b.jsx)(o,{className:"w-4 h-4 mr-2"}),"Review"]})}),(0,b.jsx)(g.Button,{variant:"destructive",size:"icon",className:"flex-[0.3] sm:flex-none",onClick:()=>{E(a.id),A(!0)},children:(0,b.jsx)(p.Trash2,{className:"w-4 h-4"})})]})]})]})})},a.id)})}):(0,b.jsxs)(f.GlassCard,{className:"p-12 text-center mb-8 border border-border/80 bg-black/80",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-2",children:"No tests in this filter yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Try changing the filter or take a new test."})]}),(0,b.jsx)(s.AlertDialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(s.AlertDialogContent,{children:[(0,b.jsxs)(s.AlertDialogHeader,{children:[(0,b.jsx)(s.AlertDialogTitle,{children:"Delete Test History?"}),(0,b.jsx)(s.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete this test attempt and all associated answers."})]}),(0,b.jsxs)(s.AlertDialogFooter,{children:[(0,b.jsx)(s.AlertDialogCancel,{onClick:()=>A(!1),children:"Cancel"}),(0,b.jsx)(s.AlertDialogAction,{onClick:Q,disabled:K.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:K.isPending?"Deleting...":"Delete"})]})]})}),(0,b.jsx)(s.AlertDialog,{open:B,onOpenChange:C,children:(0,b.jsxs)(s.AlertDialogContent,{children:[(0,b.jsxs)(s.AlertDialogHeader,{children:[(0,b.jsx)(s.AlertDialogTitle,{children:"Clear All Test History?"}),(0,b.jsxs)(s.AlertDialogDescription,{children:["This action cannot be undone. This will permanently delete ALL ",N," test attempts and their associated answers from your history."]})]}),(0,b.jsxs)(s.AlertDialogFooter,{children:[(0,b.jsx)(s.AlertDialogCancel,{onClick:()=>C(!1),children:"Cancel"}),(0,b.jsx)(s.AlertDialogAction,{onClick:R,disabled:L.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:L.isPending?"Clearing...":`Clear All ${N} Tests`})]})]})}),O>1&&(0,b.jsx)(f.GlassCard,{className:"p-4 border border-border/80 bg-black/80",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",x," of ",O]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>y(a=>Math.max(1,a-1)),disabled:1===x,children:[(0,b.jsx)(m.ChevronLeft,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:O},(a,b)=>b+1).map(a=>1===a||a===O||a>=x-1&&a<=x+1?(0,b.jsx)(g.Button,{variant:x===a?"default":"outline",size:"sm",onClick:()=>y(a),className:"min-w-[40px]",children:a},a):a===x-2||a===x+2?(0,b.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},a):null)}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>y(a=>Math.min(O,a+1)),disabled:x===O,children:["Next",(0,b.jsx)(n.ChevronRight,{className:"w-4 h-4 ml-1"})]})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(x-1)*6+1," ","- ",Math.min(6*x,N)," of ",N," tests"]})]})})]}):(0,b.jsxs)(f.GlassCard,{className:"p-12 text-center border border-border/80 bg-black/80",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No test history yet"}),(0,b.jsx)(g.Button,{asChild:!0,children:(0,b.jsx)(i.default,{href:"/",children:"Start Your First Test"})})]})]})]})}a.s(["default",()=>v],48983)}];

//# sourceMappingURL=Desktop_drivewise_web_app_%28pages%29_history_page_tsx_92f76329._.js.map
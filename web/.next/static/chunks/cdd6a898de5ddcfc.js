(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45951,e=>{"use strict";let s=(0,e.i(39898).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],45951)},94312,e=>{"use strict";var s=e.i(13105),a=e.i(20696);function r({className:e,...r}){return(0,s.jsx)("div",{className:(0,a.cn)("relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]",e),...r})}e.s(["Skeleton",()=>r])},97947,e=>{"use strict";let s=(0,e.i(39898).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>s],97947)},88717,e=>{"use strict";let s=(0,e.i(39898).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>s],88717)},75039,e=>{"use strict";var s=e.i(55650),a=e.i(90582);function r(e){return(0,s.useQuery)({queryKey:["leaderboard",e],queryFn:async()=>{let s=(0,a.createClient)(),{data:r,error:t}=await s.from("decision_trainer_leaderboard").select("*").order("total_xp",{ascending:!1}).order("best_time_seconds",{ascending:!0});if(t)return{topTen:[],currentUserRank:null,totalUsers:0};let l=r||[],d=l.length,i=l.slice(0,10),n=null;if(e){let s=l.findIndex(s=>s.user_id===e);-1!==s&&(n={...l[s],rank:s+1,isInTopTen:s<10})}return{topTen:i,currentUserRank:n,totalUsers:d}},staleTime:3e4,refetchInterval:6e4})}e.s(["useLeaderboard",()=>r])},77445,e=>{"use strict";var s=e.i(13105),a=e.i(95329),r=e.i(55744),t=e.i(96755),l=e.i(20401),d=e.i(89473),i=e.i(42830),n=e.i(94312),c=e.i(45951),o=e.i(88717),x=e.i(39898);let m=(0,x.default)("medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),h=(0,x.default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var p=e.i(97947),b=e.i(33212),u=e.i(75039),f=e.i(18797);function j(){let{user:e,loading:x}=(0,t.useAuth)(),j=(0,r.useRouter)(),{t:g}=(0,f.useLanguage)(),{data:N,isLoading:y}=(0,u.useLeaderboard)(e?.id),v=N?.topTen||[],w=N?.currentUserRank,k=N?.totalUsers||0;if((0,a.useEffect)(()=>{x||e||j.push("/login")},[e,x,j]),x||!e)return(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})});if(y)return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(l.Navbar,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl pt-28",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(n.Skeleton,{className:"h-9 w-40 mb-4"}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Skeleton,{className:"h-8 w-48"}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-64"})]})})]}),(0,s.jsx)(i.GlassCard,{className:"p-6",children:(0,s.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.Skeleton,{className:"h-5 w-32"}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-40"})]}),Array.from({length:3}).map((e,a)=>(0,s.jsx)("div",{className:"p-4 rounded-lg border-2 border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 flex justify-center",children:(0,s.jsx)(n.Skeleton,{className:"h-6 w-6 rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(n.Skeleton,{className:"h-4 w-40"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(n.Skeleton,{className:"h-3 w-24"}),(0,s.jsx)(n.Skeleton,{className:"h-3 w-24"}),(0,s.jsx)(n.Skeleton,{className:"h-3 w-24"})]})]}),(0,s.jsx)(n.Skeleton,{className:"h-6 w-16"}),(0,s.jsx)(n.Skeleton,{className:"h-6 w-16"})]})},a))]})})]})]});let _=e=>{if(!e)return"--";let s=Math.floor(e/60);return`${s}:${(e%60).toString().padStart(2,"0")}`};return(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground relative overflow-hidden",children:[(0,s.jsx)(l.Navbar,{}),(0,s.jsx)("div",{className:"pointer-events-none absolute -top-40 right-0 w-[420px] h-[420px] bg-primary/15 rounded-full blur-3xl opacity-80"}),(0,s.jsx)("div",{className:"pointer-events-none absolute -bottom-40 left-0 w-[420px] h-[420px] bg-primary/5 rounded-full blur-3xl opacity-80"}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-x-16 top-40 h-px bg-gradient-to-r from-transparent via-primary/40 to-transparent opacity-50"}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl pt-28 relative z-10",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(d.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,s.jsxs)(b.default,{href:"/decision-trainer",children:[(0,s.jsx)(c.ArrowLeft,{className:"w-4 h-4 mr-2"}),g("leaderboard.backToTrainer")]})}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"inline-flex items-center gap-3 text-3xl md:text-4xl font-semibold tracking-tight mb-2",children:[(0,s.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-2xl border border-border/70 bg-black/70",children:(0,s.jsx)(o.Trophy,{className:"w-5 h-5 text-orange-300"})}),(0,s.jsx)("span",{className:"bg-gradient-to-r from-orange-400 to-amber-200 bg-clip-text text-transparent",children:g("trainer.leaderboard")})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:g("leaderboard.subtitle")})]})})]}),(0,s.jsxs)(i.GlassCard,{className:"p-6 border border-border/80 bg-black/80 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute inset-x-6 top-0 h-px bg-gradient-to-r from-transparent via-orange-400/40 to-transparent opacity-70"}),w&&!w.isInTopTen&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:g("leaderboard.yourRank")}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["#",w.rank," of ",k]})]}),(0,s.jsx)("div",{className:"p-4 rounded-lg border-2 border-primary/70 bg-primary/10",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 flex justify-center",children:(0,s.jsxs)("span",{className:"text-primary font-semibold text-sm px-2 py-1 rounded-full bg-primary/10 border border-primary/40",children:["#",w.rank]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-bold",children:w.full_name||w.email?.split("@")[0]||"You"}),(0,s.jsx)("span",{className:"text-xs bg-primary/15 text-primary px-2 py-1 rounded-full border border-primary/30",children:"You"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:[w.total_scenarios," ",g("dashboard.trainerScenarios")]}),(0,s.jsxs)("span",{children:[w.accuracy,"% ",g("dashboard.trainerAccuracy")]}),(0,s.jsxs)("span",{children:[w.categories_completed," ",g("dashboard.trainerCategoriesPracticed")]}),w.best_time_seconds&&(0,s.jsxs)("span",{className:"text-blue-500",children:["⏱️ ",_(w.best_time_seconds)]})]})]}),(0,s.jsxs)("div",{className:"text-center sm:text-right",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-semibold text-primary",children:[(0,s.jsx)(p.Zap,{className:"w-5 h-5"}),w.total_xp]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:g("dashboard.trainerXp")})]}),(0,s.jsxs)("div",{className:"text-center sm:text-right",children:[(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 text-xl font-semibold text-orange-300",children:[(0,s.jsx)(p.Zap,{className:"w-4 h-4"}),w.best_streak]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:g("dashboard.trainerBestStreak")})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:g("leaderboard.top10Title")}),k>10&&(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[g("leaderboard.showingTop10Of")," ",k]})]}),0===v.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(o.Trophy,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-bold mb-2",children:g("leaderboard.noDataTitle")}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:g("leaderboard.noDataSubtitle")}),(0,s.jsx)(d.Button,{asChild:!0,children:(0,s.jsx)(b.default,{href:"/decision-trainer",children:g("leaderboard.startLearningCta")})})]}):(0,s.jsx)(s.Fragment,{children:v.map((a,r)=>{let t=r+1,l=a.user_id===e.id;return(0,s.jsx)("div",{className:`p-4 rounded-lg border-2 transition-all ${l?"border-primary/80 bg-primary/10":t<=3?"border-amber-400/60 bg-black/70":"border-border/70 bg-black/70"}`,children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,s.jsx)("div",{className:"w-10 flex justify-center mt-0.5",children:1===t?(0,s.jsx)(o.Trophy,{className:"w-6 h-6 text-yellow-500"}):2===t?(0,s.jsx)(m,{className:"w-6 h-6 text-gray-400"}):3===t?(0,s.jsx)(h,{className:"w-6 h-6 text-amber-600"}):(0,s.jsxs)("span",{className:"text-muted-foreground font-bold",children:["#",t]})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("h3",{className:"font-bold truncate",children:a.full_name||a.email?.split("@")[0]||"Anonymous"}),l&&(0,s.jsx)("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded-full border border-primary/30",children:"You"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2 text-xs sm:text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:[a.total_scenarios," ",g("dashboard.trainerScenarios")]}),(0,s.jsxs)("span",{children:[a.accuracy,"% ",g("dashboard.trainerAccuracy")]}),(0,s.jsxs)("span",{children:[a.categories_completed," ",g("dashboard.trainerCategoriesPracticed")]}),a.best_time_seconds&&(0,s.jsxs)("span",{className:"text-blue-500",children:["⏱️ ",_(a.best_time_seconds)]})]})]})]}),(0,s.jsxs)("div",{className:"flex w-full sm:w-auto justify-between sm:justify-end gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"text-center sm:text-right min-w-[90px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center sm:justify-end gap-1 text-xl font-semibold text-primary",children:[(0,s.jsx)(p.Zap,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"tabular-nums",children:a.total_xp})]}),(0,s.jsx)("div",{className:"text-[11px] text-muted-foreground uppercase tracking-wide",children:g("dashboard.trainerXp")})]}),(0,s.jsxs)("div",{className:"text-center sm:text-right min-w-[90px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center sm:justify-end gap-1 text-lg font-semibold text-orange-300",children:[(0,s.jsx)(p.Zap,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"tabular-nums",children:a.best_streak})]}),(0,s.jsx)("div",{className:"text-[11px] text-muted-foreground uppercase tracking-wide",children:g("dashboard.trainerBestStreak")})]})]})]})},a.user_id)})})]})]}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(i.GlassCard,{className:"p-6 text-center border border-border/80 bg-black/80",children:[(0,s.jsx)(o.Trophy,{className:"w-10 h-10 mx-auto mb-3 text-amber-300"}),(0,s.jsx)("h3",{className:"font-bold text-2xl mb-1",children:v[0]?.total_xp||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:g("leaderboard.highestXp")})]}),(0,s.jsxs)(i.GlassCard,{className:"p-6 text-center border border-border/80 bg-black/80",children:[(0,s.jsx)(h,{className:"w-10 h-10 mx-auto mb-3 text-emerald-300"}),(0,s.jsxs)("h3",{className:"font-bold text-2xl mb-1",children:[v[0]?.accuracy||0,"%"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:g("leaderboard.topAccuracy")})]}),(0,s.jsxs)(i.GlassCard,{className:"p-6 text-center border border-border/80 bg-black/80",children:[(0,s.jsx)(p.Zap,{className:"w-8 h-8 mx-auto mb-3 text-orange-300"}),(0,s.jsx)("h3",{className:"font-bold text-2xl mb-1",children:v.length>0?Math.max(...v.map(e=>e.best_streak??0),0):0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:g("leaderboard.longestStreak")})]})]})]})]})}e.s(["default",()=>j],77445)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94312,e=>{"use strict";var t=e.i(13105),s=e.i(20696);function r({className:e,...r}){return(0,t.jsx)("div",{className:(0,s.cn)("relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]",e),...r})}e.s(["Skeleton",()=>r])},45951,e=>{"use strict";let t=(0,e.i(39898).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],45951)},3604,e=>{"use strict";var t=e.i(95329),s=e.i(33133),r=e.i(50863),a=e.i(8181),i=e.i(921),l=class extends a.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},n=e.i(94494);function o(e,s){let a=(0,n.useQueryClient)(s),[o]=t.useState(()=>new l(a,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let c=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(r.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d=t.useCallback((e,t)=>{o.mutate(e,t).catch(i.noop)},[o]);if(c.error&&(0,i.shouldThrowError)(o.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}e.s(["useMutation",()=>o],3604)},54538,e=>{"use strict";let t=(0,e.i(39898).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],54538)},58598,e=>{"use strict";var t=e.i(13105),s=e.i(95329),r=e.i(20696),a=e.i(89473);let i=({open:e,onOpenChange:s,children:r})=>(0,t.jsx)(t.Fragment,{children:e&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-xl",onClick:()=>s?.(!1)}),(0,t.jsx)("div",{className:"relative z-50",children:r})]})}),l=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl border border-border/70 bg-card/90 p-6 shadow-[0_24px_80px_rgba(0,0,0,0.9)] backdrop-blur-2xl duration-200",e),...s}));l.displayName="AlertDialogContent";let n=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});n.displayName="AlertDialogHeader";let o=({className:e,...s})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});o.displayName="AlertDialogFooter";let c=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h2",{ref:a,className:(0,r.cn)("text-lg font-semibold",e),...s}));c.displayName="AlertDialogTitle";let d=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="AlertDialogDescription";let u=s.forwardRef(({className:e,...s},i)=>(0,t.jsx)(a.Button,{ref:i,className:(0,r.cn)("",e),...s}));u.displayName="AlertDialogAction";let m=s.forwardRef(({className:e,...s},i)=>(0,t.jsx)(a.Button,{ref:i,variant:"outline",className:(0,r.cn)("mt-2 sm:mt-0",e),...s}));m.displayName="AlertDialogCancel",e.s(["AlertDialog",()=>i,"AlertDialogAction",()=>u,"AlertDialogCancel",()=>m,"AlertDialogContent",()=>l,"AlertDialogDescription",()=>d,"AlertDialogFooter",()=>o,"AlertDialogHeader",()=>n,"AlertDialogTitle",()=>c])},49329,e=>{"use strict";let t=(0,e.i(39898).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],49329)},62062,e=>{"use strict";let t=(0,e.i(39898).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],62062)},9713,e=>{"use strict";var t=e.i(55650),s=e.i(3604),r=e.i(94494),a=e.i(90582);function i(e){return(0,t.useQuery)({queryKey:["global-daily-streak",e],queryFn:async()=>{let t=(0,a.createClient)(),{data:s,error:r}=await t.from("test_attempts").select("completed_at").eq("user_id",e);if(r)throw r;let{data:i,error:l}=await t.from("decision_trainer_attempts").select("created_at").eq("user_id",e);if(l)throw l;let n=[];(s||[]).forEach(e=>{let t=new Date(e.completed_at);n.push(new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime())}),(i||[]).forEach(e=>{let t=new Date(e.created_at);n.push(new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime())});let o=[...new Set(n)].sort((e,t)=>t-e);if(0===o.length)return{currentStreak:0,bestStreak:0};let c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime(),u=0,m=0;if(o[0]===d||o[0]===d-864e5){u=1,m=1;for(let e=1;e<o.length;e++){let t=o[e-1]-864e5;if(o[e]===t)++u>m&&(m=u);else break}}return{currentStreak:u,bestStreak:m}},enabled:!!e,staleTime:0,refetchOnMount:"always"})}function l(e){return(0,t.useQuery)({queryKey:["dashboard-stats",e],queryFn:async()=>{let t=(0,a.createClient)();try{let[s,r,a,i]=await Promise.all([t.rpc("get_dashboard_stats",{p_user_id:e}),t.rpc("get_weekly_progress",{p_user_id:e}),t.rpc("get_recent_tests",{p_user_id:e,p_limit:4}),t.from("test_attempts").select("completed_at").eq("user_id",e).order("completed_at",{ascending:!1})]);if(s.error)throw s.error;if(r.error)throw r.error;if(a.error)throw a.error;let l=s.data?.[0]||{total_tests:0,average_score:0,best_score:0,tests_this_week:0,passed_tests:0,failed_tests:0},n=(i.data||[]).map(e=>{let t=new Date(e.completed_at);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}),o=[...new Set(n)].sort((e,t)=>t-e),c=0,d=new Date,u=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime();if(o.length>0&&(o[0]===u||o[0]===u-864e5)){c=1;for(let e=1;e<o.length;e++){let t=o[e-1]-864e5;if(o[e]===t)c++;else break}}let m=[],h=r.data||[];for(let e=6;e>=0;e--){let t=new Date;t.setDate(t.getDate()-e);let s=t.toISOString().split("T")[0],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],a=h.find(e=>e.attempt_date===s);m.push({date:r,score:a?a.daily_avg_score:0})}let x=(a.data||[]).map(e=>({id:e.id,category:e.category,testNumber:e.test_number||"1",score:Number(e.percentage),date:new Date(e.completed_at).toLocaleDateString(),passed:Number(e.percentage)>=80}));return{stats:{totalTests:l.total_tests,averageScore:l.average_score,bestScore:l.best_score,testsThisWeek:l.tests_this_week,streak:c,passedTests:l.passed_tests,failedTests:l.failed_tests},progressData:m,recentTests:x}}catch(e){return{stats:{totalTests:0,averageScore:0,bestScore:0,testsThisWeek:0,streak:0,passedTests:0,failedTests:0},progressData:[],recentTests:[]}}},enabled:!!e,staleTime:12e4})}function n(e,s=1,r=6){return(0,t.useQuery)({queryKey:["test-history",e,s,r],queryFn:async()=>{let t=(0,a.createClient)(),i=(s-1)*r,[l,n]=await Promise.all([t.from("test_attempts").select("*").eq("user_id",e).order("completed_at",{ascending:!1}).range(i,i+r-1),t.from("test_attempts").select("*",{count:"exact",head:!0}).eq("user_id",e)]);if(l.error)throw l.error;if(n.error)throw n.error;return{tests:l.data||[],totalCount:n.count||0,totalPages:Math.ceil((n.count||0)/r)}},enabled:!!e,staleTime:0,refetchOnMount:"always"})}function o(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>{let t=(0,a.createClient)(),{error:s}=await t.from("test_attempts").delete().eq("id",e);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["test-attempts"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["test-history"]})}})}function c(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>{let t=(0,a.createClient)(),{error:s}=await t.from("test_attempts").delete().eq("user_id",e);if(s)throw s},onSuccess:()=>{e.invalidateQueries({queryKey:["test-attempts"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["test-history"]})}})}function d(e,s=!0){return(0,t.useQuery)({queryKey:["test-count",e],queryFn:async()=>{let t=(0,a.createClient)(),{data:s,error:r}=await t.from("admin_questions").select("test_number").eq("category",e);if(r)throw r;return[...new Set((s||[]).map(e=>e.test_number))].length},staleTime:6e5,enabled:s&&!!e})}function u(e){return(0,t.useQuery)({queryKey:["weak-topics",e],queryFn:async()=>{let t=(0,a.createClient)(),{data:s,error:r}=await t.from("test_attempts").select("id").eq("user_id",e).order("completed_at",{ascending:!1}).limit(50);if(r)throw r;let i=(s||[]).map(e=>e.id);if(0===i.length)return{topics:[],weakTopics:[],dominantCategory:null};let{data:l,error:n}=await t.from("test_attempt_answers").select("question_id, is_correct").in("test_attempt_id",i);if(n)throw n;if(!l||0===l.length)return{topics:[],weakTopics:[],dominantCategory:null};let o=[...new Set(l.map(e=>e.question_id))],{data:c,error:d}=await t.from("admin_questions").select("id, topic, category").in("id",o);if(d)throw d;let u=new Map;(c||[]).forEach(e=>{u.set(e.id,{topic:e.topic??null,category:e.category??null})});let m={};l.forEach(e=>{let t=u.get(e.question_id);if(!t||!t.topic)return;let s=t.topic;m[s]||(m[s]={total:0,correct:0,category:t.category}),m[s].total+=1,e.is_correct&&(m[s].correct+=1)});let h=Object.entries(m).map(([e,t])=>{let s=t.total>0?t.correct/t.total:0;return{topic:e,totalQuestions:t.total,correct:t.correct,accuracy:s}}).sort((e,t)=>e.accuracy-t.accuracy),x=h.filter(e=>e.totalQuestions>=3&&e.accuracy<.8).slice(0,5),f={};x.forEach(e=>{let t=m[e.topic]?.category;t&&(f[t]=(f[t]||0)+1)});let p=null,g=0;if(Object.entries(f).forEach(([e,t])=>{t>g&&(g=t,p=e)}),!p&&h.length>0){let e={};Object.values(m).forEach(t=>{t.category&&(e[t.category]=(e[t.category]||0)+1)});let t=0;Object.entries(e).forEach(([e,s])=>{s>t&&(t=s,p=e)})}return{topics:h,weakTopics:x,dominantCategory:p}},enabled:!!e,staleTime:12e4})}e.s(["useClearAllTestAttempts",()=>c,"useDashboardStats",()=>l,"useDeleteTestAttempt",()=>o,"useGlobalDailyStreak",()=>i,"useTestCount",()=>d,"useTestHistory",()=>n,"useWeakTopics",()=>u])},96962,e=>{"use strict";let t=(0,e.i(39898).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["default",()=>t])},23901,e=>{"use strict";let t=(0,e.i(39898).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},24382,e=>{"use strict";var t=e.i(23901);e.s(["ChevronRight",()=>t.default])},29365,e=>{"use strict";var t=e.i(96962);e.s(["ChevronLeft",()=>t.default])},44237,e=>{"use strict";var t=e.i(13105),s=e.i(95329),r=e.i(55744),a=e.i(20401),i=e.i(42830),l=e.i(89473),n=e.i(94312),o=e.i(33212),c=e.i(45951),d=e.i(49329),u=e.i(62062),m=e.i(29365),h=e.i(24382);let x=(0,e.i(39898).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=e.i(54538),p=e.i(41561),g=e.i(96755),y=e.i(58598),b=e.i(77886),j=e.i(9713);function v(){let{user:e,loading:v}=(0,g.useAuth)(),w=(0,r.useRouter)(),[N,_]=(0,s.useState)(1),[k,C]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),[A,S]=(0,s.useState)(null),[M,q]=(0,s.useState)("all"),{data:O,isLoading:F,error:R}=(0,j.useTestHistory)(e?.id,N,6),K=(0,j.useDeleteTestAttempt)(),z=(0,j.useClearAllTestAttempts)(),E=O?.tests||[],B=O?.totalCount||0,P=O?.totalPages||1,Q=E.filter(e=>{let t=e.percentage>=80;return"passed"===M?t:"failed"!==M||!t});(0,s.useEffect)(()=>{v||e||w.push("/")},[v,e,w]);let H=async()=>{if(A)try{await K.mutateAsync(A),b.toast.success("Test deleted successfully"),C(!1),S(null)}catch(e){b.toast.error("Failed to delete test")}},L=async()=>{if(e?.id)try{await z.mutateAsync(e.id),b.toast.success("All test history cleared successfully"),T(!1),_(1)}catch(e){b.toast.error("Failed to clear history")}};return v||!e||F?(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)(a.Navbar,{}),(0,t.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl pt-28",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsx)(n.Skeleton,{className:"h-9 w-40"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Skeleton,{className:"h-8 w-48"}),(0,t.jsx)(n.Skeleton,{className:"h-4 w-72"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right space-y-1",children:[(0,t.jsx)(n.Skeleton,{className:"h-8 w-16"}),(0,t.jsx)(n.Skeleton,{className:"h-3 w-24"})]}),(0,t.jsx)(n.Skeleton,{className:"h-10 w-40"})]})]}),(0,t.jsx)("div",{className:"space-y-4 mb-8",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(i.GlassCard,{className:"p-6 border border-border/80 bg-black/80",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)(n.Skeleton,{className:"w-12 h-12 rounded-xl"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(n.Skeleton,{className:"h-4 w-64"}),(0,t.jsx)(n.Skeleton,{className:"h-3 w-40"})]}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(n.Skeleton,{className:"h-7 w-12"}),(0,t.jsx)(n.Skeleton,{className:"h-3 w-16"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Skeleton,{className:"h-9 w-20"}),(0,t.jsx)(n.Skeleton,{className:"h-9 w-9"})]})]})},s))})]})]}):(0,t.jsxs)("div",{className:"relative min-h-screen bg-background text-foreground overflow-hidden",children:[(0,t.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]",children:(0,t.jsxs)("svg",{className:"h-full w-full opacity-[0.06]",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("defs",{children:(0,t.jsx)("pattern",{id:"history-grid",width:"32",height:"32",patternUnits:"userSpaceOnUse",children:(0,t.jsx)("path",{d:"M32 0H0V32",fill:"none",stroke:"currentColor",strokeWidth:"0.4"})})}),(0,t.jsx)("rect",{width:"100%",height:"100%",fill:"url(#history-grid)"})]})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/25 via-transparent to-transparent blur-3xl"}),(0,t.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[(0,t.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent"}),(0,t.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent"})]}),(0,t.jsx)(a.Navbar,{}),(0,t.jsxs)(p.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-6 py-8 max-w-7xl pt-28",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(l.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,t.jsxs)(o.default,{href:"/dashboard",children:[(0,t.jsx)(c.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Test History"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review all your completed tests and track your progress"})]}),B>0&&(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-primary",children:B}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Tests"})]}),(0,t.jsxs)(l.Button,{variant:"destructive",onClick:()=>T(!0),children:[(0,t.jsx)(f.Trash2,{className:"w-4 h-4 mr-2"}),"Clear All History"]})]})]})]}),B>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Filter by result"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"all"===M?"default":"outline",size:"sm",onClick:()=>q("all"),children:"All"}),(0,t.jsx)(l.Button,{variant:"passed"===M?"default":"outline",size:"sm",onClick:()=>q("passed"),children:"Passed"}),(0,t.jsx)(l.Button,{variant:"failed"===M?"default":"outline",size:"sm",onClick:()=>q("failed"),children:"Failed"})]})]}),Q.length>0?(0,t.jsx)("div",{className:"space-y-4 mb-8",children:Q.map(e=>{let s=e.percentage>=80;return(0,t.jsx)(p.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:(0,t.jsx)(i.GlassCard,{className:"p-5 sm:p-6 border border-border/80 bg-black/80 hover:border-primary/40 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${s?"bg-green-500/10":"bg-red-500/10"}`,children:s?(0,t.jsx)(d.CheckCircle,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500"}):(0,t.jsx)(u.XCircle,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-base sm:text-lg mb-0.5",children:["Category ",e.category," - ","mixed"===e.test_number?"Mixed Test":"personalized"===e.test_number?"Personalized Test":`Test #${e.test_number}`]}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[new Date(e.completed_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," â€¢ ",e.total_questions," questions"]})]})]}),(0,t.jsx)("div",{className:"hidden sm:flex flex-col items-end text-xs",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-full font-medium ${s?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:s?"Passed":"Failed"})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:`text-2xl sm:text-3xl font-bold ${s?"text-green-500":"text-red-500"}`,children:[e.percentage,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Score"})]}),(0,t.jsx)("div",{className:"hidden sm:block h-8 w-px bg-border"}),(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[e.score,"/",e.total_questions," correct"]})]}),(0,t.jsxs)("div",{className:"flex flex-row sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto sm:justify-end",children:[(0,t.jsx)(l.Button,{asChild:!0,className:"flex-[0.7] sm:flex-none",children:(0,t.jsxs)(o.default,{href:`/history/${e.id}`,children:[(0,t.jsx)(x,{className:"w-4 h-4 mr-2"}),"Review"]})}),(0,t.jsx)(l.Button,{variant:"destructive",size:"icon",className:"flex-[0.3] sm:flex-none",onClick:()=>{S(e.id),C(!0)},children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]})]})})},e.id)})}):(0,t.jsxs)(i.GlassCard,{className:"p-12 text-center mb-8 border border-border/80 bg-black/80",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-2",children:"No tests in this filter yet"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Try changing the filter or take a new test."})]}),(0,t.jsx)(y.AlertDialog,{open:k,onOpenChange:C,children:(0,t.jsxs)(y.AlertDialogContent,{children:[(0,t.jsxs)(y.AlertDialogHeader,{children:[(0,t.jsx)(y.AlertDialogTitle,{children:"Delete Test History?"}),(0,t.jsx)(y.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete this test attempt and all associated answers."})]}),(0,t.jsxs)(y.AlertDialogFooter,{children:[(0,t.jsx)(y.AlertDialogCancel,{onClick:()=>C(!1),children:"Cancel"}),(0,t.jsx)(y.AlertDialogAction,{onClick:H,disabled:K.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:K.isPending?"Deleting...":"Delete"})]})]})}),(0,t.jsx)(y.AlertDialog,{open:D,onOpenChange:T,children:(0,t.jsxs)(y.AlertDialogContent,{children:[(0,t.jsxs)(y.AlertDialogHeader,{children:[(0,t.jsx)(y.AlertDialogTitle,{children:"Clear All Test History?"}),(0,t.jsxs)(y.AlertDialogDescription,{children:["This action cannot be undone. This will permanently delete ALL ",B," test attempts and their associated answers from your history."]})]}),(0,t.jsxs)(y.AlertDialogFooter,{children:[(0,t.jsx)(y.AlertDialogCancel,{onClick:()=>T(!1),children:"Cancel"}),(0,t.jsx)(y.AlertDialogAction,{onClick:L,disabled:z.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:z.isPending?"Clearing...":`Clear All ${B} Tests`})]})]})}),P>1&&(0,t.jsx)(i.GlassCard,{className:"p-4 border border-border/80 bg-black/80",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",N," of ",P]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===N,children:[(0,t.jsx)(m.ChevronLeft,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:P},(e,t)=>t+1).map(e=>1===e||e===P||e>=N-1&&e<=N+1?(0,t.jsx)(l.Button,{variant:N===e?"default":"outline",size:"sm",onClick:()=>_(e),className:"min-w-[40px]",children:e},e):e===N-2||e===N+2?(0,t.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},e):null)}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>_(e=>Math.min(P,e+1)),disabled:N===P,children:["Next",(0,t.jsx)(h.ChevronRight,{className:"w-4 h-4 ml-1"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(N-1)*6+1," ","- ",Math.min(6*N,B)," of ",B," tests"]})]})})]}):(0,t.jsxs)(i.GlassCard,{className:"p-12 text-center border border-border/80 bg-black/80",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No test history yet"}),(0,t.jsx)(l.Button,{asChild:!0,children:(0,t.jsx)(o.default,{href:"/",children:"Start Your First Test"})})]})]})]})}e.s(["default",()=>v],44237)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45951,e=>{"use strict";let t=(0,e.i(39898).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],45951)},3604,e=>{"use strict";var t=e.i(95329),s=e.i(33133),r=e.i(50863),n=e.i(8181),i=e.i(921),a=class extends n.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(94494);function l(e,s){let n=(0,o.useQueryClient)(s),[l]=t.useState(()=>new a(n,e));t.useEffect(()=>{l.setOptions(e)},[l,e]);let d=t.useSyncExternalStore(t.useCallback(e=>l.subscribe(r.notifyManager.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),c=t.useCallback((e,t)=>{l.mutate(e,t).catch(i.noop)},[l]);if(d.error&&(0,i.shouldThrowError)(l.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}e.s(["useMutation",()=>l],3604)},54822,e=>{"use strict";var t=e.i(95329),s=e.i(45725),r=e.i(28578),n=e=>{var n;let a,o,{present:l,children:d}=e,c=function(e){var s,n;let[a,o]=t.useState(),l=t.useRef(null),d=t.useRef(e),c=t.useRef("none"),[u,m]=(s=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>n[e][t]??e,s));return t.useEffect(()=>{let e=i(l.current);c.current="mounted"===u?e:"none"},[u]),(0,r.useLayoutEffect)(()=>{let t=l.current,s=d.current;if(s!==e){let r=c.current,n=i(t);e?m("MOUNT"):"none"===n||t?.display==="none"?m("UNMOUNT"):s&&r!==n?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,r.useLayoutEffect)(()=>{if(a){let e,t=a.ownerDocument.defaultView??window,s=s=>{let r=i(l.current).includes(CSS.escape(s.animationName));if(s.target===a&&r&&(m("ANIMATION_END"),!d.current)){let s=a.style.animationFillMode;a.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=s)})}},r=e=>{e.target===a&&(c.current=i(l.current))};return a.addEventListener("animationstart",r),a.addEventListener("animationcancel",s),a.addEventListener("animationend",s),()=>{t.clearTimeout(e),a.removeEventListener("animationstart",r),a.removeEventListener("animationcancel",s),a.removeEventListener("animationend",s)}}m("ANIMATION_END")},[a,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{l.current=e?getComputedStyle(e):null,o(e)},[])}}(l),u="function"==typeof d?d({present:c.isPresent}):t.Children.only(d),m=(0,s.useComposedRefs)(c.ref,(n=u,(o=(a=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?n.ref:(o=(a=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?n.props.ref:n.props.ref||n.ref));return"function"==typeof d||c.isPresent?t.cloneElement(u,{ref:m}):null};function i(e){return e?.animationName||"none"}n.displayName="Presence",e.s(["Presence",()=>n])},25244,e=>{"use strict";let t,s;var r,n=e.i(13105),i=e.i(95329),a=e.i(57102),o=e.i(45725),l=e.i(20281),d=e.i(23913),c=e.i(88907),u=e.i(47653),m=e.i(53973),p=e.i(54822);function h(e){var t;let s,r=(t=e,(s=i.forwardRef((e,t)=>{let{children:s,...r}=e;if(i.isValidElement(s)){var n;let e,a,l=(n=s,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let s={...t};for(let r in t){let n=e[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?s[r]=(...e)=>{let t=i(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...i}:"className"===r&&(s[r]=[n,i].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==i.Fragment&&(d.ref=t?(0,o.composeRefs)(t,l):l),i.cloneElement(s,d)}return i.Children.count(s)>1?i.Children.only(null):null})).displayName=`${t}.SlotClone`,s),a=i.forwardRef((e,t)=>{let{children:s,...a}=e,o=i.Children.toArray(s),l=o.find(x);if(l){let e=l.props.children,s=o.map(t=>t!==l?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,n.jsx)(r,{...a,ref:t,children:i.isValidElement(e)?i.cloneElement(e,void 0,s):null})}return(0,n.jsx)(r,{...a,ref:t,children:s})});return a.displayName=`${e}.Slot`,a}e.i(19164);var f=Symbol("radix.slottable");function x(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=h(`Primitive.${t}`),r=i.forwardRef((e,r)=>{let{asChild:i,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(i?s:t,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),b=e.i(37171),y=e.i(58866),j=e.i(33206),v="Dialog",[N,w]=function(e,t=[]){let s=[],r=()=>{let t=s.map(e=>i.createContext(e));return function(s){let r=s?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return r.scopeName=e,[function(t,r){let a=i.createContext(r),o=s.length;s=[...s,r];let l=t=>{let{scope:s,children:r,...l}=t,d=s?.[e]?.[o]||a,c=i.useMemo(()=>l,Object.values(l));return(0,n.jsx)(d.Provider,{value:c,children:r})};return l.displayName=t+"Provider",[l,function(s,n){let l=n?.[e]?.[o]||a,d=i.useContext(l);if(d)return d;if(void 0!==r)return r;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:s,scopeName:r})=>{let n=s(e)[`__scope${r}`];return{...t,...n}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}(r,...t)]}(v),[C,k]=N(v),O=e=>{let{__scopeDialog:t,children:s,open:r,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,u=i.useRef(null),m=i.useRef(null),[p,h]=(0,d.useControllableState)({prop:r,defaultProp:a??!1,onChange:o,caller:v});return(0,n.jsx)(C,{scope:t,triggerRef:u,contentRef:m,contentId:(0,l.useId)(),titleId:(0,l.useId)(),descriptionId:(0,l.useId)(),open:p,onOpenChange:h,onOpenToggle:i.useCallback(()=>h(e=>!e),[h]),modal:c,children:s})};O.displayName=v;var D="DialogTrigger",M=i.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=k(D,s),l=(0,o.useComposedRefs)(t,i.triggerRef);return(0,n.jsx)(g.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":G(i.open),...r,ref:l,onClick:(0,a.composeEventHandlers)(e.onClick,i.onOpenToggle)})});M.displayName=D;var R="DialogPortal",[T,E]=N(R,{forceMount:void 0}),_=e=>{let{__scopeDialog:t,forceMount:s,children:r,container:a}=e,o=k(R,t);return(0,n.jsx)(T,{scope:t,forceMount:s,children:i.Children.map(r,e=>(0,n.jsx)(p.Presence,{present:s||o.open,children:(0,n.jsx)(m.Portal,{asChild:!0,container:a,children:e})}))})};_.displayName=R;var A="DialogOverlay",P=i.forwardRef((e,t)=>{let s=E(A,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=k(A,e.__scopeDialog);return a.modal?(0,n.jsx)(p.Presence,{present:r||a.open,children:(0,n.jsx)(U,{...i,ref:t})}):null});P.displayName=A;var S=h("DialogOverlay.RemoveScroll"),U=i.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=k(A,s);return(0,n.jsx)(y.RemoveScroll,{as:S,allowPinchZoom:!0,shards:[i.contentRef],children:(0,n.jsx)(g.div,{"data-state":G(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),I="DialogContent",F=i.forwardRef((e,t)=>{let s=E(I,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=k(I,e.__scopeDialog);return(0,n.jsx)(p.Presence,{present:r||a.open,children:a.modal?(0,n.jsx)(L,{...i,ref:t}):(0,n.jsx)(B,{...i,ref:t})})});F.displayName=I;var L=i.forwardRef((e,t)=>{let s=k(I,e.__scopeDialog),r=i.useRef(null),l=(0,o.useComposedRefs)(t,s.contentRef,r);return i.useEffect(()=>{let e=r.current;if(e)return(0,j.hideOthers)(e)},[]),(0,n.jsx)($,{...e,ref:l,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:(0,a.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),B=i.forwardRef((e,t)=>{let s=k(I,e.__scopeDialog),r=i.useRef(!1),a=i.useRef(!1);return(0,n.jsx)($,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||s.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));let n=t.target;s.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),$=i.forwardRef((e,t)=>{let{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,...d}=e,m=k(I,s),p=i.useRef(null),h=(0,o.useComposedRefs)(t,p);return(0,b.useFocusGuards)(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:l,children:(0,n.jsx)(c.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":G(m.open),...d,ref:h,onDismiss:()=>m.onOpenChange(!1)})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J,{titleId:m.titleId}),(0,n.jsx)(Y,{contentRef:p,descriptionId:m.descriptionId})]})]})}),q="DialogTitle",K=i.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=k(q,s);return(0,n.jsx)(g.h2,{id:i.titleId,...r,ref:t})});K.displayName=q;var z="DialogDescription",H=i.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=k(z,s);return(0,n.jsx)(g.p,{id:i.descriptionId,...r,ref:t})});H.displayName=z;var Q="DialogClose",W=i.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=k(Q,s);return(0,n.jsx)(g.button,{type:"button",...r,ref:t,onClick:(0,a.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function G(e){return e?"open":"closed"}W.displayName=Q;var V="DialogTitleWarning",[X,Z]=(r={contentName:I,titleName:q,docsSlug:"dialog"},t=i.createContext(r),(s=e=>{let{children:s,...r}=e,a=i.useMemo(()=>r,Object.values(r));return(0,n.jsx)(t.Provider,{value:a,children:s})}).displayName=V+"Provider",[s,function(e){let s=i.useContext(t);if(s)return s;if(void 0!==r)return r;throw Error(`\`${e}\` must be used within \`${V}\``)}]),J=({titleId:e})=>{let t=Z(V),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},Y=({contentRef:e,descriptionId:t})=>{let s=Z("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return i.useEffect(()=>{let s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},ee=e.i(20612),ee=ee,et=e.i(20696);function es({...e}){return(0,n.jsx)(O,{"data-slot":"dialog",...e})}function er({...e}){return(0,n.jsx)(M,{"data-slot":"dialog-trigger",...e})}function en({...e}){return(0,n.jsx)(_,{"data-slot":"dialog-portal",...e})}function ei({className:e,...t}){return(0,n.jsx)(P,{"data-slot":"dialog-overlay",className:(0,et.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/70 backdrop-blur-xl",e),...t})}function ea({className:e,children:t,showCloseButton:s=!0,...r}){return(0,n.jsxs)(en,{"data-slot":"dialog-portal",children:[(0,n.jsx)(ei,{}),(0,n.jsxs)(F,{"data-slot":"dialog-content",className:(0,et.cn)("bg-card/90 backdrop-blur-2xl border border-border/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl p-6 shadow-[0_24px_80px_rgba(0,0,0,0.9)] duration-200 sm:max-w-lg",e),...r,children:[t,s&&(0,n.jsxs)(W,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,n.jsx)(ee.default,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function eo({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"dialog-header",className:(0,et.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function el({className:e,...t}){return(0,n.jsx)("div",{"data-slot":"dialog-footer",className:(0,et.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function ed({className:e,...t}){return(0,n.jsx)(K,{"data-slot":"dialog-title",className:(0,et.cn)("text-lg leading-none font-semibold",e),...t})}function ec({className:e,...t}){return(0,n.jsx)(H,{"data-slot":"dialog-description",className:(0,et.cn)("text-muted-foreground text-sm",e),...t})}e.s(["Dialog",()=>es,"DialogContent",()=>ea,"DialogDescription",()=>ec,"DialogFooter",()=>el,"DialogHeader",()=>eo,"DialogTitle",()=>ed,"DialogTrigger",()=>er],25244)},69370,e=>{"use strict";let t=(0,e.i(39898).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],69370)},79984,e=>{"use strict";let t=(0,e.i(39898).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],79984)},49329,e=>{"use strict";let t=(0,e.i(39898).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],49329)},62062,e=>{"use strict";let t=(0,e.i(39898).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],62062)},29032,e=>{"use strict";let t=(0,e.i(39898).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],29032)},23279,e=>{"use strict";var t=e.i(13105),s=e.i(95329),r=e.i(55744),n=e.i(96755),i=e.i(20401),a=e.i(42830),o=e.i(89473),l=e.i(41561);let d=(0,e.i(39898).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var c=e.i(79984),u=e.i(49329),m=e.i(62062),p=e.i(29032),h=e.i(69370),f=e.i(45951),x=e.i(79189),g=e.i(33212),b=e.i(55650),y=e.i(3604),j=e.i(94494),v=e.i(90582),N=e.i(77886),w=e.i(25244);function C(){let{user:e,isAdmin:C,loading:k}=(0,n.useAuth)(),O=(0,r.useRouter)(),D=(0,v.createClient)(),M=(0,j.useQueryClient)(),[R,T]=(0,s.useState)(""),[E,_]=(0,s.useState)(""),[A,P]=(0,s.useState)(1),[S,U]=(0,s.useState)(!1),[I,F]=(0,s.useState)(!1),[L,B]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=setTimeout(()=>{_(R),P(1)},500);return()=>clearTimeout(e)},[R]),(0,s.useEffect)(()=>{k||e&&C||O.push("/")},[e,C,k,O]);let{data:$,isLoading:q}=(0,b.useQuery)({queryKey:["admin-stats"],queryFn:async()=>{let{data:e,error:t}=await D.rpc("get_admin_dashboard_stats");if(t)throw t;return{totalUsers:e?.totalUsers||0,totalQuestions:e?.totalQuestions||0,totalAttempts:e?.totalAttempts||0,passedAttempts:e?.passedAttempts||0,failedAttempts:e?.failedAttempts||0,categoryCounts:e?.categoryCounts||{},questionsPerTest:e?.questionsPerTest||{},scenarioCategoryCounts:e?.scenarioCategoryCounts||{},scenarioLevelCounts:e?.scenarioLevelCounts||{},materialsByChapter:e?.materialsByChapter||{}}}}),{data:K,isLoading:z}=(0,b.useQuery)({queryKey:["admin-users",E,A],queryFn:async()=>{let{data:e,error:t}=await D.rpc("get_users_with_stats",{page_number:A,page_size:20,search_term:E||null,role_filter:"all",premium_filter:"all"});if(t)throw t;return{users:e?.users||[],total:e?.total||0}},staleTime:3e4,gcTime:3e5}),H=(0,y.useMutation)({mutationFn:async e=>{let{error:t}=await D.from("user_profiles").delete().eq("id",e);if(t)throw t},onSuccess:()=>{N.toast.success("User deleted successfully"),M.invalidateQueries({queryKey:["admin-users"]}),M.invalidateQueries({queryKey:["admin-stats"]}),U(!1),B(null)},onError:e=>{let t=e instanceof Error?e.message:"Unknown error";N.toast.error(`Failed to delete user: ${t}`)}}),Q=(0,y.useMutation)({mutationFn:async({userId:e,isBlocked:t})=>{let{error:s}=await D.from("user_profiles").update({is_blocked:t}).eq("id",e);if(s)throw s},onSuccess:()=>{N.toast.success("User status updated"),M.invalidateQueries({queryKey:["admin-users"]}),F(!1),B(null)},onError:e=>{let t=e instanceof Error?e.message:"Unknown error";N.toast.error(`Failed to update user: ${t}`)}});return(K&&K.total,k||q)?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading statistics..."})]})}):e&&C?(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-6 py-8 max-w-7xl pt-28",children:[(0,t.jsx)(o.Button,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,t.jsxs)(g.default,{href:"/admin",children:[(0,t.jsx)(f.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Admin Dashboard"]})}),(0,t.jsxs)("div",{className:"mb-8 space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Statistics & User Management"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"System overview, metrics, and user administration"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Need to adjust plans?"," ",(0,t.jsx)(g.default,{href:"/admin/subscriptions",className:"underline underline-offset-2",children:"Open subscriptions admin"}),"."]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(d,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)(p.TrendingUp,{className:"w-5 h-5 text-primary"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-1",children:$?.totalUsers||0}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Users"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(c.FileText,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)(h.BarChart3,{className:"w-5 h-5 text-primary"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-1",children:$?.totalQuestions||0}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Questions"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(h.BarChart3,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)(p.TrendingUp,{className:"w-5 h-5 text-primary"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-1",children:$?.totalAttempts||0}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Test Attempts"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-green-500/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(u.CheckCircle,{className:"w-6 h-6 text-green-500"})})}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-1 text-green-500",children:$?.passedAttempts||0}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Passed Tests"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-red-500/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(m.XCircle,{className:"w-6 h-6 text-red-500"})})}),(0,t.jsx)("p",{className:"text-3xl font-bold mb-1 text-red-500",children:$?.failedAttempts||0}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed Tests"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,t.jsxs)(a.GlassCard,{className:"h-full flex flex-col justify-between p-6 border border-border/80 bg-black/80",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:(0,t.jsx)(p.TrendingUp,{className:"w-6 h-6 text-primary"})})}),(0,t.jsxs)("p",{className:"text-3xl font-bold mb-1",children:[$?.totalAttempts?Math.round($.passedAttempts/$.totalAttempts*100):0,"%"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pass Rate"})]})})]}),(0,t.jsxs)(a.GlassCard,{className:"p-6 border border-border/80 bg-black/90",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Questions by Category"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries($?.categoryCounts||{}).map(([e,s])=>(0,t.jsxs)("div",{className:"text-center p-4 rounded-xl bg-black/80 border border-border/80",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-primary mb-1",children:s}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Category ",e]})]},e))})]}),(0,t.jsx)(a.GlassCard,{className:"p-6 mt-8 border border-border/80 bg-black/80",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Theory Test Coverage"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Questions per category/test. Cells with low counts help you see where more questions are needed."}),(0,t.jsxs)("div",{className:"space-y-1 text-xs",children:[Object.entries($?.questionsPerTest||{}).sort(([e],[t])=>e.localeCompare(t)).map(([e,s])=>{let[r,n]=e.split("-"),i=s<20;return(0,t.jsxs)("div",{className:`flex items-center justify-between px-2 py-1 rounded ${i?"bg-amber-500/15 border border-amber-500/50":"bg-black/60 border border-border/70"}`,children:[(0,t.jsxs)("span",{className:"font-medium",children:["Cat ",r," Â· Test ",n]}),(0,t.jsxs)("span",{className:i?"text-amber-600 font-semibold":"text-muted-foreground",children:[s," questions"]})]},e)}),0===Object.keys($?.questionsPerTest||{}).length&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"No theory questions found."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Decision Trainer Coverage"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Scenarios by category and level to spot gaps in practical training content."}),(0,t.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"By Category"}),(0,t.jsxs)("div",{className:"space-y-1",children:[Object.entries($?.scenarioCategoryCounts||{}).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 py-1 rounded bg-black/60 border border-border/70",children:[(0,t.jsxs)("span",{className:"font-medium",children:["Category ",e]}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s," scenarios"]})]},e)),0===Object.keys($?.scenarioCategoryCounts||{}).length&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"No Decision Trainer scenarios found."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"By Level"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.entries($?.scenarioLevelCounts||{}).map(([e,s])=>(0,t.jsxs)("div",{className:"px-2 py-1 rounded-full bg-black/60 border border-border/70",children:[(0,t.jsxs)("span",{className:"font-medium mr-1",children:["L",e]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:s})]},e)),0===Object.keys($?.scenarioLevelCounts||{}).length&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"No scenarios by level yet."})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Study Materials Coverage"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Materials per chapter and publication status. Chapters with no or few materials are highlighted."}),(0,t.jsx)("div",{className:"space-y-1 text-xs",children:Array.from({length:13}).map((e,s)=>{let r=s+1,n=($?.materialsByChapter||{})[r]||{total:0,published:0},i=0===n.total;return(0,t.jsxs)("div",{className:`flex items-center justify-between px-2 py-1 rounded ${i?"bg-red-500/15 border border-red-500/50":"bg-black/60 border border-border/70"}`,children:[(0,t.jsxs)("span",{className:"font-medium",children:["Chapter ",r]}),(0,t.jsxs)("span",{className:i?"text-red-600 font-semibold":"text-muted-foreground",children:[n.published,"/",n.total," published"]})]},r)})})]})]})})]}),(0,t.jsx)(w.Dialog,{open:S,onOpenChange:U,children:(0,t.jsxs)(w.DialogContent,{children:[(0,t.jsxs)(w.DialogHeader,{children:[(0,t.jsxs)(w.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(x.AlertTriangle,{className:"w-5 h-5"}),"Delete User Account"]}),(0,t.jsxs)(w.DialogDescription,{children:["Are you sure you want to delete ",(0,t.jsx)("strong",{children:L?.email}),"? This action cannot be undone. All their test history will be permanently deleted."]})]}),(0,t.jsxs)(w.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,t.jsx)(o.Button,{variant:"destructive",onClick:()=>{L&&H.mutate(L.id)},disabled:H.isPending,children:H.isPending?"Deleting...":"Delete User"})]})]})}),(0,t.jsx)(w.Dialog,{open:I,onOpenChange:F,children:(0,t.jsxs)(w.DialogContent,{children:[(0,t.jsxs)(w.DialogHeader,{children:[(0,t.jsxs)(w.DialogTitle,{children:[L?.is_blocked?"Unblock":"Block"," User"]}),(0,t.jsx)(w.DialogDescription,{children:L?.is_blocked?`Are you sure you want to unblock ${L?.email}? They will regain access to their account.`:`Are you sure you want to block ${L?.email}? They will not be able to access their account.`})]}),(0,t.jsxs)(w.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:()=>{L&&Q.mutate({userId:L.id,isBlocked:!L.is_blocked})},disabled:Q.isPending,children:Q.isPending?"Updating...":L?.is_blocked?"Unblock User":"Block User"})]})]})})]}):null}e.s(["default",()=>C],23279)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3604,e=>{"use strict";var t=e.i(95329),r=e.i(33133),a=e.i(50863),s=e.i(8181),i=e.i(921),l=class extends s.Subscribable{#e;#t=void 0;#r;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(e,t){return this.#a=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#s(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){a.notifyManager.batch(()=>{if(this.#a&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#a.onSuccess?.(e.data,t,r,a),this.#a.onSettled?.(e.data,null,t,r,a)):e?.type==="error"&&(this.#a.onError?.(e.error,t,r,a),this.#a.onSettled?.(void 0,e.error,t,r,a))}this.listeners.forEach(e=>{e(this.#t)})})}},n=e.i(94494);function o(e,r){let s=(0,n.useQueryClient)(r),[o]=t.useState(()=>new l(s,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let d=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(a.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=t.useCallback((e,t)=>{o.mutate(e,t).catch(i.noop)},[o]);if(d.error&&(0,i.shouldThrowError)(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}e.s(["useMutation",()=>o],3604)},67358,e=>{"use strict";var t=e.i(13105),r=e.i(95329),a=e.i(20696);let s=r.forwardRef(({className:e,type:r,...s},i)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-xl border border-input/70 bg-background/60 px-3.5 py-2 text-sm text-foreground shadow-[0_8px_24px_rgba(0,0,0,0.7)] backdrop-blur-xl","transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/80 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));s.displayName="Input",e.s(["Input",()=>s])},94312,e=>{"use strict";var t=e.i(13105),r=e.i(20696);function a({className:e,...a}){return(0,t.jsx)("div",{className:(0,r.cn)("relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]",e),...a})}e.s(["Skeleton",()=>a])},89679,e=>{"use strict";var t=e.i(50351);let r={freeTestLimitPerCategory:Number(t.default.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY??"3"),paidTestLimitPerCategory:Number(t.default.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY??"9999"),billingCycleDays:Number(t.default.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS??"30"),bestValuePlan:t.default.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN??"PLAN_C",plans:[{id:"PLAN_A",label:"1 month",months:1,priceEur:3},{id:"PLAN_B",label:"2 months",months:2,priceEur:6},{id:"PLAN_C",label:"3 months",months:3,priceEur:8,badge:"BEST_VALUE",emphasize:!0}].reduce((e,t)=>{let r=t.priceEur/t.months;return e[t.id]={...t,pricePerMonthEur:r},e},{})};function a(e,t=new Date){if(!e)return!1;let r=new Date(e.startDate).getTime(),s=new Date(e.endDate).getTime(),i=t.getTime();return i>=r&&i<=s}function s(e){let{isAdmin:t,testsTakenThisCycle:s,activePlan:i,now:l}=e;if(t)return{canAccessTests:!0,canStartNewTest:!0,remainingFreeTests:void 0,canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};if(i&&a({startDate:i.startDate,endDate:i.endDate},l))return{canAccessTests:!0,canStartNewTest:s<r.paidTestLimitPerCategory,remainingFreeTests:Math.max(0,r.paidTestLimitPerCategory-s),canAccessDecisionTrainer:!0,canAccessStudyMaterial:!0,canReviewTestsInDetail:!0};let n=Math.max(0,r.freeTestLimitPerCategory-s);return{canAccessTests:!0,canStartNewTest:n>0,remainingFreeTests:n,canAccessDecisionTrainer:!1,canAccessStudyMaterial:!1,canReviewTestsInDetail:!1}}function i(e){let{attempts:t,category:a,now:s}=e,i=s??new Date,l=new Date(i);l.setDate(l.getDate()-r.billingCycleDays+1);let n=l.getTime(),o=i.getTime();return t.filter(e=>{if(e.category!==a)return!1;let t=new Date(e.completed_at).getTime();return t>=n&&t<=o}).length}e.s(["BILLING_CONFIG",0,r,"computeEntitlements",()=>s,"countTestsInCurrentCycle",()=>i,"isPlanCurrentlyActive",()=>a])},5642,e=>{"use strict";var t=e.i(55650),r=e.i(90582),a=e.i(89679);function s(e){return(0,t.useQuery)({queryKey:["user-plans",e],queryFn:async()=>{let t=(0,r.createClient)(),{data:a,error:s}=await t.from("user_plans").select("*").eq("user_id",e);if(s)throw s;return a||[]},enabled:!!e,staleTime:0,refetchOnMount:"always"})}function i(e,t){let r=s(e),i=new Date,l=!!t||(r.data||[]).some(e=>"active"===e.status&&(0,a.isPlanCurrentlyActive)({startDate:e.start_date,endDate:e.end_date},i));return{...r,hasAnyActivePlan:l}}function l(e,s,i){return(0,t.useQuery)({queryKey:["category-entitlements",e,s,i],queryFn:async()=>{let t=(0,r.createClient)(),[l,n]=await Promise.all([t.from("user_plans").select("*").eq("user_id",e).eq("category",s).order("end_date",{ascending:!1}).limit(1),t.from("test_attempts").select("category, completed_at").eq("user_id",e)]);if(l.error)throw l.error;if(n.error)throw n.error;let o=(l.data||[])[0],d=new Date,c=(0,a.countTestsInCurrentCycle)({attempts:(n.data||[]).map(e=>({category:e.category,completed_at:e.completed_at})),category:s,now:d}),u=o?{id:o.id,userId:o.user_id,category:o.category,planTier:o.plan_tier,startDate:o.start_date,endDate:o.end_date,isActive:"active"===o.status,createdAt:o.created_at}:null;return{entitlements:(0,a.computeEntitlements)({isAdmin:i,testsTakenThisCycle:c,activePlan:u?{planTier:u.planTier,startDate:u.startDate,endDate:u.endDate,isActive:u.isActive}:null,now:d}),plan:u,testsTakenThisCycle:c}},enabled:!!e&&!!s,staleTime:3e5})}e.s(["useCategoryEntitlements",()=>l,"useGlobalPremium",()=>i,"useUserPlans",()=>s])},77248,e=>{"use strict";let t=(0,e.i(39898).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],77248)},4108,e=>{"use strict";let t=(0,e.i(39898).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],4108)},68745,e=>{"use strict";var t=e.i(55650),r=e.i(3604),a=e.i(94494),s=e.i(90582);function i(e={}){let{search:r,chapterId:a,category:l,page:n=1,pageSize:o=50,includeUnpublished:d=!1,fields:c="*"}=e,u=(0,s.createClient)();return(0,t.useQuery)({queryKey:["materials",r,a,l,n,o,d,c],queryFn:async()=>{let e=(n-1)*o,t=u.from("study_materials").select(c,{count:"planned"}).order("order_index",{ascending:!0});if(a&&(t=t.eq("chapter_id",a)),l&&(t=t.eq("category",l)),d||(t=t.eq("is_published",!0)),r&&r.trim()){let e=r.trim();t=t.ilike("title",`%${e}%`)}let{data:s,error:i,count:m}=await t.range(e,e+o-1);if(i)throw i;let h=s||[];if("*"!==c)return{materials:h,total:m||0};let g=h.map(e=>e.id),x=[];if(g.length>0){let{data:e,error:t}=await u.from("material_images").select("*").in("material_id",g).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(t)throw t;x=e||[]}return{materials:h.map(e=>({...e,images:x.filter(t=>t.material_id===e.id)})),total:m||0}}})}function l(e){let r=(0,s.createClient)();return(0,t.useQuery)({queryKey:["material-by-chapter",e],queryFn:async()=>{if(void 0===e)return null;let{data:t,error:a}=await r.from("study_materials").select("*").eq("chapter_id",e).single();if(a)throw a;let{data:s,error:i}=await r.from("material_images").select("*").eq("material_id",t.id).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(i)throw i;return{...t,images:s||[]}},enabled:!!e,staleTime:3e5})}function n(e){let r=(0,s.createClient)();return(0,t.useQuery)({queryKey:["material",e],queryFn:async()=>{if(!e)return null;let{data:t,error:a}=await r.from("study_materials").select("*").eq("id",e).single();if(a)throw a;let{data:s,error:i}=await r.from("material_images").select("*").eq("material_id",e).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(i)throw i;return{...t,images:s||[]}},enabled:!!e})}function o(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async e=>{let{data:r,error:a}=await t.from("study_materials").insert([e]).select().single();if(a)throw Error(a.message||a.details||"Failed to create material");return r},onSuccess:()=>{e.invalidateQueries({queryKey:["materials"]})}})}function d(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async({id:e,...r})=>{let{data:a,error:s}=await t.from("study_materials").update(r).eq("id",e).select().single();if(s)throw Error(s.message||s.details||"Failed to update material");return a},onSuccess:t=>{e.invalidateQueries({queryKey:["materials"]}),e.invalidateQueries({queryKey:["material",t.id]})}})}function c(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async e=>{let{error:r}=await t.from("study_materials").delete().eq("id",e);if(r)throw Error(r.message||"Failed to delete material");return e},onSuccess:()=>{e.invalidateQueries({queryKey:["materials"]})}})}function u(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async e=>{let{data:r,error:a}=await t.from("material_images").insert([e]).select().single();if(a)throw Error(a.message||a.details||"Failed to create material image");return r},onSuccess:t=>{e.invalidateQueries({queryKey:["material",t.material_id]}),e.invalidateQueries({queryKey:["materials"]})}})}function m(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async e=>{let{data:r,error:a}=await t.from("material_images").delete().eq("id",e).select().single();if(a)throw Error(a.message||"Failed to delete material image");return r},onSuccess:t=>{t?.material_id&&e.invalidateQueries({queryKey:["material",t.material_id]}),e.invalidateQueries({queryKey:["materials"]})}})}function h(){let e=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async t=>{let r=t.name.split(".").pop()||"jpg",a=`${Date.now()}-${Math.random().toString(36).slice(2)}`,s=`materials/${a}.${r}`,{error:i}=await e.storage.from("material-images").upload(s,t,{cacheControl:"3600",upsert:!1});if(i)throw Error(i.message||"Failed to upload material image");let{data:{publicUrl:l}}=e.storage.from("material-images").getPublicUrl(s);return l}})}e.s(["useCreateMaterial",()=>o,"useCreateMaterialImage",()=>u,"useDeleteMaterial",()=>c,"useDeleteMaterialImage",()=>m,"useMaterial",()=>n,"useMaterialByChapterId",()=>l,"useMaterials",()=>i,"useUpdateMaterial",()=>d,"useUploadMaterialImage",()=>h])},24382,e=>{"use strict";var t=e.i(23901);e.s(["ChevronRight",()=>t.default])},52803,e=>{"use strict";let t=(0,e.i(39898).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],52803)},23901,e=>{"use strict";let t=(0,e.i(39898).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},82066,e=>{"use strict";let t=(0,e.i(39898).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],82066)},4513,e=>{"use strict";let t=(0,e.i(39898).default)("signpost",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M18 6a2 2 0 0 1 1.387.56l2.307 2.22a1 1 0 0 1 0 1.44l-2.307 2.22A2 2 0 0 1 18 13H6a2 2 0 0 1-1.387-.56l-2.306-2.22a1 1 0 0 1 0-1.44l2.306-2.22A2 2 0 0 1 6 6z",key:"gqqp9m"}]]);e.s(["Signpost",()=>t],4513)},55758,e=>{"use strict";var t=e.i(55650),r=e.i(3604),a=e.i(94494),s=e.i(90582);function i(e={}){let{category:r,search:a,page:l=1,pageSize:n=50}=e,o=(0,s.createClient)();return(0,t.useQuery)({queryKey:["traffic-signs",r,a,l,n],queryFn:async()=>{let e=o.from("traffic_signs").select("*",{count:"planned"}).order("code",{ascending:!0});r&&"all"!==r&&(e=e.eq("category",r)),a&&(e=e.or(`name.ilike.%${a}%,code.ilike.%${a}%`));let t=(l-1)*n,{data:s,error:i,count:d}=await e.range(t,t+n-1);if(i)throw i;return{signs:(s||[]).map(e=>{if(e.image_url&&!e.image_url.startsWith("http")){let{data:{publicUrl:t}}=o.storage.from("signs").getPublicUrl(e.image_url);return{...e,image_url:t}}return e}),total:d||0}}})}function l(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async({id:e,...r})=>{let{data:a,error:s}=await t.from("traffic_signs").update(r).eq("id",e).select().single();if(s)throw s;return a},onSuccess:()=>{e.invalidateQueries({queryKey:["traffic-signs"]})}})}function n(){let e=(0,a.useQueryClient)(),t=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async e=>{let{error:r}=await t.from("traffic_signs").delete().eq("id",e);if(r)throw r;return e},onSuccess:()=>{e.invalidateQueries({queryKey:["traffic-signs"]})}})}function o(){let e=(0,s.createClient)();return(0,r.useMutation)({mutationFn:async t=>{let r=t.name.split(".").pop()||"png",a=`${Date.now()}-${Math.random().toString(36).slice(2)}`,s=`signs/${a}.${r}`,{error:i}=await e.storage.from("signs").upload(s,t,{cacheControl:"3600",upsert:!1});if(i)throw i;let{data:{publicUrl:l}}=e.storage.from("signs").getPublicUrl(s);return l}})}e.s(["useDeleteTrafficSign",()=>n,"useTrafficSigns",()=>i,"useUpdateTrafficSign",()=>l,"useUploadSignImage",()=>o])},86013,e=>{"use strict";var t=e.i(13105),r=e.i(95329),a=e.i(55744),s=e.i(33212),i=e.i(20401),l=e.i(42830),n=e.i(67358),o=e.i(89473),d=e.i(41561),c=e.i(82066),u=e.i(52803),m=e.i(24382),h=e.i(77248),g=e.i(4108),x=e.i(4513),p=e.i(18797),f=e.i(68745),b=e.i(55758),y=e.i(94312),j=e.i(96755),v=e.i(5642),N=e.i(89679),w=e.i(77886);let _=["A","B","C","D"],k=[1,2,3,4,5,6,7,8,9,10,11,12,13,36,40];function C(){let{language:e,t:C}=(0,p.useLanguage)(),T="sq"===e,S=(0,a.useSearchParams)(),{user:M,isAdmin:q}=(0,j.useAuth)(),{data:A}=(0,v.useUserPlans)(M?.id),D=(0,r.useMemo)(()=>{if(q)return["A","B","C","D"];let e=new Date;return(A||[]).filter(t=>"active"===t.status&&(0,N.isPlanCurrentlyActive)({startDate:t.start_date,endDate:t.end_date},e)).map(e=>e.category)},[A,q]),[E,P]=(0,r.useState)(void 0),{data:L,isLoading:O,error:K}=(0,f.useMaterials)({pageSize:100,category:E,fields:"id,chapter_id,category,title,order_index,is_published"}),F=L?.materials??[],{hasAnyActivePlan:R,isLoading:B}=(0,v.useGlobalPremium)(M?.id,q),I=(0,r.useMemo)(()=>{let e=Array.from(new Set(F.map(e=>e.chapter_id))).sort((e,t)=>e-t);return e.length>0?e:k},[F]),[U,Q]=(0,r.useState)(()=>{let e=S.get("chapter"),t=I[0]??k[0];if(!e)return t;if("signs"===e)return"signs";let r=parseInt(e,10);return!Number.isNaN(r)&&I.includes(r)?r:t}),{data:$,isLoading:G}=(0,f.useMaterialByChapterId)("number"==typeof U?U:void 0),[z,V]=(0,r.useState)("all"),[Y,X]=(0,r.useState)(1),{data:H,isLoading:W}=(0,b.useTrafficSigns)({category:z,page:Y,pageSize:50});(0,r.useEffect)(()=>{X(1)},[z]);let[Z,J]=(0,r.useState)(()=>S.get("search")||S.get("q")||""),ee=(0,r.useMemo)(()=>$?$.content:null,[$]),et=(0,r.useMemo)(()=>{if(!Z.trim())return I;let e=Z.toLowerCase();return I.filter(t=>{let r=I.indexOf(t),a=`materials.section.${r+1}`,s=C(a);if(!s||s===a){let e=F.find(e=>e.chapter_id===t);s=e?.title||`Kapitulli ${t}`}return s.toLowerCase().includes(e)})},[I,Z,F,C]),er=e=>{if("string"==typeof e)return(0,t.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed mb-4",children:e});if(Array.isArray(e))return(0,t.jsx)("ul",{className:"list-disc pl-5 space-y-2 text-sm text-muted-foreground mb-4",children:e.map((e,r)=>(0,t.jsx)("li",{className:"pl-1",children:"string"==typeof e?e:String(e)},r))});if("object"==typeof e&&null!==e){let r=Object.entries(e);return(0,t.jsx)("div",{className:"space-y-6",children:r.map(([e,r])=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-base font-semibold text-foreground capitalize flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-1 w-1 rounded-full bg-orange-500"}),e.replace(/_/g," ")]}),er(r)]},e))})}return null},ea=ee||{},es=$?.images??[],ei=I.indexOf(U);I.length;let el=ei>=0?`materials.section.${ei+1}`:"",en=el?C(el):"";if(!en||en===el){let e=F.find(e=>e.chapter_id===U);en=e?.title||`Kapitulli ${U}`}let eo=ea?.chapter,ed=Array.isArray(eo?.sections)?eo.sections:[];return O||B?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("div",{className:"pt-32",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-10 max-w-6xl",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsxs)("aside",{className:"w-full lg:w-80 space-y-4",children:[(0,t.jsxs)(l.GlassCard,{className:"p-4 flex items-center gap-3",children:[(0,t.jsx)(y.Skeleton,{className:"w-10 h-10 rounded-xl"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(y.Skeleton,{className:"h-4 w-32"}),(0,t.jsx)(y.Skeleton,{className:"h-3 w-40"})]})]}),(0,t.jsx)(l.GlassCard,{className:"p-3",children:(0,t.jsx)(y.Skeleton,{className:"h-10 w-full rounded-lg"})}),(0,t.jsx)(l.GlassCard,{className:"p-2 space-y-2",children:Array.from({length:8}).map((e,r)=>(0,t.jsx)(y.Skeleton,{className:"h-10 w-full rounded-lg"},r))})]}),(0,t.jsx)("main",{className:"flex-1",children:(0,t.jsxs)(l.GlassCard,{className:"p-6 md:p-10",children:[(0,t.jsx)(y.Skeleton,{className:"h-8 w-64 mb-6"}),(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:6}).map((e,r)=>(0,t.jsx)(y.Skeleton,{className:"h-4 w-full"},r))})]})})]})})})]}):q||B||R&&0!==D.length?K?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("div",{className:"pt-32",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-10 max-w-3xl",children:(0,t.jsxs)(l.GlassCard,{className:"p-8 text-center border-red-500/30 bg-black/80",children:[(0,t.jsx)(h.AlertCircle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-red-400 mb-2",children:C("materials.errorLoadFailed")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground break-words",children:C("error.message")})]})})})]}):F.length?(0,t.jsxs)("div",{className:"relative min-h-screen bg-background text-foreground overflow-hidden",children:[(0,t.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]",children:(0,t.jsxs)("svg",{className:"h-full w-full opacity-[0.06]",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("defs",{children:(0,t.jsx)("pattern",{id:"materials-grid",width:"32",height:"32",patternUnits:"userSpaceOnUse",children:(0,t.jsx)("path",{d:"M32 0H0V32",fill:"none",stroke:"currentColor",strokeWidth:"0.4"})})}),(0,t.jsx)("rect",{width:"100%",height:"100%",fill:"url(#materials-grid)"})]})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl"}),(0,t.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[(0,t.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent"}),(0,t.jsx)("div",{className:"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent"})]}),(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("div",{className:"pt-32",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsxs)("aside",{className:"w-full lg:w-80 space-y-6",children:[(0,t.jsxs)(l.GlassCard,{className:"p-5 flex flex-col gap-4 border border-border/80 bg-black/75 sticky top-32",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center shadow-inner border border-orange-500/20",children:(0,t.jsx)(c.BookOpen,{className:"w-6 h-6 text-orange-400"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold tracking-tight",children:C("materials.title")}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground leading-tight",children:T?"Lexo teorinë për të mësuar":"Read theory to improve"})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-2 font-medium",children:T?"Zgjidh Kategorinë":"Select Category"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:_.map(e=>{let r=D.includes(e),a=E===e;return(0,t.jsxs)("button",{onClick:()=>{r?(P(e),Q(k[0])):w.toast.error(T?"Nuk keni qasje në këtë kategori":"No access to this category",{description:T?"Ju lutem blini një plan për të parë materialet.":"Please purchase a plan to view materials."})},className:`
                            relative h-10 rounded-lg text-sm font-bold transition-all flex items-center justify-center
                            ${a?"bg-orange-500 text-black shadow-[0_0_10px_rgba(249,115,22,0.4)]":r?"bg-white/10 text-foreground hover:bg-white/20 border border-white/10":"bg-black/40 text-muted-foreground/40 border border-white/5 cursor-not-allowed"}
                          `,children:[e,!r&&(0,t.jsx)(g.Lock,{className:"w-3 h-3 absolute top-1 right-1 opacity-50"})]},e)})})]})]}),(0,t.jsxs)("div",{className:"lg:sticky lg:top-[22rem] space-y-4",children:[(0,t.jsx)(l.GlassCard,{className:"p-3 border border-border/80 bg-black/75",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Search,{className:"w-4 h-4 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),(0,t.jsx)(n.Input,{placeholder:C("materials.searchPlaceholder"),className:"pl-9 bg-black/50 border-border/60 focus-visible:ring-1 focus-visible:ring-orange-500/50 h-10 text-sm",value:Z,onChange:e=>J(e.target.value)})]})}),(0,t.jsxs)(l.GlassCard,{className:"p-2 space-y-1 border border-border/80 bg-black/75 max-h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar",children:[(0,t.jsxs)(o.Button,{variant:"signs"===U?"default":"ghost",className:`w-full justify-start text-sm font-medium flex items-center gap-3 rounded-lg px-3 py-6 transition-all ${"signs"===U?"bg-orange-500/10 text-orange-200 border border-orange-500/30 shadow-[0_0_15px_rgba(249,115,22,0.1)]":"text-muted-foreground border border-transparent hover:bg-white/5 hover:text-foreground"}`,onClick:()=>{Q("signs"),J(""),window.scrollTo({top:0,behavior:"smooth"})},children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold flex-shrink-0 ${"signs"===U?"bg-orange-500 text-black":"bg-white/10 text-muted-foreground"}`,children:(0,t.jsx)(x.Signpost,{className:"w-3 h-3"})}),(0,t.jsx)("span",{className:"truncate text-left line-clamp-2 leading-tight",children:T?"Shenjat e Trafikut":"Traffic Signs"}),"signs"===U&&(0,t.jsx)(m.ChevronRight,{className:"w-4 h-4 ml-auto text-orange-400 flex-shrink-0"})]}),et.map(e=>{let r=e===U,a=I.indexOf(e),s=`materials.section.${a+1}`,i=C(s);if(!i||i===s){let t=F.find(t=>t.chapter_id===e);i=t?.title||`Kapitulli ${e}`}return(0,t.jsxs)(o.Button,{variant:r?"default":"ghost",className:`w-full justify-start text-sm font-medium flex items-center gap-3 rounded-lg px-3 py-6 transition-all ${r?"bg-orange-500/10 text-orange-200 border border-orange-500/30 shadow-[0_0_15px_rgba(249,115,22,0.1)]":"text-muted-foreground border border-transparent hover:bg-white/5 hover:text-foreground"}`,onClick:()=>{Q(e),J(""),window.scrollTo({top:0,behavior:"smooth"})},children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold flex-shrink-0 ${r?"bg-orange-500 text-black":"bg-white/10 text-muted-foreground"}`,children:e}),(0,t.jsx)("span",{className:"truncate text-left line-clamp-2 leading-tight",children:i}),r&&(0,t.jsx)(m.ChevronRight,{className:"w-4 h-4 ml-auto text-orange-400 flex-shrink-0"})]},e)})]})]})]}),(0,t.jsx)("main",{className:"flex-1 min-w-0",children:(0,t.jsxs)(l.GlassCard,{className:"p-6 md:p-10 border border-border/80 bg-black/85 min-h-[80vh]",children:["signs"===U?(0,t.jsxs)("div",{className:"flex flex-col gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"space-y-3 border-b border-border/40 pb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-orange-400",children:[(0,t.jsx)(x.Signpost,{className:"w-6 h-6"}),(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground",children:T?"Shenjat e Trafikut":"Traffic Signs"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-2xl leading-relaxed",children:T?"Mësoni të gjitha shenjat e trafikut të ndara sipas kategorive. Njohja e tyre është thelbësore për sigurinë në rrugë.":"Learn all traffic signs divided by categories. Knowing them is essential for road safety."})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 pb-4",children:["all","danger","prohibition","mandatory","info"].map(e=>(0,t.jsxs)("button",{onClick:()=>V(e),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${z===e?"bg-orange-500 text-black":"bg-white/5 text-muted-foreground hover:bg-white/10"}`,children:["all"===e&&(T?"Të gjitha":"All"),"danger"===e&&(T?"Rreziku":"Danger"),"prohibition"===e&&(T?"Ndalimi":"Prohibition"),"mandatory"===e&&(T?"Urdhëruese":"Mandatory"),"info"===e&&(T?"Lajmëruese":"Info")]},e))}),W?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((e,r)=>(0,t.jsx)(y.Skeleton,{className:"h-48 w-full rounded-xl"},r))}):(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:H?.signs.map(e=>(0,t.jsxs)("div",{className:"group flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden hover:border-orange-500/30 transition-all",children:[(0,t.jsx)("div",{className:"aspect-square p-4 bg-black/20 flex items-center justify-center relative",children:e.image_url&&(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-110"})}),(0,t.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm mb-1 line-clamp-2 group-hover:text-orange-400 transition-colors",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-3 leading-relaxed",children:e.description})]})]},e.id))}),H&&H.total>50&&(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-8 pt-4 border-t border-border/20",children:[(0,t.jsx)(o.Button,{variant:"outline",disabled:1===Y,onClick:()=>{X(e=>e-1),window.scrollTo({top:0,behavior:"smooth"})},className:"bg-black/40 border-white/10 hover:bg-white/10",children:T?"E mëparshmja":"Previous"}),(0,t.jsxs)("div",{className:"flex items-center px-4 text-sm text-muted-foreground bg-black/20 rounded-md border border-white/5",children:[T?"Faqja":"Page"," ",Y," / ",Math.ceil(H.total/50)]}),(0,t.jsx)(o.Button,{variant:"outline",disabled:Y>=Math.ceil(H.total/50),onClick:()=>{X(e=>e+1),window.scrollTo({top:0,behavior:"smooth"})},className:"bg-black/40 border-white/10 hover:bg-white/10",children:T?"E radhës":"Next"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col gap-6 mb-8 pb-8 border-b border-border/40",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[ei>=0&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-orange-500/30 bg-orange-500/10 px-3 py-1 text-[11px] font-medium text-orange-300",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-orange-400 animate-pulse"}),(0,t.jsxs)("span",{children:[T?"Kapitulli":"Chapter"," ",U]})]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["~5-10 ",T?"min lexim":"min read"]})]}),(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground",children:en}),Z?(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[C("materials.resultsForPrefix"),' "',Z,'" ',C("materials.resultsForSuffix")]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-2xl leading-relaxed",children:T?"Lexoni me kujdes materialin më poshtë. Kuptimi i këtyre koncepteve është thelbësor për të kaluar provimin.":"Read the material carefully. Understanding these concepts is key to passing your exam."})]})}),es.length>0&&(0,t.jsx)("div",{className:"grid gap-6 mb-10 md:grid-cols-2",children:es.map(e=>(0,t.jsxs)("figure",{className:"overflow-hidden rounded-xl border border-border/60 bg-black/40 shadow-lg group",children:[(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)("img",{src:e.image_url,alt:e.caption||en,loading:"lazy",className:"w-full h-56 object-cover transition-transform duration-500 group-hover:scale-105"})}),e.caption&&(0,t.jsx)("figcaption",{className:"px-4 py-3 text-xs text-muted-foreground bg-black/60 border-t border-border/40 backdrop-blur-sm",children:e.caption})]},e.id))}),(0,t.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-8",children:0===Object.keys(ea).length?(0,t.jsx)("div",{className:"py-12 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:C("materials.noResults")})}):eo&&ed.length>0?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[eo.title&&(0,t.jsx)("h2",{className:"text-2xl font-semibold tracking-tight text-foreground/90",children:eo.title}),eo.description&&(0,t.jsx)("p",{className:"text-base text-muted-foreground leading-7",children:eo.description})]}),(0,t.jsx)("div",{className:"space-y-8",children:ed.map((e,r)=>{let a=e.order??r,s=e.points,i=Array.isArray(s)?s:"string"==typeof s?[s]:[];return(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 space-y-4 hover:border-white/20 transition-colors",children:[e.title&&(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 text-foreground/90",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"}),e.title]}),i.length>0&&(0,t.jsx)("ul",{className:"space-y-3",children:i.map((e,r)=>(0,t.jsx)("li",{className:"text-sm leading-relaxed text-muted-foreground pl-4 border-l-2 border-white/10",children:"string"==typeof e?e:String(e)},r))})]},a)})})]}):Object.entries(ea).map(([e,r])=>(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold capitalize flex items-center gap-2 pb-2 border-b border-border/40 text-foreground/90",children:e.replace(/_/g," ")}),er(r)]},e))},U)]}),(0,t.jsx)("div",{className:"mt-12 pt-8 border-t border-border/40 flex justify-end",children:(0,t.jsx)(o.Button,{asChild:!0,className:"bg-orange-500 hover:bg-orange-600 text-black font-medium px-6",children:(0,t.jsx)(s.default,{href:"/dashboard",children:T?"Kthehu në Ballinë":"Back to Dashboard"})})})]})})]})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("div",{className:"pt-32",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-10 max-w-3xl",children:(0,t.jsx)(l.GlassCard,{className:"p-8 text-center bg-black/80",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.BookOpen,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),(0,t.jsx)("h1",{className:"text-xl font-bold mb-2",children:C("materials.emptyTitle")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:C("materials.emptySubtitle")})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.BookOpen,{className:"w-12 h-12 text-orange-400 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-xl font-bold mb-2",children:T?"Zgjidhni një kategori":"Select a category"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:T?"Përdorni butonat në të majtë për të zgjedhur materialet.":"Use the buttons on the left to select materials."})]})})})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl"}),(0,t.jsx)(i.Navbar,{}),(0,t.jsx)("div",{className:"pt-32",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-10 max-w-3xl",children:(0,t.jsxs)(l.GlassCard,{className:"p-8 md:p-10 border border-orange-500/30 bg-black/85 text-center relative overflow-hidden",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -top-24 -right-24 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-orange-500/10 flex items-center justify-center mb-6 border border-orange-500/20",children:(0,t.jsx)(g.Lock,{className:"w-8 h-8 text-orange-400"})}),(0,t.jsx)("h1",{className:"text-3xl font-semibold mb-3 tracking-tight",children:C("materials.premiumRequiredTitle")}),(0,t.jsx)("p",{className:"text-base text-muted-foreground mb-8 max-w-lg mx-auto leading-relaxed",children:C("materials.premiumRequiredDescription")}),(0,t.jsx)("div",{className:"grid gap-4 text-left max-w-md mx-auto mb-8 w-full",children:[C("materials.premiumBenefitAllChapters"),C("materials.premiumBenefitDeeper"),C("materials.premiumBenefitVisuals")].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsx)("div",{className:"mt-0.5 w-5 h-5 rounded-full bg-orange-500/20 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-400"})}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},r))}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-sm",children:[(0,t.jsx)(o.Button,{asChild:!0,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-black font-medium h-11",children:(0,t.jsx)(s.default,{href:"/pricing?category=B",children:C("materials.premiumUpgradeCta")})}),(0,t.jsx)(o.Button,{asChild:!0,variant:"outline",className:"flex-1 h-11 border-white/10 hover:bg-white/5",children:(0,t.jsx)(s.default,{href:"/dashboard",children:C("auth.backToHome")})})]})]})]})})})]})}e.s(["default",()=>C])}]);
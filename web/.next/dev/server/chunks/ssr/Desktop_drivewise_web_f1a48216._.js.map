{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { LogOut, Menu, X } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { toast } from 'sonner';\r\n\r\nexport function Navbar() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const { t } = useLanguage();\r\n  const { user, signOut, isAdmin, userProfile, loading: authLoading } = useAuth();\r\n  const pathname = usePathname();\r\n\r\n  // Get display name from userProfile or fallback to email\r\n  const displayName = userProfile?.full_name || user?.user_metadata?.full_name || user?.email?.split('@')[0] || t('admin.user');\r\n\r\n  // Handle scroll behavior\r\n  useEffect(() => {\r\n    let rafId: number;\r\n    const handleScroll = () => {\r\n      rafId = requestAnimationFrame(() => {\r\n        setScrolled(window.scrollY > 10);\r\n      });\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n      cancelAnimationFrame(rafId);\r\n    };\r\n  }, []);\r\n\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      setMobileMenuOpen(false);\r\n      await signOut();\r\n      toast.success(t('auth.logoutSuccess'));\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      toast.error(t('auth.logoutError'));\r\n    }\r\n  };\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const desktopLinkBase =\r\n    'text-sm font-semibold transition-all duration-200 relative group/nav-link';\r\n  const desktopLinkActive = 'text-primary';\r\n  const desktopLinkInactive = 'text-foreground/80 hover:text-foreground';\r\n\r\n  const renderDesktopLink = (href: string, label: string, active: boolean) => (\r\n    <Link\r\n      href={href}\r\n      className={`${desktopLinkBase} ${active ? desktopLinkActive : desktopLinkInactive}`}\r\n    >\r\n      {label}\r\n      <span\r\n        className={`absolute -bottom-1 left-0 h-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full transition-all duration-200 ${\r\n          active ? 'w-full' : 'w-0 group-hover/nav-link:w-full'\r\n        }`}\r\n      />\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <nav className={`fixed left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ${\r\n      scrolled ? 'top-0 w-full' : 'top-4 w-[90%]'\r\n    }`}>\r\n      <div className={`bg-card/95 backdrop-blur-xl border border-border/40 shadow-lg shadow-black/20 transition-all duration-300 ${\r\n        scrolled ? 'rounded-none border-t-0 border-x-0' : 'rounded-2xl'\r\n      }`}>\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex h-20 items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"flex items-center gap-3 group\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-primary/30 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-300\"></div>\r\n              <div className=\"relative w-12 h-12 rounded-2xl overflow-hidden shadow-xl shadow-primary/20 group-hover:shadow-primary/30 transition-all duration-300 group-hover:scale-105 border-2 border-primary/30 group-hover:border-primary/50\">\r\n                <Image \r\n                  src=\"/logo-white.png\" \r\n                  alt=\"DriveWise Logo\" \r\n                  width={48} \r\n                  height={48}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"text-2xl font-bold text-white tracking-tight\">\r\n                DriveWise\r\n              </span>\r\n              <span className=\"text-xs text-primary font-medium -mt-1\">{t('nav.subtitle')}</span>\r\n            </div>\r\n          </Link>\r\n\r\n          {/* Desktop Navigation */}\r\n          <div className=\"hidden md:flex items-center gap-8\">\r\n            {/* Home */}\r\n            {renderDesktopLink('/', t('nav.home'), isActive('/'))}\r\n\r\n            {/* Pricing page */}\r\n            {renderDesktopLink('/pricing', t('nav.pricing'), isActive('/pricing'))}\r\n\r\n            {/* Materials */}\r\n            {renderDesktopLink('/materials', t('nav.materials'), isActive('/materials'))}\r\n\r\n            {/* Decision Trainer (logged-in users) */}\r\n            {user &&\r\n              renderDesktopLink(\r\n                '/decision-trainer',\r\n                t('nav.decisionTrainer'),\r\n                pathname.startsWith('/decision-trainer'),\r\n              )}\r\n\r\n            {/* Tests (category index page) */}\r\n            {renderDesktopLink('/category', t('nav.tests'), pathname.startsWith('/category'))}\r\n\r\n            {/* Dashboard */}\r\n            {renderDesktopLink('/dashboard', t('nav.dashboard'), isActive('/dashboard'))}\r\n\r\n            {/* Account (logged-in users) */}\r\n            {user && renderDesktopLink('/profile', t('nav.account'), isActive('/profile'))}\r\n\r\n            {/* Admin (admins only) */}\r\n            {user &&\r\n              isAdmin &&\r\n              renderDesktopLink(\r\n                '/admin',\r\n                t('nav.admin'),\r\n                isActive('/admin') || pathname.startsWith('/admin'),\r\n              )}\r\n          </div>\r\n\r\n          {/* Desktop Auth Buttons */}\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            {authLoading ? (\r\n              <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/5 border border-primary/10\">\r\n                <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n              </div>\r\n            ) : user ? (\r\n              <>\r\n                <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button variant=\"ghost\" size=\"sm\" asChild className=\"hover:bg-primary/10 hover:text-primary\">\r\n                  <Link href=\"/login\">{t('nav.login')}</Link>\r\n                </Button>\r\n                <Button size=\"sm\" asChild className=\"shadow-lg shadow-primary/30 hover:shadow-primary/40 transition-all duration-300 font-semibold\">\r\n                  <Link href=\"/register\">{t('nav.getStarted')}</Link>\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            className=\"md:hidden p-2 hover:bg-primary/10 rounded-lg transition-all duration-200 border border-border/50 hover:border-primary/30\"\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            {mobileMenuOpen ? (\r\n              <X className=\"w-5 h-5 text-primary\" />\r\n            ) : (\r\n              <Menu className=\"w-5 h-5 text-foreground\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {mobileMenuOpen && (\r\n          <div className=\"md:hidden py-6 border-t border-border/40 bg-card/50 backdrop-blur-xl animate-in slide-in-from-top-2\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              {user && (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 mb-2 rounded-xl bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n              )}\r\n              {/* Home */}\r\n              <Link\r\n                href=\"/\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.home')}\r\n              </Link>\r\n\r\n              {/* Pricing */}\r\n              <Link\r\n                href=\"/pricing\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/pricing')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.pricing')}\r\n              </Link>\r\n\r\n              {/* Materials */}\r\n              <Link\r\n                href=\"/materials\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/materials') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.materials')}\r\n              </Link>\r\n\r\n              {/* Decision Trainer (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/decision-trainer\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    pathname.startsWith('/decision-trainer')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.decisionTrainer')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Tests (category index page) */}\r\n              <Link\r\n                href=\"/category\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  pathname.startsWith('/category')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.tests')}\r\n              </Link>\r\n\r\n              {/* Dashboard */}\r\n              <Link\r\n                href=\"/dashboard\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/dashboard') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.dashboard')}\r\n              </Link>\r\n\r\n              {/* Account (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/profile\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    isActive('/profile')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.account')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Admin (admins only) */}\r\n              {user &&\r\n                isAdmin && (\r\n                  <Link\r\n                    href=\"/admin\"\r\n                    className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                      isActive('/admin') || pathname.startsWith('/admin')\r\n                        ? 'bg-primary/10 text-primary border border-primary/20'\r\n                        : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                    }`}\r\n                    onClick={() => setMobileMenuOpen(false)}\r\n                  >\r\n                    {t('nav.admin')}\r\n                  </Link>\r\n                )}\r\n              \r\n              <div className=\"h-px bg-border/40 my-3\"></div>\r\n              {authLoading ? (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/5 border border-primary/10\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n                </div>\r\n              ) : user ? (\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"w-full justify-start border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button variant=\"ghost\" size=\"sm\" asChild className=\"w-full justify-start hover:bg-primary/10 hover:text-primary\">\r\n                    <Link href=\"/login\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.login')}\r\n                    </Link>\r\n                  </Button>\r\n                  <Button size=\"sm\" asChild className=\"w-full justify-start shadow-lg shadow-primary/30\">\r\n                    <Link href=\"/register\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.getStarted')}\r\n                    </Link>\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/glass-card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode\r\n  hover?: boolean\r\n}\r\n\r\nexport function GlassCard({ children, className, hover = false, ...props }: GlassCardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl\",\r\n        \"shadow-[0_22px_70px_rgba(0,0,0,0.9)]\",\r\n        \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70\",\r\n        hover && \"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,GAAG,OAAuB;IACxF,qBACE,sQAAC;QACC,WAAW,IAAA,iJAAE,EACX,6FACA,wCACA,6OACA,SAAS,wEACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-[11px] font-semibold tracking-tight transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-ring/70 focus:ring-offset-2 focus:ring-offset-background\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary/90 text-primary-foreground hover:bg-primary\",\r\n        secondary:\r\n          \"border-transparent bg-secondary/80 text-secondary-foreground hover:bg-secondary\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"border-border/70 text-foreground/80 bg-background/40\",\r\n        success:\r\n          \"border-transparent bg-green-500 text-white hover:bg-green-500/80\",\r\n        warning:\r\n          \"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80\",\r\n        info:\r\n          \"border-transparent bg-blue-500 text-white hover:bg-blue-500/80\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,+LAAG,EACvB,uOACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;YACF,MACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,sQAAC;QAAI,WAAW,IAAA,iJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/80 text-card-foreground backdrop-blur-2xl shadow-[0_18px_60px_rgba(0,0,0,0.85)]\",\n      \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.06),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.04),transparent_55%)] before:opacity-70\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,2OAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EACX,wJACA,6OACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2OAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2OAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2OAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2OAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QAAI,KAAK;QAAK,WAAW,IAAA,iJAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2OAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,sQAAC;QACC,KAAK;QACL,WAAW,IAAA,iJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/types/database.ts"],"sourcesContent":["// Database types for DriveWise\r\n\r\nexport type LicenseCategory = 'A' | 'B' | 'C' | 'D';\r\nexport type LanguageCode = 'sq';\r\n\r\nexport interface Question {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  question_text: string;\r\n  option_a: string;\r\n  option_b: string;\r\n  option_c: string;\r\n  correct_answer: 'A' | 'B' | 'C';\r\n  image_url?: string;\r\n  topic?: string;\r\n  difficulty?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestSet {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  name?: string;\r\n  is_random: boolean;\r\n  question_count: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email?: string;\r\n  full_name?: string;\r\n  phone?: string;\r\n  date_of_birth?: string;\r\n  address?: string;\r\n  is_admin: boolean;\r\n  is_blocked: boolean;\r\n  app_rating?: number;\r\n  avatar_url?: string;\r\n  subscription_id?: string | null;\r\n  is_premium?: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  time_taken_seconds?: number;\r\n  is_assigned: boolean;\r\n  assigned_by?: string;\r\n  started_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TestAttemptAnswer {\r\n  id: string;\r\n  test_attempt_id: string;\r\n  question_id: string;\r\n  selected_answer: string;\r\n  is_correct: boolean;\r\n  answered_at: string;\r\n}\r\n\r\nexport interface StudyMaterial {\r\n  id: string;\r\n  chapter_id: number;\r\n  category?: LicenseCategory;\r\n  title: string;\r\n  content: Record<string, unknown>;\r\n  order_index: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface MaterialImage {\r\n  id: string;\r\n  material_id: string;\r\n  image_url: string;\r\n  caption?: string;\r\n  order_index?: number;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TrafficSign {\r\n  id: string;\r\n  code: string;\r\n  category: string;\r\n  name: string;\r\n  description: string;\r\n  image_url?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Category metadata\r\nexport const CATEGORY_INFO: Record<LicenseCategory, { name: string; description: string }> = {\r\n  A: { name: 'Kategoria A', description: 'Motoçikleta' },\r\n  B: { name: 'Kategoria B', description: 'Vetura' },\r\n  C: { name: 'Kategoria C', description: 'Kamionë' },\r\n  D: { name: 'Kategoria D', description: 'Autobusë' },\r\n};\r\n\r\nexport interface UserPlan {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Order {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PaymentTransaction {\r\n  id: string;\r\n  order_id: string;\r\n  provider: string;\r\n  provider_status: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  raw_payload: any;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Language metadata\r\nexport const LANGUAGE_INFO: Record<LanguageCode, { name: string; nativeName: string }> = {\r\n  sq: { name: 'Albanian', nativeName: 'Shqip' },\r\n};\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;AA0GxB,MAAM,gBAAgF;IAC3F,GAAG;QAAE,MAAM;QAAe,aAAa;IAAc;IACrD,GAAG;QAAE,MAAM;QAAe,aAAa;IAAS;IAChD,GAAG;QAAE,MAAM;QAAe,aAAa;IAAU;IACjD,GAAG;QAAE,MAAM;QAAe,aAAa;IAAW;AACpD;AAuCO,MAAM,gBAA4E;IACvF,IAAI;QAAE,MAAM;QAAY,YAAY;IAAQ;AAC9C","debugId":null}},
    {"offset": {"line": 743, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/lib/subscriptions.ts"],"sourcesContent":["import type { LicenseCategory } from '@/types/database';\r\n\r\n// Plan identifiers\r\nexport type PlanTier = 'FREE' | 'PLAN_A' | 'PLAN_B' | 'PLAN_C';\r\n\r\nexport type PaidPlanTier = Exclude<PlanTier, 'FREE'>;\r\n\r\nexport interface PlanDefinition {\r\n  id: PaidPlanTier;\r\n  label: string;\r\n  months: number;\r\n  priceEur: number;\r\n  // derived convenience fields\r\n  pricePerMonthEur: number;\r\n  badge?: 'MOST_POPULAR' | 'BEST_VALUE';\r\n  emphasize?: boolean;\r\n}\r\n\r\nexport interface BillingConfig {\r\n  freeTestLimitPerCategory: number;\r\n  paidTestLimitPerCategory: number;\r\n  billingCycleDays: number;\r\n  bestValuePlan: PaidPlanTier;\r\n  plans: Record<PaidPlanTier, PlanDefinition>;\r\n}\r\n\r\n// Centralized billing / pricing configuration.\r\n// Values can be overridden via NEXT_PUBLIC_* env vars without changing code.\r\nconst freeLimit = Number(process.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY ?? '3');\r\nconst paidLimit = Number(process.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY ?? '9999');\r\nconst cycleDays = Number(process.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS ?? '30');\r\nconst bestValueEnv = process.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN as PaidPlanTier | undefined;\r\n\r\nconst rawPlans: Omit<PlanDefinition, 'pricePerMonthEur'>[] = [\r\n  {\r\n    id: 'PLAN_A',\r\n    label: '1 month',\r\n    months: 1,\r\n    priceEur: 3,\r\n  },\r\n  {\r\n    id: 'PLAN_B',\r\n    label: '2 months',\r\n    months: 2,\r\n    priceEur: 6,\r\n  },\r\n  {\r\n    id: 'PLAN_C',\r\n    label: '3 months',\r\n    months: 3,\r\n    priceEur: 8,\r\n    badge: 'BEST_VALUE',\r\n    emphasize: true,\r\n  },\r\n];\r\n\r\nconst plansRecord = rawPlans.reduce<Record<PaidPlanTier, PlanDefinition>>((acc, plan) => {\r\n  const pricePerMonthEur = plan.priceEur / plan.months;\r\n  acc[plan.id] = { ...plan, pricePerMonthEur };\r\n  return acc;\r\n}, {} as Record<PaidPlanTier, PlanDefinition>);\r\n\r\nexport const BILLING_CONFIG: BillingConfig = {\r\n  freeTestLimitPerCategory: freeLimit,\r\n  paidTestLimitPerCategory: paidLimit,\r\n  billingCycleDays: cycleDays,\r\n  bestValuePlan: bestValueEnv ?? 'PLAN_C',\r\n  plans: plansRecord,\r\n};\r\n\r\nexport interface CategoryPlan {\r\n  id: string;\r\n  userId: string;\r\n  category: LicenseCategory;\r\n  planTier: PaidPlanTier;\r\n  startDate: string; // ISO\r\n  endDate: string;   // ISO\r\n  isActive: boolean;\r\n  createdAt: string; // ISO\r\n}\r\n\r\nexport interface Entitlements {\r\n  canAccessTests: boolean;\r\n  canStartNewTest: boolean;\r\n  remainingFreeTests?: number;\r\n  canAccessDecisionTrainer: boolean;\r\n  canAccessStudyMaterial: boolean;\r\n  canReviewTestsInDetail: boolean;\r\n}\r\n\r\nexport interface EntitlementInput {\r\n  isAdmin: boolean;\r\n  testsTakenThisCycle: number;\r\n  activePlan?: Pick<CategoryPlan, 'planTier' | 'startDate' | 'endDate' | 'isActive'> | null;\r\n  now?: Date;\r\n}\r\n\r\nexport function isPlanCurrentlyActive(plan?: { startDate: string; endDate: string } | null, now: Date = new Date()): boolean {\r\n  if (!plan) return false;\r\n  const start = new Date(plan.startDate).getTime();\r\n  const end = new Date(plan.endDate).getTime();\r\n  const ts = now.getTime();\r\n  return ts >= start && ts <= end;\r\n}\r\n\r\nexport function computeEntitlements(input: EntitlementInput): Entitlements {\r\n  const { isAdmin, testsTakenThisCycle, activePlan, now } = input;\r\n\r\n  if (isAdmin) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: true,\r\n      remainingFreeTests: undefined,\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const hasActivePaidPlan = !!activePlan && isPlanCurrentlyActive(\r\n    { startDate: activePlan.startDate, endDate: activePlan.endDate },\r\n    now,\r\n  );\r\n\r\n  if (hasActivePaidPlan) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: testsTakenThisCycle < BILLING_CONFIG.paidTestLimitPerCategory,\r\n      remainingFreeTests: Math.max(\r\n        0,\r\n        BILLING_CONFIG.paidTestLimitPerCategory - testsTakenThisCycle,\r\n      ),\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const remainingFree = Math.max(0, BILLING_CONFIG.freeTestLimitPerCategory - testsTakenThisCycle);\r\n\r\n  return {\r\n    canAccessTests: true,\r\n    canStartNewTest: remainingFree > 0,\r\n    remainingFreeTests: remainingFree,\r\n    canAccessDecisionTrainer: false,\r\n    canAccessStudyMaterial: false,\r\n    canReviewTestsInDetail: false,\r\n  };\r\n}\r\n\r\nexport interface CycleUsageInput {\r\n  attempts: { category: string; completed_at: string }[];\r\n  category: LicenseCategory;\r\n  now?: Date;\r\n}\r\n\r\nexport function countTestsInCurrentCycle(input: CycleUsageInput): number {\r\n  const { attempts, category, now } = input;\r\n  const current = now ?? new Date();\r\n  const cycleStart = new Date(current);\r\n  cycleStart.setDate(cycleStart.getDate() - BILLING_CONFIG.billingCycleDays + 1);\r\n  const startTs = cycleStart.getTime();\r\n  const endTs = current.getTime();\r\n\r\n  return attempts.filter((a) => {\r\n    if (a.category !== category) return false;\r\n    const ts = new Date(a.completed_at).getTime();\r\n    return ts >= startTs && ts <= endTs;\r\n  }).length;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AA0BA,+CAA+C;AAC/C,6EAA6E;AAC7E,MAAM,YAAY,OAAO,QAAQ,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,QAAQ,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,QAAQ,GAAG,CAAC,8BAA8B,IAAI;AACvE,MAAM,eAAe,QAAQ,GAAG,CAAC,mCAAmC;AAEpE,MAAM,WAAuD;IAC3D;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;QACV,OAAO;QACP,WAAW;IACb;CACD;AAED,MAAM,cAAc,SAAS,MAAM,CAAuC,CAAC,KAAK;IAC9E,MAAM,mBAAmB,KAAK,QAAQ,GAAG,KAAK,MAAM;IACpD,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG;QAAE,GAAG,IAAI;QAAE;IAAiB;IAC3C,OAAO;AACT,GAAG,CAAC;AAEG,MAAM,iBAAgC;IAC3C,0BAA0B;IAC1B,0BAA0B;IAC1B,kBAAkB;IAClB,eAAe,gBAAgB;IAC/B,OAAO;AACT;AA6BO,SAAS,sBAAsB,IAAoD,EAAE,MAAY,IAAI,MAAM;IAChH,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,QAAQ,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO;IAC9C,MAAM,MAAM,IAAI,KAAK,KAAK,OAAO,EAAE,OAAO;IAC1C,MAAM,KAAK,IAAI,OAAO;IACtB,OAAO,MAAM,SAAS,MAAM;AAC9B;AAEO,SAAS,oBAAoB,KAAuB;IACzD,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAE,UAAU,EAAE,GAAG,EAAE,GAAG;IAE1D,IAAI,SAAS;QACX,OAAO;YACL,gBAAgB;YAChB,iBAAiB;YACjB,oBAAoB;YACpB,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,oBAAoB,CAAC,CAAC,cAAc,sBACxC;QAAE,WAAW,WAAW,SAAS;QAAE,SAAS,WAAW,OAAO;IAAC,GAC/D;IAGF,IAAI,mBAAmB;QACrB,OAAO;YACL,gBAAgB;YAChB,iBAAiB,sBAAsB,eAAe,wBAAwB;YAC9E,oBAAoB,KAAK,GAAG,CAC1B,GACA,eAAe,wBAAwB,GAAG;YAE5C,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,eAAe,wBAAwB,GAAG;IAE5E,OAAO;QACL,gBAAgB;QAChB,iBAAiB,gBAAgB;QACjC,oBAAoB;QACpB,0BAA0B;QAC1B,wBAAwB;QACxB,wBAAwB;IAC1B;AACF;AAQO,SAAS,yBAAyB,KAAsB;IAC7D,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG;IACpC,MAAM,UAAU,OAAO,IAAI;IAC3B,MAAM,aAAa,IAAI,KAAK;IAC5B,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK,eAAe,gBAAgB,GAAG;IAC5E,MAAM,UAAU,WAAW,OAAO;IAClC,MAAM,QAAQ,QAAQ,OAAO;IAE7B,OAAO,SAAS,MAAM,CAAC,CAAC;QACtB,IAAI,EAAE,QAAQ,KAAK,UAAU,OAAO;QACpC,MAAM,KAAK,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO;QAC3C,OAAO,MAAM,WAAW,MAAM;IAChC,GAAG,MAAM;AACX","debugId":null}},
    {"offset": {"line": 856, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-subscriptions.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport type { LicenseCategory, UserPlan as DbUserPlan } from '@/types/database';\r\nimport {\r\n  computeEntitlements,\r\n  countTestsInCurrentCycle,\r\n  isPlanCurrentlyActive,\r\n  type CategoryPlan,\r\n  type Entitlements,\r\n  type PaidPlanTier,\r\n} from '@/lib/subscriptions';\r\n\r\ninterface CategoryEntitlementsResult {\r\n  entitlements: Entitlements;\r\n  plan: CategoryPlan | null;\r\n  testsTakenThisCycle: number;\r\n}\r\n\r\ninterface TestAttemptRowForEntitlements {\r\n  category: LicenseCategory;\r\n  completed_at: string;\r\n}\r\n\r\nexport function useUserPlans(userId?: string) {\r\n  return useQuery<DbUserPlan[]>({\r\n    queryKey: ['user-plans', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      const { data, error } = await supabase\r\n        .from('user_plans')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      return data || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\nexport function useGlobalPremium(userId?: string, isAdmin?: boolean) {\r\n  const query = useUserPlans(userId);\r\n\r\n  const now = new Date();\r\n  const hasAnyActivePlan =\r\n    !!isAdmin ||\r\n    (query.data || []).some((plan) =>\r\n      plan.status === 'active' &&\r\n      isPlanCurrentlyActive({ startDate: plan.start_date, endDate: plan.end_date }, now),\r\n    );\r\n\r\n  return {\r\n    ...query,\r\n    hasAnyActivePlan,\r\n  };\r\n}\r\n\r\nexport function useCategoryEntitlements(\r\n  userId: string | undefined,\r\n  category: LicenseCategory | undefined,\r\n  isAdmin: boolean,\r\n) {\r\n  return useQuery<CategoryEntitlementsResult>({\r\n    queryKey: ['category-entitlements', userId, category, isAdmin],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const [plansResult, attemptsResult] = await Promise.all([\r\n        supabase\r\n          .from('user_plans')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .eq('category', category!)\r\n          .order('end_date', { ascending: false })\r\n          .limit(1),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('category, completed_at')\r\n          .eq('user_id', userId!),\r\n      ]);\r\n\r\n      if (plansResult.error) {\r\n        throw plansResult.error;\r\n      }\r\n      if (attemptsResult.error) {\r\n        throw attemptsResult.error;\r\n      }\r\n\r\n      const planRow = (plansResult.data || [])[0] as DbUserPlan | undefined;\r\n\r\n      const now = new Date();\r\n\r\n      const testsTakenThisCycle = countTestsInCurrentCycle({\r\n        attempts: (attemptsResult.data || []).map((a: TestAttemptRowForEntitlements) => ({\r\n          category: a.category,\r\n          completed_at: a.completed_at,\r\n        })),\r\n        category: category!,\r\n        now,\r\n      });\r\n\r\n      const plan: CategoryPlan | null = planRow\r\n        ? {\r\n            id: planRow.id,\r\n            userId: planRow.user_id,\r\n            category: planRow.category,\r\n            planTier: planRow.plan_tier as PaidPlanTier,\r\n            startDate: planRow.start_date,\r\n            endDate: planRow.end_date,\r\n            isActive: planRow.status === 'active',\r\n            createdAt: planRow.created_at,\r\n          }\r\n        : null;\r\n\r\n      const entitlements = computeEntitlements({\r\n        isAdmin,\r\n        testsTakenThisCycle,\r\n        activePlan: plan\r\n          ? {\r\n              planTier: plan.planTier,\r\n              startDate: plan.startDate,\r\n              endDate: plan.endDate,\r\n              isActive: plan.isActive,\r\n            }\r\n          : null,\r\n        now,\r\n      });\r\n\r\n      return {\r\n        entitlements,\r\n        plan,\r\n        testsTakenThisCycle,\r\n      };\r\n    },\r\n    enabled: !!userId && !!category,\r\n    staleTime: 1000 * 60 * 5, // 5 minutes\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAEA;;;;AAoBO,SAAS,aAAa,MAAe;IAC1C,OAAO,IAAA,+MAAQ,EAAe;QAC5B,UAAU;YAAC;YAAc;SAAO;QAChC,SAAS;YACP,MAAM,WAAW,IAAA,0KAAY;YAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;YACjB,IAAI,OAAO;gBACT,MAAM;YACR;YACA,OAAO,QAAQ,EAAE;QACnB;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;AAEO,SAAS,iBAAiB,MAAe,EAAE,OAAiB;IACjE,MAAM,QAAQ,aAAa;IAE3B,MAAM,MAAM,IAAI;IAChB,MAAM,mBACJ,CAAC,CAAC,WACF,CAAC,MAAM,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC,OACvB,KAAK,MAAM,KAAK,YAChB,kLAAsB;YAAE,WAAW,KAAK,UAAU;YAAE,SAAS,KAAK,QAAQ;QAAC,GAAG;IAGlF,OAAO;QACL,GAAG,KAAK;QACR;IACF;AACF;AAEO,SAAS,wBACd,MAA0B,EAC1B,QAAqC,EACrC,OAAgB;IAEhB,OAAO,IAAA,+MAAQ,EAA6B;QAC1C,UAAU;YAAC;YAAyB;YAAQ;YAAU;SAAQ;QAC9D,SAAS;YACP,MAAM,WAAW,IAAA,0KAAY;YAE7B,MAAM,CAAC,aAAa,eAAe,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACtD,SACG,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,YAAY,UACf,KAAK,CAAC,YAAY;oBAAE,WAAW;gBAAM,GACrC,KAAK,CAAC;gBACT,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,0BACP,EAAE,CAAC,WAAW;aAClB;YAED,IAAI,YAAY,KAAK,EAAE;gBACrB,MAAM,YAAY,KAAK;YACzB;YACA,IAAI,eAAe,KAAK,EAAE;gBACxB,MAAM,eAAe,KAAK;YAC5B;YAEA,MAAM,UAAU,CAAC,YAAY,IAAI,IAAI,EAAE,CAAC,CAAC,EAAE;YAE3C,MAAM,MAAM,IAAI;YAEhB,MAAM,sBAAsB,IAAA,+KAAwB,EAAC;gBACnD,UAAU,CAAC,eAAe,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAqC,CAAC;wBAC/E,UAAU,EAAE,QAAQ;wBACpB,cAAc,EAAE,YAAY;oBAC9B,CAAC;gBACD,UAAU;gBACV;YACF;YAEA,MAAM,OAA4B,UAC9B;gBACE,IAAI,QAAQ,EAAE;gBACd,QAAQ,QAAQ,OAAO;gBACvB,UAAU,QAAQ,QAAQ;gBAC1B,UAAU,QAAQ,SAAS;gBAC3B,WAAW,QAAQ,UAAU;gBAC7B,SAAS,QAAQ,QAAQ;gBACzB,UAAU,QAAQ,MAAM,KAAK;gBAC7B,WAAW,QAAQ,UAAU;YAC/B,IACA;YAEJ,MAAM,eAAe,IAAA,0KAAmB,EAAC;gBACvC;gBACA;gBACA,YAAY,OACR;oBACE,UAAU,KAAK,QAAQ;oBACvB,WAAW,KAAK,SAAS;oBACzB,SAAS,KAAK,OAAO;oBACrB,UAAU,KAAK,QAAQ;gBACzB,IACA;gBACJ;YACF;YAEA,OAAO;gBACL;gBACA;gBACA;YACF;QACF;QACA,SAAS,CAAC,CAAC,UAAU,CAAC,CAAC;QACvB,WAAW,OAAO,KAAK;IACzB;AACF","debugId":null}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/app/%28pages%29/pricing/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport { Navbar } from '@/components/navbar';\r\nimport { GlassCard } from '@/components/ui/glass-card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Card, CardHeader, CardTitle, CardContent, CardFooter } from '@/components/ui/card';\r\nimport { Check, ArrowLeft, Crown, Sparkles, Info } from 'lucide-react';\r\nimport { CATEGORY_INFO, type LicenseCategory } from '@/types/database';\r\nimport { BILLING_CONFIG, isPlanCurrentlyActive, type PaidPlanTier } from '@/lib/subscriptions';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useUserPlans, useGlobalPremium } from '@/hooks/use-subscriptions';\r\nimport { toast } from 'sonner';\r\n\r\nconst LICENSE_CATEGORIES: LicenseCategory[] = ['A', 'B', 'C', 'D'];\r\n\r\n// Paddle Hosted Checkout URLs\r\nconst HSC_1M = (process.env.NEXT_PUBLIC_PADDLE_HSC_1M || '').trim();\r\nconst HSC_2M = (process.env.NEXT_PUBLIC_PADDLE_HSC_2M || '').trim();\r\nconst HSC_3M = (process.env.NEXT_PUBLIC_PADDLE_HSC_3M || '').trim();\r\n\r\nexport default function PricingPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const { user, isAdmin } = useAuth();\r\n  const { t, language } = useLanguage();\r\n  const isSq = language === 'sq';\r\n\r\n  const paymentStatus = searchParams.get('payment');\r\n\r\n  const initialCategory = useMemo<LicenseCategory | null>(() => {\r\n    const fromQuery = (searchParams.get('category') || '').toUpperCase();\r\n    if (LICENSE_CATEGORIES.includes(fromQuery as LicenseCategory)) {\r\n      return fromQuery as LicenseCategory;\r\n    }\r\n    return null;\r\n  }, [searchParams]);\r\n\r\n  const initialPlan = useMemo<PaidPlanTier | null>(() => {\r\n    const fromQuery = (searchParams.get('plan') || '').toUpperCase() as PaidPlanTier;\r\n    if (fromQuery && BILLING_CONFIG.plans[fromQuery]) {\r\n      return fromQuery;\r\n    }\r\n    return null;\r\n  }, [searchParams]);\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState<LicenseCategory | null>(initialCategory);\r\n  const [selectedPlan, setSelectedPlan] = useState<PaidPlanTier | null>(initialPlan);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  const { data: existingPlans } = useUserPlans(user?.id || undefined);\r\n  const { hasAnyActivePlan } = useGlobalPremium(user?.id, isAdmin);\r\n\r\n  const currentCategoryPlan = useMemo(() => {\r\n    if (!existingPlans || !selectedCategory) return null;\r\n    return existingPlans.find((p) => p.category === selectedCategory) || null;\r\n  }, [existingPlans, selectedCategory]);\r\n\r\n  const currentCategoryPlanActive = useMemo(() => {\r\n    if (!currentCategoryPlan) return false;\r\n    if (currentCategoryPlan.status !== 'active') return false;\r\n    return isPlanCurrentlyActive({\r\n      startDate: currentCategoryPlan.start_date,\r\n      endDate: currentCategoryPlan.end_date,\r\n    });\r\n  }, [currentCategoryPlan]);\r\n\r\n  const handleSelectCategory = (cat: LicenseCategory) => {\r\n    if (cat !== selectedCategory) {\r\n      setSelectedCategory(cat);\r\n      setSelectedPlan(null);\r\n    }\r\n  };\r\n\r\n  const handlePurchase = async () => {\r\n    if (!user) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    if (isAdmin) {\r\n      toast.info(\r\n        isSq\r\n          ? 'Administratorët tashmë kanë qasje të plotë në të gjitha veçoritë.'\r\n          : 'Admins already have full access to all features.',\r\n        {\r\n          description: isSq\r\n            ? 'Mund ta përdorni këtë faqe vetëm si pamje paraprake të çmimeve, pa pasur nevojë të paguani.'\r\n            : 'You can still use this page to preview pricing, but no payment is required.',\r\n        },\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!selectedCategory || !selectedPlan) {\r\n      return;\r\n    }\r\n\r\n    if (currentCategoryPlanActive) {\r\n      toast.info(\r\n        isSq\r\n          ? 'Tashmë keni një plan aktiv për këtë kategori.'\r\n          : 'You already have an active plan for this category.',\r\n        {\r\n          description: isSq\r\n            ? 'Mund të blini një plan të ri për këtë kategori pasi të skadojë plani aktual.'\r\n            : 'You can purchase a new plan for this category after the current one expires.',\r\n        },\r\n      );\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      let checkoutUrlStr = '';\r\n      if (selectedPlan === 'PLAN_A') {\r\n        checkoutUrlStr = HSC_1M;\r\n      } else if (selectedPlan === 'PLAN_B') {\r\n        checkoutUrlStr = HSC_2M;\r\n      } else if (selectedPlan === 'PLAN_C') {\r\n        checkoutUrlStr = HSC_3M;\r\n      }\r\n\r\n      if (!checkoutUrlStr) {\r\n        console.error('Missing checkout URL for plan:', selectedPlan);\r\n        toast.error(isSq ? 'Konfigurimi i gabuar.' : 'Configuration error (Missing URL).');\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n\r\n      let urlObj: URL;\r\n      try {\r\n        urlObj = new URL(checkoutUrlStr);\r\n      } catch (e) {\r\n        console.error('Invalid checkout URL format:', checkoutUrlStr, e);\r\n        toast.error(isSq ? 'URL e pavlefshme.' : 'Invalid checkout URL configuration.');\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n\r\n      if (user?.email) {\r\n        urlObj.searchParams.append('guest_email', user.email);\r\n      }\r\n\r\n      // Pass custom_data as a JSON string for Paddle Billing\r\n      const customData = {\r\n        category: selectedCategory,\r\n        plan: selectedPlan,\r\n        user_id: user.id,\r\n      };\r\n      // Use set() to avoid duplicates if custom_data already exists\r\n      urlObj.searchParams.set('custom_data', JSON.stringify(customData));\r\n      // Also set passthrough as a fallback for some Paddle integrations\r\n      urlObj.searchParams.set('passthrough', JSON.stringify(customData));\r\n\r\n      window.location.href = urlObj.toString();\r\n    } catch (error) {\r\n      console.error('Paddle redirect error:', error);\r\n      toast.error(isSq ? 'Diçka shkoi keq.' : 'Something went wrong.');\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const featureListFree = isSq\r\n    ? ['Deri në 3 teste për kategori', 'Rezultatet dhe historia bazë', 'Pa Decision Trainer', 'Pa Materiale Studimi']\r\n    : ['Up to 3 tests per category', 'Scores and basic history', 'No Decision Trainer', 'No Study Material'];\r\n\r\n  const featureListPaid = isSq\r\n    ? [\r\n        'Teste të pakufizuara në këtë kategori',\r\n        'Decision Trainer i hapur',\r\n        'Të gjitha Materialet e Studimit të hapura',\r\n        'Rishikim i plotë me përgjigje të sakta',\r\n      ]\r\n    : [\r\n        'Unlimited tests in this category',\r\n        'Decision Trainer unlocked',\r\n        'All Study Material unlocked',\r\n        'Full review with correct answers',\r\n      ];\r\n\r\n  const selectedPlanData = selectedPlan ? BILLING_CONFIG.plans[selectedPlan] : null;\r\n\r\n  const stepLabelCategory = isSq ? 'Zgjidh kategorinë' : 'Choose your category';\r\n  const stepLabelPlan = isSq ? 'Zgjidh planin' : 'Choose your exam window';\r\n  const stepLabelPay = isSq ? 'Konfirmo dhe paguaj' : 'Confirm & pay';\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen bg-background text-foreground overflow-hidden\">\r\n      {/* Background grid like landing hero */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]\"\r\n      >\r\n        <svg className=\"h-full w-full opacity-[0.06]\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <defs>\r\n            <pattern id=\"pricing-grid\" width=\"32\" height=\"32\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M32 0H0V32\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"0.4\" />\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#pricing-grid)\" />\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Warm glows & rails to match landing */}\r\n      <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/25 via-transparent to-transparent blur-3xl\" />\r\n      <div className=\"pointer-events-none absolute bottom-[-6rem] left-[8%] h-60 w-60 rounded-full bg-orange-400/20 blur-3xl\" />\r\n      <div className=\"pointer-events-none absolute bottom-[-8rem] right-[12%] h-72 w-72 rounded-full bg-orange-500/20 blur-3xl\" />\r\n\r\n      {/* Side and center rails */}\r\n      <div aria-hidden className=\"pointer-events-none absolute inset-0\">\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent\" />\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent\" />\r\n        <div className=\"hidden md:block absolute top-28 bottom-32 left-1/2 w-px -translate-x-1/2 bg-gradient-to-b from-orange-400/30 to-transparent\" />\r\n        <div className=\"hidden md:block absolute inset-x-[12%] top-64 h-px bg-gradient-to-r from-transparent via-orange-500/16 to-transparent\" />\r\n      </div>\r\n\r\n      <Navbar />\r\n\r\n      <div className=\"pt-32 pb-16\">\r\n        <div className=\"container mx-auto max-w-6xl px-4 sm:px-6 relative\">\r\n          {/* Back + Premium */}\r\n          <div className=\"mb-4 flex items-center justify-between gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={() => router.back()}\r\n              className=\"text-sm flex items-center gap-2 px-0\"\r\n            >\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              {t('auth.backToHome')}\r\n            </Button>\r\n\r\n            {hasAnyActivePlan && !isAdmin && (\r\n              <Badge\r\n                variant=\"outline\"\r\n                className=\"border-emerald-500/60 text-emerald-400 text-xs flex items-center gap-1\"\r\n              >\r\n                <Crown className=\"h-3 w-3\" />\r\n                {t('plans.currentlyPremium') || 'Premium aktive'}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Payment status */}\r\n          {paymentStatus && (\r\n            <div className=\"mb-3 text-xs\" role=\"status\" aria-live=\"polite\">\r\n              {paymentStatus === 'success' && (\r\n                <div className=\"rounded-xl border border-emerald-500/50 bg-emerald-500/10 px-3 py-2 text-emerald-100\">\r\n                  {isSq\r\n                    ? 'Pagesa u konfirmua. Qasja juaj tani duhet të jetë aktive.'\r\n                    : 'Payment confirmed. Your access should now be active.'}\r\n                </div>\r\n              )}\r\n              {paymentStatus === 'cancel' && (\r\n                <div className=\"rounded-xl border border-amber-500/50 bg-amber-500/10 px-3 py-2 text-amber-100\">\r\n                  {isSq\r\n                    ? 'Pagesa u anulua. Mund të provoni përsëri më poshtë.'\r\n                    : 'Payment was canceled. You can try again below.'}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Header / hero copy */}\r\n          <section className=\"mb-8 md:mb-10 text-center\">\r\n            <div className=\"inline-flex items-center gap-2 rounded-full border border-border/60 bg-black/60 px-3 py-1 text-[11px] uppercase tracking-[0.18em] text-muted-foreground\">\r\n              <span className=\"h-1.5 w-8 rounded-full bg-gradient-to-r from-orange-500 to-orange-300\" />\r\n              {isSq ? 'Çmimet DriveWise' : 'DriveWise Pricing'}\r\n            </div>\r\n\r\n            <h1 className=\"mt-4 text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight\">\r\n              {isSq ? 'Zgjidh periudhën e ushtrimit' : 'Choose your exam window'}\r\n              <span className=\"block text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-orange-300 to-white\">\r\n                {isSq ? ' dhe çliro qasjen e plotë.' : ' and unlock full access.'}\r\n              </span>\r\n            </h1>\r\n\r\n            <p className=\"mt-3 text-sm md:text-base text-muted-foreground max-w-2xl mx-auto\">\r\n              {isSq\r\n                ? 'Çdo plan hap 1 kategori (A, B, C ose D) me teste të pakufizuara, Decision Trainer, Materiale Studimi dhe rishikim të plotë. Pa abonim automatik.'\r\n                : 'Each plan unlocks 1 category (A, B, C or D) with unlimited mock tests, Decision Trainer, Study Material and full review. No auto-renew, no contracts.'}\r\n            </p>\r\n\r\n            <p className=\"mt-2 text-[11px] md:text-xs text-muted-foreground/80\">\r\n              {isSq\r\n                ? 'Mund të filloni falas me disa teste dhe të kaloni në plan të paguar vetëm kur të jeni gati.'\r\n                : 'You can start for free with a few tests, then upgrade when you want unlimited practice.'}\r\n            </p>\r\n          </section>\r\n\r\n          {/* Stepper */}\r\n          <div className=\"mb-8 grid gap-3 rounded-2xl border border-border/70 bg-black/75 p-3 text-xs md:grid-cols-3\">\r\n            {[\r\n              { step: 1, label: stepLabelCategory },\r\n              { step: 2, label: stepLabelPlan },\r\n              { step: 3, label: stepLabelPay },\r\n            ].map(({ step, label }) => {\r\n              const isCompleted =\r\n                (step === 1 && !!selectedCategory) ||\r\n                (step === 2 && !!selectedPlan && !!selectedCategory) ||\r\n                (step === 3 && !!selectedPlan && !!selectedCategory);\r\n              const isCurrent =\r\n                (step === 1 && !selectedCategory) ||\r\n                (step === 2 && selectedCategory && !selectedPlan) ||\r\n                (step === 3 && selectedCategory && selectedPlan);\r\n\r\n              return (\r\n                <div\r\n                  key={step}\r\n                  className={`flex items-center gap-3 rounded-xl border px-3 py-2 transition-colors ${\r\n                    isCurrent\r\n                      ? 'border-orange-400/70 bg-orange-500/10 text-foreground'\r\n                      : isCompleted\r\n                      ? 'border-emerald-500/50 bg-emerald-500/10 text-emerald-100'\r\n                      : 'border-border/60 bg-black/60 text-muted-foreground'\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold ${\r\n                      isCompleted\r\n                        ? 'bg-emerald-500 text-black'\r\n                        : isCurrent\r\n                        ? 'bg-orange-500 text-black'\r\n                        : 'bg-muted text-muted-foreground'\r\n                    }`}\r\n                  >\r\n                    {isCompleted ? <Check className=\"h-3 w-3\" /> : step}\r\n                  </div>\r\n                  <span className=\"text-[11px] md:text-xs\">{label}</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Main layout: left (category + free vs paid), right (plans + summary) */}\r\n          <div className=\"grid items-start gap-6 lg:grid-cols-[1.1fr,1.4fr]\">\r\n            {/* LEFT */}\r\n            <GlassCard className=\"border border-border/80 bg-black/85 p-5 md:p-6 space-y-6\">\r\n              {/* Category chooser */}\r\n              <div>\r\n                <div className=\"mb-2 flex items-center justify-between gap-2\">\r\n                  <h2 className=\"text-sm font-semibold\">{stepLabelCategory}</h2>\r\n                  <span className=\"text-[11px] text-muted-foreground\">\r\n                    {isSq ? 'Zakonisht 1 minutë' : 'Takes about 1 minute'}\r\n                  </span>\r\n                </div>\r\n                <p className=\"mb-3 text-xs text-muted-foreground\">\r\n                  {isSq\r\n                    ? 'Zgjidh kategorinë e patentë shoferit për të cilën po përgatitesh. Mund të blesh plane veç e veç për çdo kategori.'\r\n                    : 'Pick the license category you’re preparing for. You can buy separate plans for each category.'}\r\n                </p>\r\n\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {LICENSE_CATEGORIES.map((cat) => {\r\n                    const info = CATEGORY_INFO[cat];\r\n                    const isActive = cat === selectedCategory;\r\n                    const planForThisCat = existingPlans?.find((p) => p.category === cat);\r\n                    const isPlanActive =\r\n                      planForThisCat &&\r\n                      planForThisCat.status === 'active' &&\r\n                      isPlanCurrentlyActive({\r\n                        startDate: planForThisCat.start_date,\r\n                        endDate: planForThisCat.end_date,\r\n                      });\r\n\r\n                    return (\r\n                      <button\r\n                        key={cat}\r\n                        type=\"button\"\r\n                        onClick={() => handleSelectCategory(cat)}\r\n                        className={`relative flex min-w-[120px] items-center justify-between gap-2 rounded-xl border px-4 py-3 text-sm transition-all ${\r\n                          isActive\r\n                            ? 'border-orange-400 bg-orange-500/10 text-foreground shadow-[0_0_20px_rgba(249,115,22,0.3)]'\r\n                            : 'border-border/70 bg-black/60 text-muted-foreground hover:border-orange-400/70 hover:bg-orange-500/5 hover:text-foreground'\r\n                        }`}\r\n                        aria-pressed={isActive}\r\n                      >\r\n                        <div className=\"flex flex-col text-left\">\r\n                          <span className=\"text-xs font-semibold uppercase tracking-wide\">\r\n                            {info.name}\r\n                          </span>\r\n                          <span className=\"text-[11px] text-muted-foreground\">\r\n                            {isSq ? 'Kategori licence' : 'License category'}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          {isPlanActive && (\r\n                            <span className=\"rounded-full border border-emerald-500/40 bg-emerald-500/20 px-2 py-[2px] text-[10px] text-emerald-300\">\r\n                              {isSq ? 'Aktive' : 'Active'}\r\n                            </span>\r\n                          )}\r\n                          {isActive && (\r\n                            <span className=\"flex h-3 w-3\">\r\n                              <span className=\"absolute inline-flex h-3 w-3 animate-ping rounded-full bg-orange-400 opacity-70\" />\r\n                              <span className=\"relative inline-flex h-3 w-3 rounded-full bg-orange-400\" />\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                {currentCategoryPlan && currentCategoryPlanActive && selectedCategory && (\r\n                  <p className=\"mt-2 text-[11px] text-emerald-300\">\r\n                    {t('pricing.currentPlanFor')}{' '}\r\n                    {CATEGORY_INFO[selectedCategory].name}:{' '}\r\n                    <span className=\"font-semibold\">{currentCategoryPlan.plan_tier}</span>\r\n                    {currentCategoryPlan.end_date && (\r\n                      <>\r\n                        {' '}\r\n                        {t('pricing.until')}{' '}\r\n                        {new Date(currentCategoryPlan.end_date).toLocaleDateString()}\r\n                      </>\r\n                    )}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Free vs Paid comparison */}\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2 text-xs font-medium text-foreground\">\r\n                  <Sparkles className=\"h-4 w-4 text-orange-400\" />\r\n                  <span>\r\n                    {isSq ? 'Çfarë merr falas dhe me Premium' : 'What you get free vs Premium'}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"grid gap-3 md:grid-cols-2\">\r\n                  <Card className=\"border border-border/70 bg-black/70\">\r\n                    <CardHeader className=\"px-3 pb-2 pt-3\">\r\n                      <CardTitle className=\"flex items-center justify-between text-sm\">\r\n                        <span>{isSq ? 'Falas' : 'Free'}</span>\r\n                        <span className=\"text-xs text-muted-foreground\">0 €</span>\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-1 px-3 pb-3\">\r\n                      {featureListFree.map((f) => (\r\n                        <p key={f} className=\"flex items-start gap-2 text-xs text-muted-foreground\">\r\n                          <span className=\"mt-[3px] text-muted-foreground/70\">•</span>\r\n                          <span>{f}</span>\r\n                        </p>\r\n                      ))}\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card className=\"relative overflow-hidden border border-orange-400/70 bg-orange-500/5\">\r\n                    <CardHeader className=\"relative px-3 pb-2 pt-3\">\r\n                      <CardTitle className=\"flex items-center justify-between text-sm\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Crown className=\"h-4 w-4 text-orange-300\" />\r\n                          <span>Premium</span>\r\n                        </div>\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"relative space-y-1 px-3 pb-3\">\r\n                      {featureListPaid.map((f) => (\r\n                        <p key={f} className=\"flex items-start gap-2 text-xs text-muted-foreground\">\r\n                          <Check className=\"mt-[2px] h-3 w-3 text-orange-400\" />\r\n                          <span>{f}</span>\r\n                        </p>\r\n                      ))}\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {!user && (\r\n                  <div className=\"mt-1 flex items-start gap-2 rounded-xl border border-border/70 bg-black/70 p-3 text-[11px] text-muted-foreground\">\r\n                    <Info className=\"mt-[2px] h-4 w-4 shrink-0\" />\r\n                    <p>\r\n                      {isSq\r\n                        ? 'Krijo llogari që të ruhen historia e testeve dhe progresi juaj.'\r\n                        : 'Create an account so your test history and progress are saved.'}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </GlassCard>\r\n\r\n            {/* RIGHT: Plans + summary */}\r\n            <div className=\"space-y-4\">\r\n              {/* Plans row */}\r\n              <section aria-label={stepLabelPlan} className=\"space-y-4\">\r\n                <div className=\"flex flex-col gap-0.5\">\r\n                  <h2 className=\"text-base md:text-lg font-semibold tracking-tight text-foreground\">\r\n                    {stepLabelPlan}\r\n                  </h2>\r\n                  <p className=\"text-xs md:text-sm text-muted-foreground\">\r\n                    {isSq\r\n                      ? 'Zgjidh sa gjatë dëshiron qasje të plotë.'\r\n                      : 'Choose how long you want full access.'}\r\n                  </p>\r\n                </div>\r\n\r\n                <div\r\n                  className={`grid gap-5 md:grid-cols-3 transition-all duration-300 ${\r\n                    !selectedCategory ? 'pointer-events-none opacity-45 grayscale' : 'opacity-100'\r\n                  }`}\r\n                >\r\n                  {Object.values(BILLING_CONFIG.plans).map((plan) => {\r\n                    const isBestValue = plan.id === BILLING_CONFIG.bestValuePlan;\r\n                    const isSelected = plan.id === selectedPlan;\r\n                    const isCurrentActivePlan =\r\n                      !!currentCategoryPlan &&\r\n                      currentCategoryPlan.plan_tier === plan.id &&\r\n                      currentCategoryPlanActive;\r\n\r\n                    // Dynamic CTA text based on plan duration\r\n                    let ctaText = isSq ? 'Zgjidh këtë plan' : 'Choose this exam window';\r\n                    if (plan.id === 'PLAN_A') ctaText = isSq ? 'Merr 1 muaj qasje' : 'Get 1 month access';\r\n                    if (plan.id === 'PLAN_B') ctaText = isSq ? 'Merr 2 muaj qasje' : 'Get 2 months access';\r\n                    if (plan.id === 'PLAN_C') ctaText = isSq ? 'Merr 3 muaj qasje' : 'Get 3 months access';\r\n\r\n                    return (\r\n                      <Card\r\n                        key={plan.id}\r\n                        className={`relative flex h-full cursor-pointer flex-col justify-between border transition-all duration-300 !overflow-visible rounded-3xl before:rounded-3xl ${\r\n                          isSelected\r\n                            ? 'border-orange-500 ring-1 ring-orange-500 bg-black shadow-[0_0_50px_rgba(249,115,22,0.4)] scale-[1.03] z-10'\r\n                            : isBestValue\r\n                            ? 'border-orange-500/40 bg-zinc-950 hover:border-orange-500/70 hover:bg-black scale-[1.01] z-0'\r\n                            : 'border-border/70 bg-zinc-950 hover:border-orange-400/40 hover:bg-black'\r\n                        }`}\r\n                        onClick={() => {\r\n                          if (!isCurrentActivePlan && !isProcessing && !isAdmin) {\r\n                            setSelectedPlan(plan.id);\r\n                          }\r\n                        }}\r\n                        aria-pressed={isSelected}\r\n                        aria-disabled={isCurrentActivePlan || isAdmin}\r\n                      >\r\n                        {isBestValue && (\r\n                          <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 z-20 w-max max-w-[90%]\">\r\n                            <div className=\"relative rounded-full border border-orange-400/80 bg-gradient-to-r from-orange-600 to-amber-500 px-3 py-1 text-[10px] font-bold uppercase tracking-[0.15em] text-white shadow-[0_4px_12px_rgba(249,115,22,0.5)]\">\r\n                              {isSq ? 'Më i vlefshmi' : 'Best value'}\r\n                              {/* Little shine effect */}\r\n                              <div className=\"absolute inset-0 rounded-full bg-white/10\" />\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {isSelected && (\r\n                          <div className=\"absolute right-3 top-3 rounded-full bg-orange-500/20 p-1 text-orange-400\">\r\n                            <Check className=\"h-3.5 w-3.5\" />\r\n                          </div>\r\n                        )}\r\n\r\n                        <CardHeader className={`pt-8 pb-4 ${isBestValue ? 'bg-gradient-to-b from-orange-500/10 to-transparent rounded-t-3xl' : ''}`}>\r\n                          <CardTitle className=\"flex flex-col gap-1.5 text-sm font-semibold\">\r\n                            <div className=\"flex items-center justify-between gap-2\">\r\n                              <span className={isBestValue ? 'text-orange-100' : 'text-foreground'}>\r\n                                {plan.label}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"flex items-baseline gap-1\">\r\n                              <span className={`text-3xl font-bold ${isBestValue ? 'text-white' : 'text-foreground'}`}>\r\n                                {plan.priceEur}\r\n                              </span>\r\n                              <span className=\"text-sm text-muted-foreground\">€</span>\r\n                            </div>\r\n                          </CardTitle>\r\n                        </CardHeader>\r\n\r\n                        <CardContent className=\"space-y-3 pb-4 text-xs text-muted-foreground\">\r\n                          <div>\r\n                            <p className=\"font-medium text-foreground/90 mb-0.5\">\r\n                              {isSq ? 'Vetëm' : 'Just'} {plan.pricePerMonthEur.toFixed(2)} € /{' '}\r\n                              {isSq ? 'muaj' : 'mo'}\r\n                            </p>\r\n                            <p className=\"text-[11px] opacity-70\">\r\n                              {isSq\r\n                                ? 'Pa abonim automatik.'\r\n                                : 'No auto-renew.'}\r\n                            </p>\r\n                          </div>\r\n\r\n                          {isCurrentActivePlan && (\r\n                            <p className=\"mt-1 rounded bg-emerald-500/10 p-2 text-center text-[11px] font-medium text-emerald-400 border border-emerald-500/20\">\r\n                              {isSq\r\n                                ? 'Ky plan është tashmë aktiv.'\r\n                                : 'Plan currently active.'}\r\n                          </p>\r\n                          )}\r\n                        </CardContent>\r\n\r\n                        <CardFooter className=\"pt-2 pb-5\">\r\n                          <div\r\n                            className={`w-full rounded-xl border py-2.5 text-center text-xs font-semibold transition-all duration-200 ${\r\n                              isSelected\r\n                                ? 'border-orange-500 bg-orange-500 text-white shadow-[0_4px_14px_rgba(249,115,22,0.4)]'\r\n                                : isBestValue\r\n                                ? 'border-orange-500/30 bg-orange-500/10 text-orange-200 group-hover:bg-orange-500/20 group-hover:border-orange-500/50'\r\n                                : 'border-white/10 bg-white/5 text-muted-foreground group-hover:bg-white/10 group-hover:text-foreground'\r\n                            }`}\r\n                          >\r\n                            {isSelected\r\n                              ? (isSq ? 'Opsioni i zgjedhur' : 'Selected option')\r\n                              : ctaText}\r\n                          </div>\r\n                        </CardFooter>\r\n                      </Card>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </section>\r\n\r\n              {/* Summary + CTA */}\r\n              <section aria-label={stepLabelPay}>\r\n                <GlassCard\r\n                  className={`flex flex-col gap-5 border border-border/80 bg-gradient-to-r from-black via-zinc-950 to-black px-6 py-6 md:flex-row md:items-center md:justify-between transition-all duration-500 ${\r\n                    selectedCategory && selectedPlan ? 'translate-y-0 opacity-100' : 'translate-y-2 opacity-50'\r\n                  }`}\r\n                >\r\n                  <div className=\"space-y-2 text-xs md:text-sm\">\r\n                    <div className=\"flex flex-wrap items-center gap-2\">\r\n                      <span className=\"inline-flex items-center gap-1.5 rounded-full border border-orange-500/40 bg-orange-500/10 px-2.5 py-1 text-[11px] font-medium text-orange-300 shadow-[0_0_10px_rgba(249,115,22,0.15)]\">\r\n                        <Sparkles className=\"h-3 w-3\" />\r\n                        {isSq ? 'Përmbledhja' : 'Summary'}\r\n                      </span>\r\n                      {selectedCategory && selectedPlanData && (\r\n                        <span className=\"text-foreground font-medium tracking-tight\">\r\n                          {CATEGORY_INFO[selectedCategory].name}{' '}\r\n                          <span className=\"text-muted-foreground/60 mx-1\">/</span> {selectedPlanData.label}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {selectedCategory && selectedPlanData ? (\r\n                      <>\r\n                        <p className=\"text-sm text-muted-foreground pl-1\">\r\n                          {isSq ? 'Total:' : 'Total:'}{' '}\r\n                          <span className=\"text-xl font-bold text-white ml-1\">{selectedPlanData.priceEur} €</span>{' '}\r\n                          <span className=\"text-xs text-muted-foreground/80 ml-1\">\r\n                            {isSq\r\n                              ? '(paguhet një herë)'\r\n                              : '(one-time payment)'}\r\n                          </span>\r\n                        </p>\r\n                      </>\r\n                    ) : (\r\n                      <p className=\"text-xs italic text-muted-foreground pl-1\">\r\n                        {isSq\r\n                          ? 'Zgjidhni kategorinë dhe planin për të vazhduar.'\r\n                          : 'Select a category and plan to continue.'}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex flex-col items-stretch gap-3 md:items-end\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      onClick={handlePurchase}\r\n                      disabled={\r\n                        !selectedCategory ||\r\n                        !selectedPlan ||\r\n                        isProcessing ||\r\n                        isAdmin ||\r\n                        currentCategoryPlanActive\r\n                      }\r\n                      size=\"lg\"\r\n                      className=\"min-w-[260px] h-12 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-400 hover:to-red-400 text-white font-semibold shadow-[0_0_25px_rgba(249,115,22,0.4)] border-none transition-all hover:scale-[1.02] hover:shadow-[0_0_35px_rgba(249,115,22,0.5)]\"\r\n                    >\r\n                      {isAdmin\r\n                        ? isSq\r\n                          ? 'Pamje si admin'\r\n                          : 'Admin preview'\r\n                        : isProcessing\r\n                        ? isSq\r\n                          ? 'Duke u përpunuar...'\r\n                          : 'Processing...'\r\n                        : currentCategoryPlanActive\r\n                        ? isSq\r\n                          ? 'Plani tashmë është aktiv'\r\n                          : 'Plan already active'\r\n                        : !selectedCategory || !selectedPlan\r\n                        ? isSq\r\n                          ? 'Zgjidh opsionet...'\r\n                          : 'Select options...'\r\n                        : isSq\r\n                        ? 'Hap qasjen e plotë'\r\n                        : 'Unlock full exam access'}\r\n                    </Button>\r\n\r\n                    {!user && (\r\n                      <p className=\"text-[10px] text-muted-foreground/70 text-center md:text-right\">\r\n                        {isSq\r\n                          ? 'Krijo llogari që të ruhet historia e testeve.'\r\n                          : 'Create an account to save your progress.'}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </GlassCard>\r\n              </section>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
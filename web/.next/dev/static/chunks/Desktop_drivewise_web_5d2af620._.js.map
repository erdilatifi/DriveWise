{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { LogOut, Menu, X, Globe, Check } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { toast } from 'sonner';\r\n\r\nexport function Navbar() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [languageMenuOpen, setLanguageMenuOpen] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const { language, setLanguage, t } = useLanguage();\r\n  const { user, signOut, isAdmin, userProfile, loading: authLoading } = useAuth();\r\n  const pathname = usePathname();\r\n\r\n  // Get display name from userProfile or fallback to email\r\n  const displayName = userProfile?.full_name || user?.user_metadata?.full_name || user?.email?.split('@')[0] || t('admin.user');\r\n\r\n  // Handle scroll behavior\r\n  useEffect(() => {\r\n    let rafId: number;\r\n    const handleScroll = () => {\r\n      rafId = requestAnimationFrame(() => {\r\n        setScrolled(window.scrollY > 10);\r\n      });\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n      cancelAnimationFrame(rafId);\r\n    };\r\n  }, []);\r\n\r\n  const handleLanguageChange = (lang: 'sq' | 'en') => {\r\n    setLanguage(lang);\r\n    setLanguageMenuOpen(false);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      setMobileMenuOpen(false);\r\n      await signOut();\r\n      toast.success(t('auth.logoutSuccess'));\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      toast.error(t('auth.logoutError'));\r\n    }\r\n  };\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const desktopLinkBase =\r\n    'text-sm font-semibold transition-all duration-200 relative group/nav-link';\r\n  const desktopLinkActive = 'text-primary';\r\n  const desktopLinkInactive = 'text-foreground/80 hover:text-foreground';\r\n\r\n  const renderDesktopLink = (href: string, label: string, active: boolean) => (\r\n    <Link\r\n      href={href}\r\n      className={`${desktopLinkBase} ${active ? desktopLinkActive : desktopLinkInactive}`}\r\n    >\r\n      {label}\r\n      <span\r\n        className={`absolute -bottom-1 left-0 h-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full transition-all duration-200 ${\r\n          active ? 'w-full' : 'w-0 group-hover/nav-link:w-full'\r\n        }`}\r\n      />\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <nav className={`fixed left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ${\r\n      scrolled ? 'top-0 w-full' : 'top-4 w-[90%]'\r\n    }`}>\r\n      <div className={`bg-card/95 backdrop-blur-xl border border-border/40 shadow-lg shadow-black/20 transition-all duration-300 ${\r\n        scrolled ? 'rounded-none border-t-0 border-x-0' : 'rounded-2xl'\r\n      }`}>\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex h-20 items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"flex items-center gap-3 group\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-primary/30 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-300\"></div>\r\n              <div className=\"relative w-12 h-12 rounded-2xl overflow-hidden shadow-xl shadow-primary/20 group-hover:shadow-primary/30 transition-all duration-300 group-hover:scale-105 border-2 border-primary/30 group-hover:border-primary/50\">\r\n                <Image \r\n                  src=\"/logo-white.png\" \r\n                  alt=\"DriveWise Logo\" \r\n                  width={48} \r\n                  height={48}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"text-2xl font-bold text-white tracking-tight\">\r\n                DriveWise\r\n              </span>\r\n              <span className=\"text-xs text-primary font-medium -mt-1\">{t('nav.subtitle')}</span>\r\n            </div>\r\n          </Link>\r\n\r\n          {/* Desktop Navigation */}\r\n          <div className=\"hidden md:flex items-center gap-8\">\r\n            {/* Home */}\r\n            {renderDesktopLink('/', t('nav.home'), isActive('/'))}\r\n\r\n            {/* Pricing page */}\r\n            {renderDesktopLink('/pricing', t('nav.pricing'), isActive('/pricing'))}\r\n\r\n            {/* Materials */}\r\n            {renderDesktopLink('/materials', t('nav.materials'), isActive('/materials'))}\r\n\r\n            {/* Decision Trainer (logged-in users) */}\r\n            {user &&\r\n              renderDesktopLink(\r\n                '/decision-trainer',\r\n                t('nav.decisionTrainer'),\r\n                pathname.startsWith('/decision-trainer'),\r\n              )}\r\n\r\n            {/* Tests (category index page) */}\r\n            {renderDesktopLink('/category', t('nav.tests'), pathname.startsWith('/category'))}\r\n\r\n            {/* Dashboard */}\r\n            {renderDesktopLink('/dashboard', t('nav.dashboard'), isActive('/dashboard'))}\r\n\r\n            {/* Account (logged-in users) */}\r\n            {user && renderDesktopLink('/profile', t('nav.account'), isActive('/profile'))}\r\n\r\n            {/* Admin (admins only) */}\r\n            {user &&\r\n              isAdmin &&\r\n              renderDesktopLink(\r\n                '/admin',\r\n                t('nav.admin'),\r\n                isActive('/admin') || pathname.startsWith('/admin'),\r\n              )}\r\n          </div>\r\n\r\n          {/* Desktop Auth Buttons */}\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            {/* Language Switcher */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setLanguageMenuOpen(!languageMenuOpen)}\r\n                className=\"flex items-center gap-2 px-3 py-2 rounded-lg border border-border/50 hover:border-primary/50 hover:bg-primary/10 transition-all duration-200 group\"\r\n              >\r\n                <Globe className=\"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                <span className=\"text-sm font-medium text-foreground group-hover:text-primary transition-colors\">\r\n                  {language === 'en' ? 'EN' : 'SQ'}\r\n                </span>\r\n              </button>\r\n              \r\n              {/* Language Dropdown */}\r\n              {languageMenuOpen && (\r\n                <div className=\"absolute top-full mt-2 right-0 w-48 bg-card border border-border/50 rounded-xl shadow-xl shadow-black/20 overflow-hidden z-50\">\r\n                  <button\r\n                    onClick={() => handleLanguageChange('en')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'en' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">English</span>\r\n                    {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleLanguageChange('sq')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'sq' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">Shqip</span>\r\n                    {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {authLoading ? (\r\n              <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/5 border border-primary/10\">\r\n                <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n              </div>\r\n            ) : user ? (\r\n              <>\r\n                <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button variant=\"ghost\" size=\"sm\" asChild className=\"hover:bg-primary/10 hover:text-primary\">\r\n                  <Link href=\"/login\">{t('nav.login')}</Link>\r\n                </Button>\r\n                <Button size=\"sm\" asChild className=\"shadow-lg shadow-primary/30 hover:shadow-primary/40 transition-all duration-300 font-semibold\">\r\n                  <Link href=\"/register\">{t('nav.getStarted')}</Link>\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            className=\"md:hidden p-2 hover:bg-primary/10 rounded-lg transition-all duration-200 border border-border/50 hover:border-primary/30\"\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            {mobileMenuOpen ? (\r\n              <X className=\"w-5 h-5 text-primary\" />\r\n            ) : (\r\n              <Menu className=\"w-5 h-5 text-foreground\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {mobileMenuOpen && (\r\n          <div className=\"md:hidden py-6 border-t border-border/40 bg-card/50 backdrop-blur-xl animate-in slide-in-from-top-2\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              {user && (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 mb-2 rounded-xl bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n              )}\r\n              {/* Home */}\r\n              <Link\r\n                href=\"/\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.home')}\r\n              </Link>\r\n\r\n              {/* Pricing */}\r\n              <Link\r\n                href=\"/pricing\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/pricing')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.pricing')}\r\n              </Link>\r\n\r\n              {/* Materials */}\r\n              <Link\r\n                href=\"/materials\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/materials') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.materials')}\r\n              </Link>\r\n\r\n              {/* Decision Trainer (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/decision-trainer\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    pathname.startsWith('/decision-trainer')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.decisionTrainer')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Tests (category index page) */}\r\n              <Link\r\n                href=\"/category\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  pathname.startsWith('/category')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.tests')}\r\n              </Link>\r\n\r\n              {/* Dashboard */}\r\n              <Link\r\n                href=\"/dashboard\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/dashboard') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.dashboard')}\r\n              </Link>\r\n\r\n              {/* Account (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/profile\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    isActive('/profile')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.account')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Admin (admins only) */}\r\n              {user &&\r\n                isAdmin && (\r\n                  <Link\r\n                    href=\"/admin\"\r\n                    className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                      isActive('/admin') || pathname.startsWith('/admin')\r\n                        ? 'bg-primary/10 text-primary border border-primary/20'\r\n                        : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                    }`}\r\n                    onClick={() => setMobileMenuOpen(false)}\r\n                  >\r\n                    {t('nav.admin')}\r\n                  </Link>\r\n                )}\r\n              \r\n              {/* Mobile Language Switcher */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground\">\r\n                  <Globe className=\"w-4 h-4\" />\r\n                  <span className=\"font-medium\">{t('nav.language')}</span>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleLanguageChange('en')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'en' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">English</span>\r\n                  {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleLanguageChange('sq')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'sq' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">Shqip</span>\r\n                  {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"h-px bg-border/40 my-3\"></div>\r\n              {authLoading ? (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/5 border border-primary/10\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n                </div>\r\n              ) : user ? (\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"w-full justify-start border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button variant=\"ghost\" size=\"sm\" asChild className=\"w-full justify-start hover:bg-primary/10 hover:text-primary\">\r\n                    <Link href=\"/login\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.login')}\r\n                    </Link>\r\n                  </Button>\r\n                  <Button size=\"sm\" asChild className=\"w-full justify-start shadow-lg shadow-primary/30\">\r\n                    <Link href=\"/register\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.getStarted')}\r\n                    </Link>\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 763, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/glass-card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode\r\n  hover?: boolean\r\n}\r\n\r\nexport function GlassCard({ children, className, hover = false, ...props }: GlassCardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl\",\r\n        \"shadow-[0_22px_70px_rgba(0,0,0,0.9)]\",\r\n        \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70\",\r\n        hover && \"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,GAAG,OAAuB;IACxF,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,6FACA,wCACA,6OACA,SAAS,wEACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KAfgB","debugId":null}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-xl border border-input/70 bg-background/60 px-3.5 py-2 text-sm text-foreground shadow-[0_8px_24px_rgba(0,0,0,0.7)] backdrop-blur-xl\",\n          \"transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/80\",\n          \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/80 focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n          \"disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,mMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,qNAAC;QACC,MAAM;QACN,WAAW,IAAA,oJAAE,EACX,gKACA,oIACA,+IACA,mDACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-materials.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport type { LicenseCategory } from '@/types/database';\r\n\r\ntype MaterialContent = Record<string, unknown>;\r\n\r\nexport interface Material {\r\n  id: string;\r\n  chapter_id: number;\r\n  category?: LicenseCategory | null;\r\n  title_en: string;\r\n  title_sq: string;\r\n  content_en: MaterialContent;\r\n  content_sq: MaterialContent;\r\n  order_index: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n  images?: MaterialImage[];\r\n}\r\n\r\nexport interface MaterialImage {\r\n  id: string;\r\n  material_id: string;\r\n  image_url: string;\r\n  caption_en?: string | null;\r\n  caption_sq?: string | null;\r\n  order_index?: number | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface MaterialInput {\r\n  chapter_id: number;\r\n  category?: LicenseCategory;\r\n  title_en: string;\r\n  title_sq: string;\r\n  content_en: MaterialContent;\r\n  content_sq: MaterialContent;\r\n  order_index: number;\r\n  is_published?: boolean;\r\n}\r\n\r\nexport interface MaterialImageInput {\r\n  material_id: string;\r\n  image_url: string;\r\n  caption_en?: string;\r\n  caption_sq?: string;\r\n  order_index?: number;\r\n}\r\n\r\nexport interface MaterialsQueryParams {\r\n  search?: string;\r\n  chapterId?: number;\r\n  category?: LicenseCategory;\r\n  page?: number;\r\n  pageSize?: number;\r\n  includeUnpublished?: boolean;\r\n  fields?: string; // New: Allow selecting specific columns\r\n}\r\n\r\nexport interface MaterialsPageResult {\r\n  materials: Material[];\r\n  total: number;\r\n}\r\n\r\n// Fetch materials with optional pagination and filters, including related images\r\nexport function useMaterials(params: MaterialsQueryParams = {}) {\r\n  const {\r\n    search,\r\n    chapterId,\r\n    category,\r\n    page = 1,\r\n    pageSize = 50,\r\n    includeUnpublished = false,\r\n    fields = '*', // Default to all for backward compatibility\r\n  } = params;\r\n  const supabase = createClient();\r\n\r\n  return useQuery<MaterialsPageResult>({\r\n    queryKey: ['materials', search, chapterId, category, page, pageSize, includeUnpublished, fields],\r\n    queryFn: async () => {\r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n\r\n      // Select specific fields if provided, otherwise *\r\n      let query = supabase\r\n        .from('study_materials')\r\n        .select(fields, { count: 'planned' })\r\n        .order('order_index', { ascending: true });\r\n\r\n      if (chapterId) {\r\n        query = query.eq('chapter_id', chapterId);\r\n      }\r\n\r\n      if (category) {\r\n        query = query.eq('category', category);\r\n      }\r\n\r\n      if (!includeUnpublished) {\r\n        query = query.eq('is_published', true);\r\n      }\r\n\r\n      if (search && search.trim()) {\r\n        const term = search.trim();\r\n        query = query.or(`title_en.ilike.%${term}%,title_sq.ilike.%${term}%`);\r\n      }\r\n\r\n      const { data, error, count } = await query.range(from, to);\r\n\r\n      if (error) throw error;\r\n\r\n      const materials = (data || []) as unknown as Material[];\r\n      \r\n      // Only fetch images if we are fetching full content or specifically requested\r\n      // If fields doesn't include 'id' we can't match images anyway\r\n      // Just simplify: if fields is '*', fetch images. If restricted, skip images unless logic added.\r\n      // For lightweight list, we don't need images.\r\n      if (fields !== '*') {\r\n         return {\r\n            materials,\r\n            total: count || 0,\r\n         };\r\n      }\r\n\r\n      const materialIds = materials.map((m) => m.id);\r\n\r\n      let images: MaterialImage[] = [];\r\n      if (materialIds.length > 0) {\r\n        const { data: imageData, error: imageError } = await supabase\r\n          .from('material_images')\r\n          .select('*')\r\n          .in('material_id', materialIds)\r\n          .order('order_index', { ascending: true })\r\n          .order('created_at', { ascending: true });\r\n\r\n        if (imageError) throw imageError;\r\n        images = (imageData || []) as MaterialImage[];\r\n      }\r\n\r\n      const materialsWithImages: Material[] = materials.map((material) => ({\r\n        ...material,\r\n        images: images.filter((img) => img.material_id === material.id),\r\n      }));\r\n\r\n      return {\r\n        materials: materialsWithImages,\r\n        total: count || 0,\r\n      };\r\n    },\r\n  });\r\n}\r\n\r\n// Fetch a single material by Chapter ID (Optimized for reading view)\r\nexport function useMaterialByChapterId(chapterId: number | undefined) {\r\n  const supabase = createClient();\r\n\r\n  return useQuery<Material | null>({\r\n    queryKey: ['material-by-chapter', chapterId],\r\n    queryFn: async () => {\r\n      if (chapterId === undefined) return null;\r\n\r\n      const { data, error } = await supabase\r\n        .from('study_materials')\r\n        .select('*')\r\n        .eq('chapter_id', chapterId)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      const material = data as Material;\r\n\r\n      // Fetch images for this material\r\n      const { data: imageData, error: imageError } = await supabase\r\n        .from('material_images')\r\n        .select('*')\r\n        .eq('material_id', material.id)\r\n        .order('order_index', { ascending: true })\r\n        .order('created_at', { ascending: true });\r\n\r\n      if (imageError) throw imageError;\r\n\r\n      return {\r\n        ...material,\r\n        images: (imageData || []) as MaterialImage[],\r\n      };\r\n    },\r\n    enabled: !!chapterId,\r\n    staleTime: 5 * 60 * 1000, // Cache for 5 minutes\r\n  });\r\n}\r\n\r\n// Fetch a single material with its images\r\nexport function useMaterial(id: string) {\r\n  const supabase = createClient();\r\n\r\n  return useQuery<Material | null>({\r\n    queryKey: ['material', id],\r\n    queryFn: async () => {\r\n      if (!id) return null;\r\n\r\n      const { data, error } = await supabase\r\n        .from('study_materials')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      const material = data as Material;\r\n\r\n      const { data: imageData, error: imageError } = await supabase\r\n        .from('material_images')\r\n        .select('*')\r\n        .eq('material_id', id)\r\n        .order('order_index', { ascending: true })\r\n        .order('created_at', { ascending: true });\r\n\r\n      if (imageError) throw imageError;\r\n\r\n      return {\r\n        ...material,\r\n        images: (imageData || []) as MaterialImage[],\r\n      };\r\n    },\r\n    enabled: !!id,\r\n  });\r\n}\r\n\r\n// Create material (admin only via RLS)\r\nexport function useCreateMaterial() {\r\n  const queryClient = useQueryClient();\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (material: MaterialInput) => {\r\n      const { data, error } = await supabase\r\n        .from('study_materials')\r\n        .insert([material])\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        throw new Error(error.message || error.details || 'Failed to create material');\r\n      }\r\n\r\n      return data as Material;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['materials'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Update material\r\nexport function useUpdateMaterial() {\r\n  const queryClient = useQueryClient();\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({ id, ...updates }: Partial<MaterialInput> & { id: string }) => {\r\n      const { data, error } = await supabase\r\n        .from('study_materials')\r\n        .update(updates)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        throw new Error(error.message || error.details || 'Failed to update material');\r\n      }\r\n\r\n      return data as Material;\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['materials'] });\r\n      queryClient.invalidateQueries({ queryKey: ['material', data.id] });\r\n    },\r\n  });\r\n}\r\n\r\n// Delete material\r\nexport function useDeleteMaterial() {\r\n  const queryClient = useQueryClient();\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const { error } = await supabase\r\n        .from('study_materials')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n      if (error) {\r\n        throw new Error(error.message || 'Failed to delete material');\r\n      }\r\n\r\n      return id;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['materials'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Create material image record (DB only - upload to storage separately)\r\nexport function useCreateMaterialImage() {\r\n  const queryClient = useQueryClient();\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (image: MaterialImageInput) => {\r\n      const { data, error } = await supabase\r\n        .from('material_images')\r\n        .insert([image])\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        throw new Error(error.message || error.details || 'Failed to create material image');\r\n      }\r\n\r\n      return data as MaterialImage;\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['material', data.material_id] });\r\n      queryClient.invalidateQueries({ queryKey: ['materials'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Delete material image\r\nexport function useDeleteMaterialImage() {\r\n  const queryClient = useQueryClient();\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const { data, error } = await supabase\r\n        .from('material_images')\r\n        .delete()\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        throw new Error(error.message || 'Failed to delete material image');\r\n      }\r\n\r\n      return data as MaterialImage;\r\n    },\r\n    onSuccess: (data) => {\r\n      if (data?.material_id) {\r\n        queryClient.invalidateQueries({ queryKey: ['material', data.material_id] });\r\n      }\r\n      queryClient.invalidateQueries({ queryKey: ['materials'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Upload a material image file to Supabase storage and return the public URL\r\nexport function useUploadMaterialImage() {\r\n  const supabase = createClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (file: File) => {\r\n      const ext = file.name.split('.').pop() || 'jpg';\r\n      const unique = `${Date.now()}-${Math.random().toString(36).slice(2)}`;\r\n      const filePath = `materials/${unique}.${ext}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('material-images')\r\n        .upload(filePath, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n        });\r\n\r\n      if (uploadError) {\r\n        throw new Error(uploadError.message || 'Failed to upload material image');\r\n      }\r\n\r\n      const {\r\n        data: { publicUrl },\r\n      } = supabase.storage.from('material-images').getPublicUrl(filePath);\r\n\r\n      return publicUrl as string;\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/skeleton.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,+FACA,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 1251, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/lib/subscriptions.ts"],"sourcesContent":["import type { LicenseCategory } from '@/types/database';\r\n\r\n// Plan identifiers\r\nexport type PlanTier = 'FREE' | 'PLAN_A' | 'PLAN_B' | 'PLAN_C';\r\n\r\nexport type PaidPlanTier = Exclude<PlanTier, 'FREE'>;\r\n\r\nexport interface PlanDefinition {\r\n  id: PaidPlanTier;\r\n  label: string;\r\n  months: number;\r\n  priceEur: number;\r\n  // derived convenience fields\r\n  pricePerMonthEur: number;\r\n  badge?: 'MOST_POPULAR' | 'BEST_VALUE';\r\n  emphasize?: boolean;\r\n}\r\n\r\nexport interface BillingConfig {\r\n  freeTestLimitPerCategory: number;\r\n  paidTestLimitPerCategory: number;\r\n  billingCycleDays: number;\r\n  bestValuePlan: PaidPlanTier;\r\n  plans: Record<PaidPlanTier, PlanDefinition>;\r\n}\r\n\r\n// Centralized billing / pricing configuration.\r\n// Values can be overridden via NEXT_PUBLIC_* env vars without changing code.\r\nconst freeLimit = Number(process.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY ?? '3');\r\nconst paidLimit = Number(process.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY ?? '9999');\r\nconst cycleDays = Number(process.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS ?? '30');\r\nconst bestValueEnv = process.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN as PaidPlanTier | undefined;\r\n\r\nconst rawPlans: Omit<PlanDefinition, 'pricePerMonthEur'>[] = [\r\n  {\r\n    id: 'PLAN_A',\r\n    label: '1 month',\r\n    months: 1,\r\n    priceEur: 3,\r\n  },\r\n  {\r\n    id: 'PLAN_B',\r\n    label: '2 months',\r\n    months: 2,\r\n    priceEur: 6,\r\n  },\r\n  {\r\n    id: 'PLAN_C',\r\n    label: '3 months',\r\n    months: 3,\r\n    priceEur: 8,\r\n    badge: 'BEST_VALUE',\r\n    emphasize: true,\r\n  },\r\n];\r\n\r\nconst plansRecord = rawPlans.reduce<Record<PaidPlanTier, PlanDefinition>>((acc, plan) => {\r\n  const pricePerMonthEur = plan.priceEur / plan.months;\r\n  acc[plan.id] = { ...plan, pricePerMonthEur };\r\n  return acc;\r\n}, {} as Record<PaidPlanTier, PlanDefinition>);\r\n\r\nexport const BILLING_CONFIG: BillingConfig = {\r\n  freeTestLimitPerCategory: freeLimit,\r\n  paidTestLimitPerCategory: paidLimit,\r\n  billingCycleDays: cycleDays,\r\n  bestValuePlan: bestValueEnv ?? 'PLAN_C',\r\n  plans: plansRecord,\r\n};\r\n\r\nexport interface CategoryPlan {\r\n  id: string;\r\n  userId: string;\r\n  category: LicenseCategory;\r\n  planTier: PaidPlanTier;\r\n  startDate: string; // ISO\r\n  endDate: string;   // ISO\r\n  isActive: boolean;\r\n  createdAt: string; // ISO\r\n}\r\n\r\nexport interface Entitlements {\r\n  canAccessTests: boolean;\r\n  canStartNewTest: boolean;\r\n  remainingFreeTests?: number;\r\n  canAccessDecisionTrainer: boolean;\r\n  canAccessStudyMaterial: boolean;\r\n  canReviewTestsInDetail: boolean;\r\n}\r\n\r\nexport interface EntitlementInput {\r\n  isAdmin: boolean;\r\n  testsTakenThisCycle: number;\r\n  activePlan?: Pick<CategoryPlan, 'planTier' | 'startDate' | 'endDate' | 'isActive'> | null;\r\n  now?: Date;\r\n}\r\n\r\nexport function isPlanCurrentlyActive(plan?: { startDate: string; endDate: string } | null, now: Date = new Date()): boolean {\r\n  if (!plan) return false;\r\n  const start = new Date(plan.startDate).getTime();\r\n  const end = new Date(plan.endDate).getTime();\r\n  const ts = now.getTime();\r\n  return ts >= start && ts <= end;\r\n}\r\n\r\nexport function computeEntitlements(input: EntitlementInput): Entitlements {\r\n  const { isAdmin, testsTakenThisCycle, activePlan, now } = input;\r\n\r\n  if (isAdmin) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: true,\r\n      remainingFreeTests: undefined,\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const hasActivePaidPlan = !!activePlan && isPlanCurrentlyActive(\r\n    { startDate: activePlan.startDate, endDate: activePlan.endDate },\r\n    now,\r\n  );\r\n\r\n  if (hasActivePaidPlan) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: testsTakenThisCycle < BILLING_CONFIG.paidTestLimitPerCategory,\r\n      remainingFreeTests: Math.max(\r\n        0,\r\n        BILLING_CONFIG.paidTestLimitPerCategory - testsTakenThisCycle,\r\n      ),\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const remainingFree = Math.max(0, BILLING_CONFIG.freeTestLimitPerCategory - testsTakenThisCycle);\r\n\r\n  return {\r\n    canAccessTests: true,\r\n    canStartNewTest: remainingFree > 0,\r\n    remainingFreeTests: remainingFree,\r\n    canAccessDecisionTrainer: false,\r\n    canAccessStudyMaterial: false,\r\n    canReviewTestsInDetail: false,\r\n  };\r\n}\r\n\r\nexport interface CycleUsageInput {\r\n  attempts: { category: string; completed_at: string }[];\r\n  category: LicenseCategory;\r\n  now?: Date;\r\n}\r\n\r\nexport function countTestsInCurrentCycle(input: CycleUsageInput): number {\r\n  const { attempts, category, now } = input;\r\n  const current = now ?? new Date();\r\n  const cycleStart = new Date(current);\r\n  cycleStart.setDate(cycleStart.getDate() - BILLING_CONFIG.billingCycleDays + 1);\r\n  const startTs = cycleStart.getTime();\r\n  const endTs = current.getTime();\r\n\r\n  return attempts.filter((a) => {\r\n    if (a.category !== category) return false;\r\n    const ts = new Date(a.completed_at).getTime();\r\n    return ts >= startTs && ts <= endTs;\r\n  }).length;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AA4ByB;AAFzB,+CAA+C;AAC/C,6EAA6E;AAC7E,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,8BAA8B,IAAI;AACvE,MAAM,eAAe,mMAAO,CAAC,GAAG,CAAC,mCAAmC;AAEpE,MAAM,WAAuD;IAC3D;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;QACV,OAAO;QACP,WAAW;IACb;CACD;AAED,MAAM,cAAc,SAAS,MAAM,CAAuC,CAAC,KAAK;IAC9E,MAAM,mBAAmB,KAAK,QAAQ,GAAG,KAAK,MAAM;IACpD,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG;QAAE,GAAG,IAAI;QAAE;IAAiB;IAC3C,OAAO;AACT,GAAG,CAAC;AAEG,MAAM,iBAAgC;IAC3C,0BAA0B;IAC1B,0BAA0B;IAC1B,kBAAkB;IAClB,eAAe,gBAAgB;IAC/B,OAAO;AACT;AA6BO,SAAS,sBAAsB,IAAoD,EAAE,MAAY,IAAI,MAAM;IAChH,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,QAAQ,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO;IAC9C,MAAM,MAAM,IAAI,KAAK,KAAK,OAAO,EAAE,OAAO;IAC1C,MAAM,KAAK,IAAI,OAAO;IACtB,OAAO,MAAM,SAAS,MAAM;AAC9B;AAEO,SAAS,oBAAoB,KAAuB;IACzD,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAE,UAAU,EAAE,GAAG,EAAE,GAAG;IAE1D,IAAI,SAAS;QACX,OAAO;YACL,gBAAgB;YAChB,iBAAiB;YACjB,oBAAoB;YACpB,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,oBAAoB,CAAC,CAAC,cAAc,sBACxC;QAAE,WAAW,WAAW,SAAS;QAAE,SAAS,WAAW,OAAO;IAAC,GAC/D;IAGF,IAAI,mBAAmB;QACrB,OAAO;YACL,gBAAgB;YAChB,iBAAiB,sBAAsB,eAAe,wBAAwB;YAC9E,oBAAoB,KAAK,GAAG,CAC1B,GACA,eAAe,wBAAwB,GAAG;YAE5C,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,eAAe,wBAAwB,GAAG;IAE5E,OAAO;QACL,gBAAgB;QAChB,iBAAiB,gBAAgB;QACjC,oBAAoB;QACpB,0BAA0B;QAC1B,wBAAwB;QACxB,wBAAwB;IAC1B;AACF;AAQO,SAAS,yBAAyB,KAAsB;IAC7D,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG;IACpC,MAAM,UAAU,OAAO,IAAI;IAC3B,MAAM,aAAa,IAAI,KAAK;IAC5B,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK,eAAe,gBAAgB,GAAG;IAC5E,MAAM,UAAU,WAAW,OAAO;IAClC,MAAM,QAAQ,QAAQ,OAAO;IAE7B,OAAO,SAAS,MAAM,CAAC,CAAC;QACtB,IAAI,EAAE,QAAQ,KAAK,UAAU,OAAO;QACpC,MAAM,KAAK,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO;QAC3C,OAAO,MAAM,WAAW,MAAM;IAChC,GAAG,MAAM;AACX","debugId":null}},
    {"offset": {"line": 1368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-subscriptions.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport type { LicenseCategory, UserPlan as DbUserPlan } from '@/types/database';\r\nimport {\r\n  computeEntitlements,\r\n  countTestsInCurrentCycle,\r\n  isPlanCurrentlyActive,\r\n  type CategoryPlan,\r\n  type Entitlements,\r\n  type PaidPlanTier,\r\n} from '@/lib/subscriptions';\r\n\r\ninterface CategoryEntitlementsResult {\r\n  entitlements: Entitlements;\r\n  plan: CategoryPlan | null;\r\n  testsTakenThisCycle: number;\r\n}\r\n\r\ninterface TestAttemptRowForEntitlements {\r\n  category: LicenseCategory;\r\n  completed_at: string;\r\n}\r\n\r\nexport function useUserPlans(userId?: string) {\r\n  return useQuery<DbUserPlan[]>({\r\n    queryKey: ['user-plans', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      const { data, error } = await supabase\r\n        .from('user_plans')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      return data || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\nexport function useGlobalPremium(userId?: string, isAdmin?: boolean) {\r\n  const query = useUserPlans(userId);\r\n\r\n  const now = new Date();\r\n  const hasAnyActivePlan =\r\n    !!isAdmin ||\r\n    (query.data || []).some((plan) =>\r\n      plan.status === 'active' &&\r\n      isPlanCurrentlyActive({ startDate: plan.start_date, endDate: plan.end_date }, now),\r\n    );\r\n\r\n  return {\r\n    ...query,\r\n    hasAnyActivePlan,\r\n  };\r\n}\r\n\r\nexport function useCategoryEntitlements(\r\n  userId: string | undefined,\r\n  category: LicenseCategory | undefined,\r\n  isAdmin: boolean,\r\n) {\r\n  return useQuery<CategoryEntitlementsResult>({\r\n    queryKey: ['category-entitlements', userId, category, isAdmin],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const [plansResult, attemptsResult] = await Promise.all([\r\n        supabase\r\n          .from('user_plans')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .eq('category', category!)\r\n          .order('end_date', { ascending: false })\r\n          .limit(1),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('category, completed_at')\r\n          .eq('user_id', userId!),\r\n      ]);\r\n\r\n      if (plansResult.error) {\r\n        throw plansResult.error;\r\n      }\r\n      if (attemptsResult.error) {\r\n        throw attemptsResult.error;\r\n      }\r\n\r\n      const planRow = (plansResult.data || [])[0] as DbUserPlan | undefined;\r\n\r\n      const now = new Date();\r\n\r\n      const testsTakenThisCycle = countTestsInCurrentCycle({\r\n        attempts: (attemptsResult.data || []).map((a: TestAttemptRowForEntitlements) => ({\r\n          category: a.category,\r\n          completed_at: a.completed_at,\r\n        })),\r\n        category: category!,\r\n        now,\r\n      });\r\n\r\n      const plan: CategoryPlan | null = planRow\r\n        ? {\r\n            id: planRow.id,\r\n            userId: planRow.user_id,\r\n            category: planRow.category,\r\n            planTier: planRow.plan_tier as PaidPlanTier,\r\n            startDate: planRow.start_date,\r\n            endDate: planRow.end_date,\r\n            isActive: planRow.status === 'active',\r\n            createdAt: planRow.created_at,\r\n          }\r\n        : null;\r\n\r\n      const entitlements = computeEntitlements({\r\n        isAdmin,\r\n        testsTakenThisCycle,\r\n        activePlan: plan\r\n          ? {\r\n              planTier: plan.planTier,\r\n              startDate: plan.startDate,\r\n              endDate: plan.endDate,\r\n              isActive: plan.isActive,\r\n            }\r\n          : null,\r\n        now,\r\n      });\r\n\r\n      return {\r\n        entitlements,\r\n        plan,\r\n        testsTakenThisCycle,\r\n      };\r\n    },\r\n    enabled: !!userId && !!category,\r\n    staleTime: 1000 * 60 * 5, // 5 minutes\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAEA;;;;;AAoBO,SAAS,aAAa,MAAe;;IAC1C,OAAO,IAAA,kNAAQ,EAAe;QAC5B,UAAU;YAAC;YAAc;SAAO;QAChC,OAAO;qCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;gBACjB,IAAI,OAAO;oBACT,MAAM;gBACR;gBACA,OAAO,QAAQ,EAAE;YACnB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;GAlBgB;;QACP,kNAAQ;;;AAmBV,SAAS,iBAAiB,MAAe,EAAE,OAAiB;;IACjE,MAAM,QAAQ,aAAa;IAE3B,MAAM,MAAM,IAAI;IAChB,MAAM,mBACJ,CAAC,CAAC,WACF,CAAC,MAAM,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC,OACvB,KAAK,MAAM,KAAK,YAChB,qLAAsB;YAAE,WAAW,KAAK,UAAU;YAAE,SAAS,KAAK,QAAQ;QAAC,GAAG;IAGlF,OAAO;QACL,GAAG,KAAK;QACR;IACF;AACF;IAfgB;;QACA;;;AAgBT,SAAS,wBACd,MAA0B,EAC1B,QAAqC,EACrC,OAAgB;;IAEhB,OAAO,IAAA,kNAAQ,EAA6B;QAC1C,UAAU;YAAC;YAAyB;YAAQ;YAAU;SAAQ;QAC9D,OAAO;gDAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,CAAC,aAAa,eAAe,GAAG,MAAM,QAAQ,GAAG,CAAC;oBACtD,SACG,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,YAAY,UACf,KAAK,CAAC,YAAY;wBAAE,WAAW;oBAAM,GACrC,KAAK,CAAC;oBACT,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,0BACP,EAAE,CAAC,WAAW;iBAClB;gBAED,IAAI,YAAY,KAAK,EAAE;oBACrB,MAAM,YAAY,KAAK;gBACzB;gBACA,IAAI,eAAe,KAAK,EAAE;oBACxB,MAAM,eAAe,KAAK;gBAC5B;gBAEA,MAAM,UAAU,CAAC,YAAY,IAAI,IAAI,EAAE,CAAC,CAAC,EAAE;gBAE3C,MAAM,MAAM,IAAI;gBAEhB,MAAM,sBAAsB,IAAA,kLAAwB,EAAC;oBACnD,UAAU,CAAC,eAAe,IAAI,IAAI,EAAE,EAAE,GAAG;gFAAC,CAAC,IAAqC,CAAC;gCAC/E,UAAU,EAAE,QAAQ;gCACpB,cAAc,EAAE,YAAY;4BAC9B,CAAC;;oBACD,UAAU;oBACV;gBACF;gBAEA,MAAM,OAA4B,UAC9B;oBACE,IAAI,QAAQ,EAAE;oBACd,QAAQ,QAAQ,OAAO;oBACvB,UAAU,QAAQ,QAAQ;oBAC1B,UAAU,QAAQ,SAAS;oBAC3B,WAAW,QAAQ,UAAU;oBAC7B,SAAS,QAAQ,QAAQ;oBACzB,UAAU,QAAQ,MAAM,KAAK;oBAC7B,WAAW,QAAQ,UAAU;gBAC/B,IACA;gBAEJ,MAAM,eAAe,IAAA,6KAAmB,EAAC;oBACvC;oBACA;oBACA,YAAY,OACR;wBACE,UAAU,KAAK,QAAQ;wBACvB,WAAW,KAAK,SAAS;wBACzB,SAAS,KAAK,OAAO;wBACrB,UAAU,KAAK,QAAQ;oBACzB,IACA;oBACJ;gBACF;gBAEA,OAAO;oBACL;oBACA;oBACA;gBACF;YACF;;QACA,SAAS,CAAC,CAAC,UAAU,CAAC,CAAC;QACvB,WAAW,OAAO,KAAK;IACzB;AACF;IAhFgB;;QAKP,kNAAQ","debugId":null}},
    {"offset": {"line": 1508, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/app/%28pages%29/materials/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useMemo, useEffect } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Navbar } from '@/components/navbar';\r\nimport { GlassCard } from '@/components/ui/glass-card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { motion } from 'framer-motion';\r\nimport { BookOpen, Search, ChevronRight, AlertCircle, Lock, Check, Signpost } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useMaterials, useMaterialByChapterId, type Material, type MaterialImage } from '@/hooks/use-materials';\r\nimport { useTrafficSigns, type TrafficSign } from '@/hooks/use-traffic-signs';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { useGlobalPremium, useUserPlans } from '@/hooks/use-subscriptions';\r\nimport type { LicenseCategory } from '@/types/database';\r\nimport { isPlanCurrentlyActive } from '@/lib/subscriptions';\r\nimport { toast } from 'sonner';\r\n\r\ntype SectionKey = number;\r\n\r\nconst ALL_CATEGORIES: LicenseCategory[] = ['A', 'B', 'C', 'D'];\r\n\r\nconst SECTION_ORDER: SectionKey[] = [\r\n  1,\r\n  2,\r\n  3,\r\n  4,\r\n  5,\r\n  6,\r\n  7,\r\n  8,\r\n  9,\r\n  10,\r\n  11,\r\n  12,\r\n  13,\r\n  36,\r\n];\r\n\r\nexport default function MaterialsPage() {\r\n  const { language, t } = useLanguage();\r\n  const isSq = language === 'sq';\r\n  const searchParams = useSearchParams();\r\n  const { user, isAdmin } = useAuth();\r\n  const { data: userPlans } = useUserPlans(user?.id);\r\n  const allowedCategories = useMemo<LicenseCategory[]>(() => {\r\n    if (isAdmin) {\r\n      return ['A', 'B', 'C', 'D'];\r\n    }\r\n    const now = new Date();\r\n    return (userPlans || [])\r\n      .filter((plan) =>\r\n        plan.status === 'active' &&\r\n        isPlanCurrentlyActive({ startDate: plan.start_date, endDate: plan.end_date }, now),\r\n      )\r\n      .map((plan) => plan.category as LicenseCategory);\r\n  }, [userPlans, isAdmin]);\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState<LicenseCategory | undefined>(undefined);\r\n\r\n  const { data: listData, isLoading: listLoading, error } = useMaterials({\r\n    pageSize: 100, // Fetch more items since they are lightweight\r\n    category: selectedCategory,\r\n    fields: 'id,chapter_id,category,title_en,title_sq,order_index,is_published', // Explicitly exclude content\r\n  });\r\n\r\n  const materialsList = (listData?.materials ?? []) as Material[];\r\n  const { hasAnyActivePlan, isLoading: premiumLoading } = useGlobalPremium(user?.id, isAdmin);\r\n\r\n  const sectionOrder: SectionKey[] = useMemo(() => {\r\n    const chapterIds = Array.from(\r\n      new Set(materialsList.map((m) => m.chapter_id as number))\r\n    ).sort((a, b) => a - b);\r\n    return chapterIds.length > 0 ? chapterIds : SECTION_ORDER;\r\n  }, [materialsList]);\r\n  \r\n  const [selectedSection, setSelectedSection] = useState<SectionKey>(() => {\r\n    const chapterParam = searchParams.get('chapter');\r\n    const fallback = sectionOrder[0] ?? SECTION_ORDER[0];\r\n    if (!chapterParam) return fallback;\r\n\r\n    const chapter = parseInt(chapterParam, 10);\r\n    if (!Number.isNaN(chapter) && (sectionOrder as number[]).includes(chapter)) {\r\n      return chapter as SectionKey;\r\n    }\r\n    return fallback;\r\n  });\r\n\r\n  // Fetch FULL content only for the selected chapter\r\n  const { data: currentMaterial, isLoading: contentLoading } = useMaterialByChapterId(selectedSection);\r\n\r\n  const [search, setSearch] = useState<string>(() => {\r\n    const searchParam = searchParams.get('search') || searchParams.get('q');\r\n    return searchParam || '';\r\n  });\r\n\r\n  const baseContent = useMemo(() => {\r\n    if (!currentMaterial) return null;\r\n    return language === 'sq' ? currentMaterial.content_sq : currentMaterial.content_en;\r\n  }, [currentMaterial, language]);\r\n  \r\n  const filteredSectionOrder = useMemo(() => {\r\n    if (!search.trim()) return sectionOrder;\r\n\r\n    const query = search.toLowerCase();\r\n\r\n    return sectionOrder.filter((id) => {\r\n      const sectionIndex = sectionOrder.indexOf(id);\r\n      const key = `materials.section.${sectionIndex + 1}`;\r\n      let label = t(key);\r\n\r\n      if (!label || label === key) {\r\n        const materialForChapter = materialsList.find((m) => m.chapter_id === id);\r\n        label =\r\n          language === 'sq'\r\n            ? materialForChapter?.title_sq || `Chapter ${id}`\r\n            : materialForChapter?.title_en || `Chapter ${id}`;\r\n      }\r\n\r\n      return label.toLowerCase().includes(query);\r\n    });\r\n  }, [sectionOrder, search, materialsList, language, t]);\r\n\r\n  const renderValue = (value: unknown) => {\r\n    if (typeof value === 'string') {\r\n      return <p className=\"text-sm text-muted-foreground leading-relaxed mb-4\">{value}</p>;\r\n    }\r\n    if (Array.isArray(value)) {\r\n      return (\r\n        <ul className=\"list-disc pl-5 space-y-2 text-sm text-muted-foreground mb-4\">\r\n          {value.map((item, idx) => (\r\n            <li key={idx} className=\"pl-1\">{typeof item === 'string' ? item : String(item)}</li>\r\n          ))}\r\n        </ul>\r\n      );\r\n    }\r\n    if (typeof value === 'object' && value !== null) {\r\n      const entries = Object.entries(value as Record<string, unknown>);\r\n      return (\r\n        <div className=\"space-y-6\">\r\n          {entries.map(([subKey, subValue]) => (\r\n            <div key={subKey} className=\"space-y-2\">\r\n              <h4 className=\"text-base font-semibold text-foreground capitalize flex items-center gap-2\">\r\n                <div className=\"h-1 w-1 rounded-full bg-orange-500\" />\r\n                {subKey.replace(/_/g, ' ')}\r\n              </h4>\r\n              {renderValue(subValue)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const currentSectionContent = (baseContent || {}) as Record<string, unknown>;\r\n  const currentImages = currentMaterial?.images ?? [];\r\n\r\n  const sectionIndex = sectionOrder.indexOf(selectedSection);\r\n  const totalSections = sectionOrder.length;\r\n  const sectionTitleKey = sectionIndex >= 0 ? `materials.section.${sectionIndex + 1}` : '';\r\n  let sectionTitle = sectionTitleKey ? t(sectionTitleKey) : '';\r\n  if (!sectionTitle || sectionTitle === sectionTitleKey) {\r\n    const materialForSelected = materialsList.find((m) => m.chapter_id === selectedSection);\r\n    sectionTitle =\r\n      language === 'sq'\r\n        ? materialForSelected?.title_sq || `Chapter ${selectedSection}`\r\n        : materialForSelected?.title_en || `Chapter ${selectedSection}`;\r\n  }\r\n\r\n  // Try to interpret content as a structured chapter JSON as described in the schema\r\n  const chapter = (currentSectionContent as any)?.chapter as\r\n    | {\r\n        code?: string;\r\n        title?: string;\r\n        description?: string;\r\n        sections?: Array<{\r\n          order?: number;\r\n          title?: string;\r\n          points?: unknown;\r\n        }>;\r\n      }\r\n    | undefined;\r\n\r\n  const chapterSections = Array.isArray(chapter?.sections) ? chapter!.sections : [];\r\n\r\n  if (listLoading || premiumLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-4 py-10 max-w-6xl\">\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n              {/* Sidebar skeleton */}\r\n              <aside className=\"w-full lg:w-80 space-y-4\">\r\n                <GlassCard className=\"p-4 flex items-center gap-3\">\r\n                  <Skeleton className=\"w-10 h-10 rounded-xl\" />\r\n                  <div className=\"flex-1 space-y-2\">\r\n                    <Skeleton className=\"h-4 w-32\" />\r\n                    <Skeleton className=\"h-3 w-40\" />\r\n                  </div>\r\n                </GlassCard>\r\n\r\n                <GlassCard className=\"p-3\">\r\n                  <Skeleton className=\"h-10 w-full rounded-lg\" />\r\n                </GlassCard>\r\n\r\n                <GlassCard className=\"p-2 space-y-2\">\r\n                  {Array.from({ length: 8 }).map((_, idx) => (\r\n                    <Skeleton key={idx} className=\"h-10 w-full rounded-lg\" />\r\n                  ))}\r\n                </GlassCard>\r\n              </aside>\r\n\r\n              {/* Main content skeleton */}\r\n              <main className=\"flex-1\">\r\n                <GlassCard className=\"p-6 md:p-10\">\r\n                  <Skeleton className=\"h-8 w-64 mb-6\" />\r\n                  <div className=\"space-y-4\">\r\n                    {Array.from({ length: 6 }).map((_, idx) => (\r\n                      <Skeleton key={idx} className=\"h-4 w-full\" />\r\n                    ))}\r\n                  </div>\r\n                </GlassCard>\r\n              </main>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAdmin && !premiumLoading && (!hasAnyActivePlan || allowedCategories.length === 0)) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background text-foreground\">\r\n        {/* Background elements */}\r\n        <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl\" />\r\n        <Navbar />\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-4 py-10 max-w-3xl\">\r\n            <GlassCard className=\"p-8 md:p-10 border border-orange-500/30 bg-black/85 text-center relative overflow-hidden\">\r\n              <div className=\"pointer-events-none absolute -top-24 -right-24 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl\" />\r\n              \r\n              <div className=\"relative z-10 flex flex-col items-center\">\r\n                <div className=\"w-16 h-16 rounded-full bg-orange-500/10 flex items-center justify-center mb-6 border border-orange-500/20\">\r\n                  <Lock className=\"w-8 h-8 text-orange-400\" />\r\n                </div>\r\n                \r\n                <h1 className=\"text-3xl font-semibold mb-3 tracking-tight\">\r\n                  {t('materials.premiumRequiredTitle')}\r\n                </h1>\r\n                <p className=\"text-base text-muted-foreground mb-8 max-w-lg mx-auto leading-relaxed\">\r\n                  {t('materials.premiumRequiredDescription')}\r\n                </p>\r\n                \r\n                <div className=\"grid gap-4 text-left max-w-md mx-auto mb-8 w-full\">\r\n                  {[\r\n                    t('materials.premiumBenefitAllChapters'),\r\n                    t('materials.premiumBenefitDeeper'),\r\n                    t('materials.premiumBenefitVisuals')\r\n                  ].map((benefit, i) => (\r\n                    <div key={i} className=\"flex items-start gap-3 p-3 rounded-xl bg-white/5 border border-white/10\">\r\n                      <div className=\"mt-0.5 w-5 h-5 rounded-full bg-orange-500/20 flex items-center justify-center flex-shrink-0\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-orange-400\" />\r\n                      </div>\r\n                      <span className=\"text-sm text-muted-foreground\">{benefit}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row gap-4 w-full max-w-sm\">\r\n                  <Button asChild className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-black font-medium h-11\">\r\n                    <Link href=\"/pricing?category=B\">\r\n                      {t('materials.premiumUpgradeCta')}\r\n                    </Link>\r\n                  </Button>\r\n                  <Button asChild variant=\"outline\" className=\"flex-1 h-11 border-white/10 hover:bg-white/5\">\r\n                    <Link href=\"/dashboard\">\r\n                      {t('auth.backToHome')}\r\n                    </Link>\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </GlassCard>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-4 py-10 max-w-3xl\">\r\n            <GlassCard className=\"p-8 text-center border-red-500/30 bg-black/80\">\r\n              <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n              <p className=\"text-lg font-semibold text-red-400 mb-2\">\r\n                {t('materials.errorLoadFailed')}\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground break-words\">\r\n                {t('error.message')}\r\n              </p>\r\n            </GlassCard>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!materialsList.length) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-4 py-10 max-w-3xl\">\r\n            <GlassCard className=\"p-8 text-center bg-black/80\">\r\n              {!selectedCategory ? (\r\n                <>\r\n                  <BookOpen className=\"w-12 h-12 text-orange-400 mx-auto mb-4\" />\r\n                  <h1 className=\"text-xl font-bold mb-2\">\r\n                    {isSq ? 'Zgjidhni nj kategori' : 'Select a category'}\r\n                  </h1>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {isSq \r\n                      ? 'Prdorni butonat n t majt pr t zgjedhur materialet.' \r\n                      : 'Use the buttons on the left to select materials.'}\r\n                  </p>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <BookOpen className=\"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\r\n                  <h1 className=\"text-xl font-bold mb-2\">{t('materials.emptyTitle')}</h1>\r\n                  <p className=\"text-sm text-muted-foreground\">{t('materials.emptySubtitle')}</p>\r\n                </>\r\n              )}\r\n            </GlassCard>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen bg-background text-foreground overflow-hidden\">\r\n      {/* Background grid */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]\"\r\n      >\r\n        <svg className=\"h-full w-full opacity-[0.06]\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <defs>\r\n            <pattern id=\"materials-grid\" width=\"32\" height=\"32\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M32 0H0V32\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"0.4\" />\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#materials-grid)\" />\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Warm glows & rails */}\r\n      <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl\" />\r\n      <div aria-hidden className=\"pointer-events-none absolute inset-0\">\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent\" />\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent\" />\r\n      </div>\r\n\r\n      <Navbar />\r\n\r\n      <div className=\"pt-32\">\r\n        <div className=\"container mx-auto px-4 py-6 max-w-7xl\">\r\n          <div className=\"flex flex-col lg:flex-row gap-8\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-full lg:w-80 space-y-6\">\r\n              <GlassCard className=\"p-5 flex flex-col gap-4 border border-border/80 bg-black/75 sticky top-32\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center shadow-inner border border-orange-500/20\">\r\n                    <BookOpen className=\"w-6 h-6 text-orange-400\" />\r\n                  </div>\r\n                  <div className=\"space-y-1\">\r\n                    <h1 className=\"text-lg font-semibold tracking-tight\">\r\n                      {t('materials.title')}\r\n                    </h1>\r\n                    <p className=\"text-xs text-muted-foreground leading-tight\">\r\n                      {isSq ? 'Lexo teorin pr t msuar' : 'Read theory to improve'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Category Selector */}\r\n                <div className=\"pt-4 border-t border-white/10\">\r\n                  <p className=\"text-[10px] text-muted-foreground uppercase tracking-wider mb-2 font-medium\">\r\n                    {isSq ? 'Zgjidh Kategorin' : 'Select Category'}\r\n                  </p>\r\n                  <div className=\"grid grid-cols-4 gap-2\">\r\n                    {ALL_CATEGORIES.map((cat) => {\r\n                      const isAllowed = allowedCategories.includes(cat);\r\n                      const isSelected = selectedCategory === cat;\r\n                      \r\n                      return (\r\n                        <button\r\n                          key={cat}\r\n                          onClick={() => {\r\n                            if (isAllowed) {\r\n                              setSelectedCategory(cat);\r\n                              setSelectedSection(SECTION_ORDER[0]); // Reset section\r\n                            } else {\r\n                              toast.error(isSq ? 'Nuk keni qasje n kt kategori' : 'No access to this category', {\r\n                                description: isSq ? 'Ju lutem blini nj plan pr t par materialet.' : 'Please purchase a plan to view materials.'\r\n                              });\r\n                            }\r\n                          }}\r\n                          className={`\r\n                            relative h-10 rounded-lg text-sm font-bold transition-all flex items-center justify-center\r\n                            ${isSelected \r\n                              ? 'bg-orange-500 text-black shadow-[0_0_10px_rgba(249,115,22,0.4)]' \r\n                              : isAllowed \r\n                                ? 'bg-white/10 text-foreground hover:bg-white/20 border border-white/10' \r\n                                : 'bg-black/40 text-muted-foreground/40 border border-white/5 cursor-not-allowed'}\r\n                          `}\r\n                        >\r\n                          {cat}\r\n                          {!isAllowed && (\r\n                            <Lock className=\"w-3 h-3 absolute top-1 right-1 opacity-50\" />\r\n                          )}\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </GlassCard>\r\n\r\n              <div className=\"lg:sticky lg:top-[22rem] space-y-4\">\r\n                <GlassCard className=\"p-3 border border-border/80 bg-black/75\">\r\n                  <div className=\"relative\">\r\n                    <Search className=\"w-4 h-4 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2\" />\r\n                    <Input\r\n                      placeholder={t('materials.searchPlaceholder')}\r\n                      className=\"pl-9 bg-black/50 border-border/60 focus-visible:ring-1 focus-visible:ring-orange-500/50 h-10 text-sm\"\r\n                      value={search}\r\n                      onChange={(e) => setSearch(e.target.value)}\r\n                    />\r\n                  </div>\r\n                </GlassCard>\r\n\r\n                <GlassCard className=\"p-2 space-y-1 border border-border/80 bg-black/75 max-h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar\">\r\n                  {filteredSectionOrder.map((id) => {\r\n                    const isActive = id === selectedSection;\r\n                    const sectionIndex = sectionOrder.indexOf(id);\r\n                    const key = `materials.section.${sectionIndex + 1}`;\r\n                    let label = t(key);\r\n                    if (!label || label === key) {\r\n                      const materialForChapter = materialsList.find((m: Material) => m.chapter_id === id);\r\n                      label =\r\n                        language === 'sq'\r\n                          ? materialForChapter?.title_sq || `Chapter ${id}`\r\n                          : materialForChapter?.title_en || `Chapter ${id}`;\r\n                    }\r\n                    return (\r\n                      <Button\r\n                        key={id}\r\n                        variant={isActive ? 'default' : 'ghost'}\r\n                        className={`w-full justify-start text-sm font-medium flex items-center gap-3 rounded-lg px-3 py-6 transition-all ${\r\n                          isActive\r\n                            ? 'bg-orange-500/10 text-orange-200 border border-orange-500/30 shadow-[0_0_15px_rgba(249,115,22,0.1)]'\r\n                            : 'text-muted-foreground border border-transparent hover:bg-white/5 hover:text-foreground'\r\n                        }`}\r\n                        onClick={() => {\r\n                          setSelectedSection(id);\r\n                          setSearch('');\r\n                          window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                        }}\r\n                      >\r\n                        <div className={`w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold flex-shrink-0 ${\r\n                          isActive ? 'bg-orange-500 text-black' : 'bg-white/10 text-muted-foreground'\r\n                        }`}>\r\n                          {id}\r\n                        </div>\r\n                        <span className=\"truncate text-left line-clamp-2 leading-tight\">{label}</span>\r\n                        {isActive && <ChevronRight className=\"w-4 h-4 ml-auto text-orange-400 flex-shrink-0\" />}\r\n                      </Button>\r\n                    );\r\n                  })}\r\n                </GlassCard>\r\n              </div>\r\n            </aside>\r\n\r\n            {/* Main content */}\r\n            <main className=\"flex-1 min-w-0\">\r\n              <GlassCard className=\"p-6 md:p-10 border border-border/80 bg-black/85 min-h-[80vh]\">\r\n                <div className=\"flex flex-col gap-6 mb-8 pb-8 border-b border-border/40\">\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-between gap-4 flex-wrap\">\r\n                        {sectionIndex >= 0 && (\r\n                        <div className=\"inline-flex items-center gap-2 rounded-full border border-orange-500/30 bg-orange-500/10 px-3 py-1 text-[11px] font-medium text-orange-300\">\r\n                            <span className=\"h-1.5 w-1.5 rounded-full bg-orange-400 animate-pulse\" />\r\n                            <span>\r\n                            {isSq ? 'Kapitulli' : 'Chapter'} {selectedSection}\r\n                            </span>\r\n                        </div>\r\n                        )}\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                            ~5-10 {isSq ? 'min lexim' : 'min read'}\r\n                        </span>\r\n                    </div>\r\n                    \r\n                    <h2 className=\"text-2xl md:text-3xl font-bold tracking-tight text-foreground\">\r\n                      {sectionTitle}\r\n                    </h2>\r\n                    \r\n                    {search ? (\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {t('materials.resultsForPrefix')} &quot;{search}&quot; {t('materials.resultsForSuffix')}\r\n                      </p>\r\n                    ) : (\r\n                      <p className=\"text-sm text-muted-foreground max-w-2xl leading-relaxed\">\r\n                        {isSq \r\n                            ? 'Lexoni me kujdes materialin m posht. Kuptimi i ktyre koncepteve sht thelbsor pr t kaluar provimin.'\r\n                            : 'Read the material carefully. Understanding these concepts is key to passing your exam.'}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Images for this chapter */}\r\n                {currentImages.length > 0 && (\r\n                  <div className=\"grid gap-6 mb-10 md:grid-cols-2\">\r\n                    {currentImages.map((img: MaterialImage) => (\r\n                      <figure\r\n                        key={img.id}\r\n                        className=\"overflow-hidden rounded-xl border border-border/60 bg-black/40 shadow-lg group\"\r\n                      >\r\n                        <div className=\"overflow-hidden\">\r\n                            <img\r\n                            src={img.image_url}\r\n                            alt={\r\n                                language === 'sq'\r\n                                ? img.caption_sq || img.caption_en || sectionTitle\r\n                                : img.caption_en || img.caption_sq || sectionTitle\r\n                            }\r\n                            loading=\"lazy\"\r\n                            className=\"w-full h-56 object-cover transition-transform duration-500 group-hover:scale-105\"\r\n                            />\r\n                        </div>\r\n                        {(img.caption_en || img.caption_sq) && (\r\n                          <figcaption className=\"px-4 py-3 text-xs text-muted-foreground bg-black/60 border-t border-border/40 backdrop-blur-sm\">\r\n                            {language === 'sq'\r\n                              ? img.caption_sq || img.caption_en\r\n                              : img.caption_en || img.caption_sq}\r\n                          </figcaption>\r\n                        )}\r\n                      </figure>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                <motion.div\r\n                  key={selectedSection}\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ duration: 0.3 }}\r\n                  className=\"space-y-8\"\r\n                >\r\n                  {Object.keys(currentSectionContent).length === 0 ? (\r\n                    <div className=\"py-12 text-center\">\r\n                        <p className=\"text-muted-foreground\">\r\n                        {t('materials.noResults')}\r\n                        </p>\r\n                    </div>\r\n                  ) : chapter && chapterSections.length > 0 ? (\r\n                    <div className=\"space-y-8\">\r\n                      <div className=\"space-y-4\">\r\n                        {chapter.title && (\r\n                          <h2 className=\"text-2xl font-semibold tracking-tight text-foreground/90\">\r\n                            {chapter.title}\r\n                          </h2>\r\n                        )}\r\n                        {chapter.description && (\r\n                          <p className=\"text-base text-muted-foreground leading-7\">\r\n                            {chapter.description}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"space-y-8\">\r\n                        {chapterSections.map((section, index) => {\r\n                            const key = section.order ?? index;\r\n                            const pointsRaw = section.points;\r\n                            const pointsArray = Array.isArray(pointsRaw)\r\n                            ? (pointsRaw as unknown[])\r\n                            : typeof pointsRaw === 'string'\r\n                                ? [pointsRaw]\r\n                                : [];\r\n\r\n                            return (\r\n                            <div key={key} className=\"p-6 rounded-2xl bg-white/5 border border-white/10 space-y-4 hover:border-white/20 transition-colors\">\r\n                                {section.title && (\r\n                                <h3 className=\"text-lg font-semibold flex items-center gap-2 text-foreground/90\">\r\n                                    <span className=\"w-1.5 h-1.5 rounded-full bg-orange-500\" />\r\n                                    {section.title}\r\n                                </h3>\r\n                                )}\r\n                                {pointsArray.length > 0 && (\r\n                                <ul className=\"space-y-3\">\r\n                                    {pointsArray.map((p, idx) => (\r\n                                    <li key={idx} className=\"text-sm leading-relaxed text-muted-foreground pl-4 border-l-2 border-white/10\">\r\n                                        {typeof p === 'string' ? p : String(p)}\r\n                                    </li>\r\n                                    ))}\r\n                                </ul>\r\n                                )}\r\n                            </div>\r\n                            );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    Object.entries(currentSectionContent).map(([key, value]) => (\r\n                      <section key={key} className=\"space-y-4\">\r\n                        <h3 className=\"text-xl font-semibold capitalize flex items-center gap-2 pb-2 border-b border-border/40 text-foreground/90\">\r\n                          {key.replace(/_/g, ' ')}\r\n                        </h3>\r\n                        {renderValue(value)}\r\n                      </section>\r\n                    ))\r\n                  )}\r\n                </motion.div>\r\n\r\n                {/* Bottom CTA */}\r\n                <div className=\"mt-12 pt-8 border-t border-border/40 flex justify-end\">\r\n                    <Button asChild className=\"bg-orange-500 hover:bg-orange-600 text-black font-medium px-6\">\r\n                        <Link href=\"/dashboard\">\r\n                            {isSq ? 'Kthehu n Ballin' : 'Back to Dashboard'}\r\n                        </Link>\r\n                    </Button>\r\n                </div>\r\n              </GlassCard>\r\n            </main>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
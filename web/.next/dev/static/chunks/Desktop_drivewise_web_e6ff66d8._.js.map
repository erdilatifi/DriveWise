{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/80 text-card-foreground backdrop-blur-2xl shadow-[0_18px_60px_rgba(0,0,0,0.85)]\",\n      \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.06),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.04),transparent_55%)] before:opacity-70\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mMAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EACX,wJACA,6OACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mMAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mMAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QAAI,KAAK;QAAK,WAAW,IAAA,oJAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mMAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/glass-card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode\r\n  hover?: boolean\r\n}\r\n\r\nexport function GlassCard({ children, className, hover = false, ...props }: GlassCardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl\",\r\n        \"shadow-[0_22px_70px_rgba(0,0,0,0.9)]\",\r\n        \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70\",\r\n        hover && \"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,GAAG,OAAuB;IACxF,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,6FACA,wCACA,6OACA,SAAS,wEACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KAfgB","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport type LabelProps = React.ComponentPropsWithoutRef<\"label\">\n\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, ...props }, ref) => (\n    <label\n      ref={ref}\n      className={cn(\n        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nLabel.displayName = \"Label\"\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,mMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,qNAAC;QACC,KAAK;QACL,WAAW,IAAA,oJAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAIf,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/skeleton.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,+FACA,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/types/database.ts"],"sourcesContent":["// Database types for DriveWise\r\n\r\nexport type LicenseCategory = 'A' | 'B' | 'C' | 'D';\r\nexport type LanguageCode = 'sq' | 'en';\r\n\r\nexport interface Question {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  topic?: string;\r\n  image_url?: string;\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface QuestionTranslation {\r\n  id: string;\r\n  question_id: string;\r\n  language: LanguageCode;\r\n  question_text: string;\r\n  explanation?: string;\r\n}\r\n\r\nexport interface AnswerOption {\r\n  id: string;\r\n  question_id: string;\r\n  option_order: number;\r\n  is_correct: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface AnswerOptionTranslation {\r\n  id: string;\r\n  answer_option_id: string;\r\n  language: LanguageCode;\r\n  option_text: string;\r\n}\r\n\r\nexport interface TestSet {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  name?: string;\r\n  is_random: boolean;\r\n  question_count: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface TestSetQuestion {\r\n  id: string;\r\n  test_set_id: string;\r\n  question_id: string;\r\n  question_order: number;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email?: string;\r\n  full_name?: string;\r\n  preferred_language: LanguageCode;\r\n  role?: 'student' | 'admin';\r\n  is_admin: boolean;\r\n  is_blocked: boolean;\r\n  app_rating?: number; // 1-5 stars, optional\r\n  is_premium?: boolean;\r\n  subscription_id?: string | null;\r\n  subscription_end?: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  test_set_id?: string;\r\n  category: LicenseCategory;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  time_taken_seconds?: number;\r\n  is_assigned: boolean;\r\n  assigned_by?: string;\r\n  started_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TestAttemptAnswer {\r\n  id: string;\r\n  test_attempt_id: string;\r\n  question_id: string;\r\n  selected_answer_id: string;\r\n  is_correct: boolean;\r\n  answered_at: string;\r\n}\r\n\r\nexport interface StudyMaterial {\r\n  id: string;\r\n  category?: string;\r\n  material_type: string;\r\n  order_index?: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface StudyMaterialTranslation {\r\n  id: string;\r\n  study_material_id: string;\r\n  language: LanguageCode;\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface RoadSign {\r\n  id: string;\r\n  sign_code?: string;\r\n  category?: string;\r\n  image_url: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface RoadSignTranslation {\r\n  id: string;\r\n  road_sign_id: string;\r\n  language: LanguageCode;\r\n  name: string;\r\n  description?: string;\r\n}\r\n\r\n// Composite types for queries with joins\r\nexport interface QuestionWithTranslations extends Question {\r\n  translations: QuestionTranslation[];\r\n  answers: AnswerOptionWithTranslations[];\r\n}\r\n\r\nexport interface AnswerOptionWithTranslations extends AnswerOption {\r\n  translations: AnswerOptionTranslation[];\r\n}\r\n\r\nexport interface TestAttemptWithDetails extends TestAttempt {\r\n  answers: TestAttemptAnswerWithQuestion[];\r\n}\r\n\r\nexport interface TestAttemptAnswerWithQuestion extends TestAttemptAnswer {\r\n  question: QuestionWithTranslations;\r\n}\r\n\r\n// Category metadata\r\nexport const CATEGORY_INFO: Record<LicenseCategory, { name: string; description: string }> = {\r\n  A: { name: 'Category A', description: 'Motorcycles' },\r\n  B: { name: 'Category B', description: 'Cars' },\r\n  C: { name: 'Category C', description: 'Trucks' },\r\n  D: { name: 'Category D', description: 'Buses' },\r\n};\r\n\r\n// Hazard Rush Game\r\nexport interface HazardRushRun {\r\n  id: string;\r\n  user_id: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  average_reaction_time: number;\r\n  seed: string;\r\n  signature: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface HazardRushLeaderboardEntry {\r\n  rank: number;\r\n  user_id: string;\r\n  user_name: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  accuracy: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface UserPlan {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Order {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PaymentTransaction {\r\n  id: string;\r\n  order_id: string;\r\n  provider: string;\r\n  provider_status: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  raw_payload: any;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Language metadata\r\nexport const LANGUAGE_INFO: Record<LanguageCode, { name: string; nativeName: string }> = {\r\n  sq: { name: 'Albanian', nativeName: 'Shqip' },\r\n  en: { name: 'English', nativeName: 'English' },\r\n};\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;AAoJxB,MAAM,gBAAgF;IAC3F,GAAG;QAAE,MAAM;QAAc,aAAa;IAAc;IACpD,GAAG;QAAE,MAAM;QAAc,aAAa;IAAO;IAC7C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAS;IAC/C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAQ;AAChD;AA+DO,MAAM,gBAA4E;IACvF,IAAI;QAAE,MAAM;QAAY,YAAY;IAAQ;IAC5C,IAAI;QAAE,MAAM;QAAW,YAAY;IAAU;AAC/C","debugId":null}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/lib/subscriptions.ts"],"sourcesContent":["import type { LicenseCategory } from '@/types/database';\r\n\r\n// Plan identifiers\r\nexport type PlanTier = 'FREE' | 'PLAN_A' | 'PLAN_B' | 'PLAN_C';\r\n\r\nexport type PaidPlanTier = Exclude<PlanTier, 'FREE'>;\r\n\r\nexport interface PlanDefinition {\r\n  id: PaidPlanTier;\r\n  label: string;\r\n  months: number;\r\n  priceEur: number;\r\n  // derived convenience fields\r\n  pricePerMonthEur: number;\r\n  badge?: 'MOST_POPULAR' | 'BEST_VALUE';\r\n  emphasize?: boolean;\r\n}\r\n\r\nexport interface BillingConfig {\r\n  freeTestLimitPerCategory: number;\r\n  paidTestLimitPerCategory: number;\r\n  billingCycleDays: number;\r\n  bestValuePlan: PaidPlanTier;\r\n  plans: Record<PaidPlanTier, PlanDefinition>;\r\n}\r\n\r\n// Centralized billing / pricing configuration.\r\n// Values can be overridden via NEXT_PUBLIC_* env vars without changing code.\r\nconst freeLimit = Number(process.env.NEXT_PUBLIC_FREE_TEST_LIMIT_PER_CATEGORY ?? '3');\r\nconst paidLimit = Number(process.env.NEXT_PUBLIC_PAID_TEST_LIMIT_PER_CATEGORY ?? '9999');\r\nconst cycleDays = Number(process.env.NEXT_PUBLIC_BILLING_CYCLE_DAYS ?? '30');\r\nconst bestValueEnv = process.env.NEXT_PUBLIC_PAYMENT_BEST_VALUE_PLAN as PaidPlanTier | undefined;\r\n\r\nconst rawPlans: Omit<PlanDefinition, 'pricePerMonthEur'>[] = [\r\n  {\r\n    id: 'PLAN_A',\r\n    label: '1 month',\r\n    months: 1,\r\n    priceEur: 3,\r\n  },\r\n  {\r\n    id: 'PLAN_B',\r\n    label: '2 months',\r\n    months: 2,\r\n    priceEur: 6,\r\n  },\r\n  {\r\n    id: 'PLAN_C',\r\n    label: '3 months',\r\n    months: 3,\r\n    priceEur: 8,\r\n    badge: 'BEST_VALUE',\r\n    emphasize: true,\r\n  },\r\n];\r\n\r\nconst plansRecord = rawPlans.reduce<Record<PaidPlanTier, PlanDefinition>>((acc, plan) => {\r\n  const pricePerMonthEur = plan.priceEur / plan.months;\r\n  acc[plan.id] = { ...plan, pricePerMonthEur };\r\n  return acc;\r\n}, {} as Record<PaidPlanTier, PlanDefinition>);\r\n\r\nexport const BILLING_CONFIG: BillingConfig = {\r\n  freeTestLimitPerCategory: freeLimit,\r\n  paidTestLimitPerCategory: paidLimit,\r\n  billingCycleDays: cycleDays,\r\n  bestValuePlan: bestValueEnv ?? 'PLAN_C',\r\n  plans: plansRecord,\r\n};\r\n\r\nexport interface CategoryPlan {\r\n  id: string;\r\n  userId: string;\r\n  category: LicenseCategory;\r\n  planTier: PaidPlanTier;\r\n  startDate: string; // ISO\r\n  endDate: string;   // ISO\r\n  isActive: boolean;\r\n  createdAt: string; // ISO\r\n}\r\n\r\nexport interface Entitlements {\r\n  canAccessTests: boolean;\r\n  canStartNewTest: boolean;\r\n  remainingFreeTests?: number;\r\n  canAccessDecisionTrainer: boolean;\r\n  canAccessStudyMaterial: boolean;\r\n  canReviewTestsInDetail: boolean;\r\n}\r\n\r\nexport interface EntitlementInput {\r\n  isAdmin: boolean;\r\n  testsTakenThisCycle: number;\r\n  activePlan?: Pick<CategoryPlan, 'planTier' | 'startDate' | 'endDate' | 'isActive'> | null;\r\n  now?: Date;\r\n}\r\n\r\nexport function isPlanCurrentlyActive(plan?: { startDate: string; endDate: string } | null, now: Date = new Date()): boolean {\r\n  if (!plan) return false;\r\n  const start = new Date(plan.startDate).getTime();\r\n  const end = new Date(plan.endDate).getTime();\r\n  const ts = now.getTime();\r\n  return ts >= start && ts <= end;\r\n}\r\n\r\nexport function computeEntitlements(input: EntitlementInput): Entitlements {\r\n  const { isAdmin, testsTakenThisCycle, activePlan, now } = input;\r\n\r\n  if (isAdmin) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: true,\r\n      remainingFreeTests: undefined,\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const hasActivePaidPlan = !!activePlan && isPlanCurrentlyActive(\r\n    { startDate: activePlan.startDate, endDate: activePlan.endDate },\r\n    now,\r\n  );\r\n\r\n  if (hasActivePaidPlan) {\r\n    return {\r\n      canAccessTests: true,\r\n      canStartNewTest: testsTakenThisCycle < BILLING_CONFIG.paidTestLimitPerCategory,\r\n      remainingFreeTests: Math.max(\r\n        0,\r\n        BILLING_CONFIG.paidTestLimitPerCategory - testsTakenThisCycle,\r\n      ),\r\n      canAccessDecisionTrainer: true,\r\n      canAccessStudyMaterial: true,\r\n      canReviewTestsInDetail: true,\r\n    };\r\n  }\r\n\r\n  const remainingFree = Math.max(0, BILLING_CONFIG.freeTestLimitPerCategory - testsTakenThisCycle);\r\n\r\n  return {\r\n    canAccessTests: true,\r\n    canStartNewTest: remainingFree > 0,\r\n    remainingFreeTests: remainingFree,\r\n    canAccessDecisionTrainer: false,\r\n    canAccessStudyMaterial: false,\r\n    canReviewTestsInDetail: false,\r\n  };\r\n}\r\n\r\nexport interface CycleUsageInput {\r\n  attempts: { category: string; completed_at: string }[];\r\n  category: LicenseCategory;\r\n  now?: Date;\r\n}\r\n\r\nexport function countTestsInCurrentCycle(input: CycleUsageInput): number {\r\n  const { attempts, category, now } = input;\r\n  const current = now ?? new Date();\r\n  const cycleStart = new Date(current);\r\n  cycleStart.setDate(cycleStart.getDate() - BILLING_CONFIG.billingCycleDays + 1);\r\n  const startTs = cycleStart.getTime();\r\n  const endTs = current.getTime();\r\n\r\n  return attempts.filter((a) => {\r\n    if (a.category !== category) return false;\r\n    const ts = new Date(a.completed_at).getTime();\r\n    return ts >= startTs && ts <= endTs;\r\n  }).length;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AA4ByB;AAFzB,+CAA+C;AAC/C,6EAA6E;AAC7E,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,wCAAwC,IAAI;AACjF,MAAM,YAAY,OAAO,mMAAO,CAAC,GAAG,CAAC,8BAA8B,IAAI;AACvE,MAAM,eAAe,mMAAO,CAAC,GAAG,CAAC,mCAAmC;AAEpE,MAAM,WAAuD;IAC3D;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;IACZ;IACA;QACE,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,UAAU;QACV,OAAO;QACP,WAAW;IACb;CACD;AAED,MAAM,cAAc,SAAS,MAAM,CAAuC,CAAC,KAAK;IAC9E,MAAM,mBAAmB,KAAK,QAAQ,GAAG,KAAK,MAAM;IACpD,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG;QAAE,GAAG,IAAI;QAAE;IAAiB;IAC3C,OAAO;AACT,GAAG,CAAC;AAEG,MAAM,iBAAgC;IAC3C,0BAA0B;IAC1B,0BAA0B;IAC1B,kBAAkB;IAClB,eAAe,gBAAgB;IAC/B,OAAO;AACT;AA6BO,SAAS,sBAAsB,IAAoD,EAAE,MAAY,IAAI,MAAM;IAChH,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,QAAQ,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO;IAC9C,MAAM,MAAM,IAAI,KAAK,KAAK,OAAO,EAAE,OAAO;IAC1C,MAAM,KAAK,IAAI,OAAO;IACtB,OAAO,MAAM,SAAS,MAAM;AAC9B;AAEO,SAAS,oBAAoB,KAAuB;IACzD,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAE,UAAU,EAAE,GAAG,EAAE,GAAG;IAE1D,IAAI,SAAS;QACX,OAAO;YACL,gBAAgB;YAChB,iBAAiB;YACjB,oBAAoB;YACpB,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,oBAAoB,CAAC,CAAC,cAAc,sBACxC;QAAE,WAAW,WAAW,SAAS;QAAE,SAAS,WAAW,OAAO;IAAC,GAC/D;IAGF,IAAI,mBAAmB;QACrB,OAAO;YACL,gBAAgB;YAChB,iBAAiB,sBAAsB,eAAe,wBAAwB;YAC9E,oBAAoB,KAAK,GAAG,CAC1B,GACA,eAAe,wBAAwB,GAAG;YAE5C,0BAA0B;YAC1B,wBAAwB;YACxB,wBAAwB;QAC1B;IACF;IAEA,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,eAAe,wBAAwB,GAAG;IAE5E,OAAO;QACL,gBAAgB;QAChB,iBAAiB,gBAAgB;QACjC,oBAAoB;QACpB,0BAA0B;QAC1B,wBAAwB;QACxB,wBAAwB;IAC1B;AACF;AAQO,SAAS,yBAAyB,KAAsB;IAC7D,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG;IACpC,MAAM,UAAU,OAAO,IAAI;IAC3B,MAAM,aAAa,IAAI,KAAK;IAC5B,WAAW,OAAO,CAAC,WAAW,OAAO,KAAK,eAAe,gBAAgB,GAAG;IAC5E,MAAM,UAAU,WAAW,OAAO;IAClC,MAAM,QAAQ,QAAQ,OAAO;IAE7B,OAAO,SAAS,MAAM,CAAC,CAAC;QACtB,IAAI,EAAE,QAAQ,KAAK,UAAU,OAAO;QACpC,MAAM,KAAK,IAAI,KAAK,EAAE,YAAY,EAAE,OAAO;QAC3C,OAAO,MAAM,WAAW,MAAM;IAChC,GAAG,MAAM;AACX","debugId":null}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-subscriptions.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport type { LicenseCategory, UserPlan as DbUserPlan } from '@/types/database';\r\nimport {\r\n  computeEntitlements,\r\n  countTestsInCurrentCycle,\r\n  isPlanCurrentlyActive,\r\n  type CategoryPlan,\r\n  type Entitlements,\r\n  type PaidPlanTier,\r\n} from '@/lib/subscriptions';\r\n\r\ninterface CategoryEntitlementsResult {\r\n  entitlements: Entitlements;\r\n  plan: CategoryPlan | null;\r\n  testsTakenThisCycle: number;\r\n}\r\n\r\ninterface TestAttemptRowForEntitlements {\r\n  category: LicenseCategory;\r\n  completed_at: string;\r\n}\r\n\r\nexport function useUserPlans(userId?: string) {\r\n  return useQuery<DbUserPlan[]>({\r\n    queryKey: ['user-plans', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      const { data, error } = await supabase\r\n        .from('user_plans')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n      if (error) {\r\n        throw error;\r\n      }\r\n      return data || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\nexport function useGlobalPremium(userId?: string, isAdmin?: boolean) {\r\n  const query = useUserPlans(userId);\r\n\r\n  const now = new Date();\r\n  const hasAnyActivePlan =\r\n    !!isAdmin ||\r\n    (query.data || []).some((plan) =>\r\n      plan.status === 'active' &&\r\n      isPlanCurrentlyActive({ startDate: plan.start_date, endDate: plan.end_date }, now),\r\n    );\r\n\r\n  return {\r\n    ...query,\r\n    hasAnyActivePlan,\r\n  };\r\n}\r\n\r\nexport function useCategoryEntitlements(\r\n  userId: string | undefined,\r\n  category: LicenseCategory | undefined,\r\n  isAdmin: boolean,\r\n) {\r\n  return useQuery<CategoryEntitlementsResult>({\r\n    queryKey: ['category-entitlements', userId, category, isAdmin],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const [plansResult, attemptsResult] = await Promise.all([\r\n        supabase\r\n          .from('user_plans')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .eq('category', category!)\r\n          .order('end_date', { ascending: false })\r\n          .limit(1),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('category, completed_at')\r\n          .eq('user_id', userId!),\r\n      ]);\r\n\r\n      if (plansResult.error) {\r\n        throw plansResult.error;\r\n      }\r\n      if (attemptsResult.error) {\r\n        throw attemptsResult.error;\r\n      }\r\n\r\n      const planRow = (plansResult.data || [])[0] as DbUserPlan | undefined;\r\n\r\n      const now = new Date();\r\n\r\n      const testsTakenThisCycle = countTestsInCurrentCycle({\r\n        attempts: (attemptsResult.data || []).map((a: TestAttemptRowForEntitlements) => ({\r\n          category: a.category,\r\n          completed_at: a.completed_at,\r\n        })),\r\n        category: category!,\r\n        now,\r\n      });\r\n\r\n      const plan: CategoryPlan | null = planRow\r\n        ? {\r\n            id: planRow.id,\r\n            userId: planRow.user_id,\r\n            category: planRow.category,\r\n            planTier: planRow.plan_tier as PaidPlanTier,\r\n            startDate: planRow.start_date,\r\n            endDate: planRow.end_date,\r\n            isActive: planRow.status === 'active',\r\n            createdAt: planRow.created_at,\r\n          }\r\n        : null;\r\n\r\n      const entitlements = computeEntitlements({\r\n        isAdmin,\r\n        testsTakenThisCycle,\r\n        activePlan: plan\r\n          ? {\r\n              planTier: plan.planTier,\r\n              startDate: plan.startDate,\r\n              endDate: plan.endDate,\r\n              isActive: plan.isActive,\r\n            }\r\n          : null,\r\n        now,\r\n      });\r\n\r\n      return {\r\n        entitlements,\r\n        plan,\r\n        testsTakenThisCycle,\r\n      };\r\n    },\r\n    enabled: !!userId && !!category,\r\n    staleTime: 1000 * 60 * 5, // 5 minutes\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAEA;;;;;AAoBO,SAAS,aAAa,MAAe;;IAC1C,OAAO,IAAA,kNAAQ,EAAe;QAC5B,UAAU;YAAC;YAAc;SAAO;QAChC,OAAO;qCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;gBACjB,IAAI,OAAO;oBACT,MAAM;gBACR;gBACA,OAAO,QAAQ,EAAE;YACnB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;GAlBgB;;QACP,kNAAQ;;;AAmBV,SAAS,iBAAiB,MAAe,EAAE,OAAiB;;IACjE,MAAM,QAAQ,aAAa;IAE3B,MAAM,MAAM,IAAI;IAChB,MAAM,mBACJ,CAAC,CAAC,WACF,CAAC,MAAM,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC,OACvB,KAAK,MAAM,KAAK,YAChB,qLAAsB;YAAE,WAAW,KAAK,UAAU;YAAE,SAAS,KAAK,QAAQ;QAAC,GAAG;IAGlF,OAAO;QACL,GAAG,KAAK;QACR;IACF;AACF;IAfgB;;QACA;;;AAgBT,SAAS,wBACd,MAA0B,EAC1B,QAAqC,EACrC,OAAgB;;IAEhB,OAAO,IAAA,kNAAQ,EAA6B;QAC1C,UAAU;YAAC;YAAyB;YAAQ;YAAU;SAAQ;QAC9D,OAAO;gDAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,CAAC,aAAa,eAAe,GAAG,MAAM,QAAQ,GAAG,CAAC;oBACtD,SACG,IAAI,CAAC,cACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,YAAY,UACf,KAAK,CAAC,YAAY;wBAAE,WAAW;oBAAM,GACrC,KAAK,CAAC;oBACT,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,0BACP,EAAE,CAAC,WAAW;iBAClB;gBAED,IAAI,YAAY,KAAK,EAAE;oBACrB,MAAM,YAAY,KAAK;gBACzB;gBACA,IAAI,eAAe,KAAK,EAAE;oBACxB,MAAM,eAAe,KAAK;gBAC5B;gBAEA,MAAM,UAAU,CAAC,YAAY,IAAI,IAAI,EAAE,CAAC,CAAC,EAAE;gBAE3C,MAAM,MAAM,IAAI;gBAEhB,MAAM,sBAAsB,IAAA,kLAAwB,EAAC;oBACnD,UAAU,CAAC,eAAe,IAAI,IAAI,EAAE,EAAE,GAAG;gFAAC,CAAC,IAAqC,CAAC;gCAC/E,UAAU,EAAE,QAAQ;gCACpB,cAAc,EAAE,YAAY;4BAC9B,CAAC;;oBACD,UAAU;oBACV;gBACF;gBAEA,MAAM,OAA4B,UAC9B;oBACE,IAAI,QAAQ,EAAE;oBACd,QAAQ,QAAQ,OAAO;oBACvB,UAAU,QAAQ,QAAQ;oBAC1B,UAAU,QAAQ,SAAS;oBAC3B,WAAW,QAAQ,UAAU;oBAC7B,SAAS,QAAQ,QAAQ;oBACzB,UAAU,QAAQ,MAAM,KAAK;oBAC7B,WAAW,QAAQ,UAAU;gBAC/B,IACA;gBAEJ,MAAM,eAAe,IAAA,6KAAmB,EAAC;oBACvC;oBACA;oBACA,YAAY,OACR;wBACE,UAAU,KAAK,QAAQ;wBACvB,WAAW,KAAK,SAAS;wBACzB,SAAS,KAAK,OAAO;wBACrB,UAAU,KAAK,QAAQ;oBACzB,IACA;oBACJ;gBACF;gBAEA,OAAO;oBACL;oBACA;oBACA;gBACF;YACF;;QACA,SAAS,CAAC,CAAC,UAAU,CAAC,CAAC;QACvB,WAAW,OAAO,KAAK;IACzB;AACF;IAhFgB;;QAKP,kNAAQ","debugId":null}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/app/%28pages%29/test/%5Bcategory%5D/%5BtestNumber%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport type { SupabaseClient } from '@supabase/supabase-js';\nimport dynamic from 'next/dynamic';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { GlassCard } from '@/components/ui/glass-card';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { CATEGORY_INFO, type LicenseCategory } from '@/types/database';\nimport Link from 'next/link';\nimport { ArrowLeft, ArrowRight, CheckCircle, CheckSquare, Lock } from 'lucide-react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { createClient } from '@/utils/supabase/client';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { toast } from 'sonner';\nimport { useLanguage } from '@/contexts/language-context';\nimport { useAuth } from '@/contexts/auth-context';\nimport { useCategoryEntitlements } from '@/hooks/use-subscriptions';\n\n// Test question data structure\ninterface Question {\n  id: string;\n  question_text: string;\n  question_text_en?: string | null;\n  question_text_sq?: string | null;\n  option_a: string;\n  option_a_en?: string | null;\n  option_a_sq?: string | null;\n  option_b: string;\n  option_b_en?: string | null;\n  option_b_sq?: string | null;\n  option_c: string;\n  option_c_en?: string | null;\n  option_c_sq?: string | null;\n  correct_answer: string;\n  correct_answers?: string[]; // Multiple correct answers support\n  image_url?: string;\n  topic?: string | null;\n}\n\n// Lazily load the rating modal to keep the main test bundle small\nconst RatingModal = dynamic(\n  () => import('@/components/rating-modal').then((mod) => mod.RatingModal),\n  {\n    ssr: false,\n  },\n);\n\n// Single browser Supabase client (avoids re-creating in effects)\nconst supabase = createClient();\n\nexport default function TestPage() {\n  const params = useParams();\n  const router = useRouter();\n  const queryClient = useQueryClient();\n  const { t, language } = useLanguage();\n\n  const category = (params.category as string).toUpperCase() as LicenseCategory;\n  const testNumber = params.testNumber as string;\n\n  const isMixedTest = testNumber === 'mixed';\n  const isPersonalizedTest = testNumber === 'personalized';\n\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState<Record<string, string[]>>({});\n  const [showResults, setShowResults] = useState(false);\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [userId, setUserId] = useState<string | null>(null);\n  const [startTime, setStartTime] = useState(Date.now());\n  const [showRatingModal, setShowRatingModal] = useState(false);\n  const [lastTestAttemptId, setLastTestAttemptId] = useState<string | null>(null);\n\n  const { user, isAdmin, loading: authLoading } = useAuth();\n  const { data: entitlementResult } = useCategoryEntitlements(\n    user?.id,\n    category,\n    isAdmin,\n  );\n\n  useEffect(() => {\n    if (authLoading) return;\n\n    if (!user) {\n      router.push('/login');\n      return;\n    }\n\n    const fetchQuestions = async () => {\n      try {\n        setUserId(user.id);\n        setStartTime(Date.now());\n\n        const storageKey = `test_progress_${user.id}_${category}_${testNumber}`;\n        const saved = localStorage.getItem(storageKey);\n        \n        if (saved) {\n          try {\n            const parsed = JSON.parse(saved);\n            // Check if data is less than 24 hours old\n            if (Date.now() - parsed.timestamp < 24 * 60 * 60 * 1000) {\n              console.log('Restoring test progress from local storage');\n              setQuestions(parsed.questions);\n              setAnswers(parsed.answers);\n              setCurrentQuestion(parsed.currentQuestion);\n              setStartTime(parsed.startTime || Date.now());\n              setLoading(false);\n              return;\n            }\n          } catch (e) {\n            console.error('Failed to parse saved test progress', e);\n            localStorage.removeItem(storageKey);\n          }\n        }\n\n        const loadedQuestions = await loadQuestionsForTest({\n          supabase,\n          userId: user.id,\n          category,\n          testNumber,\n        });\n\n        setQuestions(loadedQuestions);\n      } catch (error) {\n        console.error('Error loading questions:', error);\n        toast.error(t('test.loadError'));\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchQuestions();\n  }, [authLoading, user, category, testNumber, router]);\n\n  // Save progress to local storage\n  useEffect(() => {\n    if (!userId || questions.length === 0 || showResults) return;\n\n    const storageKey = `test_progress_${userId}_${category}_${testNumber}`;\n    const data = {\n      questions,\n      answers,\n      currentQuestion,\n      startTime,\n      timestamp: Date.now(),\n    };\n    localStorage.setItem(storageKey, JSON.stringify(data));\n  }, [userId, category, testNumber, questions, answers, currentQuestion, startTime, showResults]);\n\n  const categoryInfo = CATEGORY_INFO[category];\n  const totalQuestions = questions.length;\n  const progress = totalQuestions > 0 ? ((currentQuestion + 1) / totalQuestions) * 100 : 0;\n\n  const answeredCount = questions.reduce((count, q) => {\n    const userAnswer = answers[q.id];\n    return userAnswer && userAnswer.length > 0 ? count + 1 : count;\n  }, 0);\n  const allAnswered = totalQuestions > 0 && answeredCount === totalQuestions;\n\n  const handleAnswer = (value: string) => {\n    if (questions.length === 0) return;\n    const question = questions[currentQuestion];\n    const currentAnswers = answers[question.id] || [];\n    const newAnswers = currentAnswers.includes(value)\n      ? currentAnswers.filter((a) => a !== value)\n      : [...currentAnswers, value];\n    setAnswers({ ...answers, [question.id]: newAnswers });\n  };\n\n  const handleNext = () => {\n    if (currentQuestion < totalQuestions - 1) {\n      setCurrentQuestion((prev) => prev + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion((prev) => prev - 1);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!userId) return;\n\n    try {\n      // Calculate score\n      const score = calculateScore(questions, answers);\n      const timeElapsed = Math.floor((Date.now() - startTime) / 1000);\n\n      // Ensure user profile exists before saving test\n      const {\n        data: existingProfile,\n        error: profileCheckError,\n      } = await supabase\n        .from('user_profiles')\n        .select('id')\n        .eq('id', userId)\n        .maybeSingle();\n\n      if (profileCheckError) {\n        // Silent log for monitoring, but proceed to try insert\n        console.error('Error checking profile:', profileCheckError);\n      }\n\n      if (!existingProfile) {\n        if (user) {\n          const {\n            error: profileError,\n          } = await supabase\n            .from('user_profiles')\n            .insert({\n              id: user.id,\n              email: user.email || '',\n              full_name:\n                user.user_metadata?.full_name ||\n                user.email?.split('@')[0] ||\n                'User',\n            })\n            .select()\n            .single();\n\n          if (profileError) {\n            toast.error(t('test.createProfileError'));\n            setShowResults(true);\n            return;\n          }\n        } else {\n          toast.error(t('auth.loginAgain'));\n          router.push('/login');\n          return;\n        }\n      }\n\n      const {\n        data: testAttempt,\n        error: attemptError,\n      } = await supabase\n        .from('test_attempts')\n        .insert({\n          user_id: userId,\n          category,\n          test_number: testNumber,\n          score: score.correct,\n          total_questions: score.total,\n          percentage: score.percentage,\n          time_taken_seconds: timeElapsed,\n          completed_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n\n      if (attemptError) {\n        toast.error(t('test.saveError'));\n        setShowResults(true);\n        return;\n      }\n\n      setLastTestAttemptId(testAttempt.id);\n\n      // Invalidate cache to show updated results\n      queryClient.invalidateQueries({ queryKey: ['user-test-stats', userId] });\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats', userId] });\n\n      // Check if this is the user's first test\n      const {\n        count: testCount,\n      } = await supabase\n        .from('test_attempts')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', userId);\n\n      // Check if user has already rated the app\n      const {\n        data: userProfile,\n      } = await supabase\n        .from('user_profiles')\n        .select('app_rating')\n        .eq('id', userId)\n        .single();\n\n      const isUserFirstTest = testCount === 1 && !userProfile?.app_rating;\n\n      // Save individual answers\n      if (testAttempt) {\n        const answersToSave = questions.map((q) => {\n          const userAnswer = answers[q.id] || [];\n          const correctAnswers =\n            q.correct_answers && q.correct_answers.length > 0\n              ? q.correct_answers\n              : [q.correct_answer];\n\n          const isCorrect =\n            userAnswer.length === correctAnswers.length &&\n            userAnswer.every((a) => correctAnswers.includes(a));\n\n          const selectedAnswerString =\n            userAnswer.length > 0 ? userAnswer.join(',') : null;\n\n          return {\n            test_attempt_id: testAttempt.id,\n            question_id: q.id,\n            selected_answer: selectedAnswerString,\n            is_correct: isCorrect,\n          };\n        });\n\n        const {\n          error: answersError,\n        } = await supabase\n          .from('test_attempt_answers')\n          .insert(answersToSave)\n          .select();\n\n        if (answersError) {\n          toast.error(t('test.saveDetailsError'));\n        }\n      }\n\n      // Clear local storage\n      const storageKey = `test_progress_${userId}_${category}_${testNumber}`;\n      localStorage.removeItem(storageKey);\n\n      setShowResults(true);\n\n      if (isUserFirstTest) {\n        setTimeout(() => {\n          setShowRatingModal(true);\n        }, 1500);\n      }\n    } catch (error) {\n      console.error('Error submitting test:', error);\n      toast.error(t('test.unexpectedError'));\n      setShowResults(true);\n    }\n  };\n\n  const score = calculateScore(questions, answers);\n  const weakTopics = showResults ? computeWeakTopics(questions, answers) : [];\n\n  if (authLoading || !user) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center px-4\">\n        <Card className=\"max-w-md w-full border border-border/80 bg-card/95 backdrop-blur-xl\">\n          <CardHeader>\n            <CardTitle>Loading</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-col items-center gap-4\">\n              <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n              <p className=\"text-muted-foreground\">\n                {authLoading ? 'Authenticating...' : 'Redirecting...'}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center px-4\">\n        <Card className=\"max-w-3xl w-full mx-auto border-primary/20 bg-card/95 backdrop-blur-xl shadow-xl shadow-primary/5\">\n          <CardHeader>\n            <Skeleton className=\"h-4 w-32 mb-3\" />\n            <Skeleton className=\"h-8 w-3/4\" />\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <Skeleton className=\"h-48 w-full rounded-xl\" />\n            <div className=\"space-y-3\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <div key={i} className=\"flex items-center gap-3\">\n                  <Skeleton className=\"h-5 w-5 rounded-md\" />\n                  <Skeleton className=\"h-4 flex-1\" />\n                </div>\n              ))}\n            </div>\n            <div className=\"flex gap-3\">\n              <Skeleton className=\"h-10 flex-1\" />\n              <Skeleton className=\"h-10 flex-1\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (questions.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Card className=\"max-w-md\">\n          <CardHeader>\n            <CardTitle>{t('test.noQuestionsTitle')}</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground mb-4\">\n              {t('test.noQuestionsDescription')}\n            </p>\n            <Button asChild>\n              <Link href={`/category/${category.toLowerCase()}`}>\n                {t('test.backToTests')}\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (\n    !isAdmin &&\n    entitlementResult &&\n    !entitlementResult.entitlements.canStartNewTest &&\n    !showResults\n  ) {\n    const used = entitlementResult.testsTakenThisCycle;\n    const remaining = entitlementResult.entitlements.remainingFreeTests ?? 0;\n    const total = used + remaining;\n    const isSq = language === 'sq';\n\n    return (\n      <div className=\"min-h-screen bg-background text-foreground\">\n        {/* Background elements */}\n        <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl\" />\n        \n        <div className=\"flex items-center justify-center min-h-screen p-4\">\n          <GlassCard className=\"w-full max-w-2xl p-8 md:p-10 border border-orange-500/30 bg-black/85 text-center relative overflow-hidden\">\n            <div className=\"pointer-events-none absolute -top-24 -right-24 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl\" />\n            \n            <div className=\"relative z-10 flex flex-col items-center\">\n              <div className=\"w-16 h-16 rounded-full bg-orange-500/10 flex items-center justify-center mb-6 border border-orange-500/20\">\n                <Lock className=\"w-8 h-8 text-orange-400\" />\n              </div>\n              \n              <h1 className=\"text-3xl font-semibold mb-3 tracking-tight\">\n                {t('test.limitReachedTitle') || 'Free test limit reached'}\n              </h1>\n              <p className=\"text-base text-muted-foreground mb-8 max-w-lg mx-auto leading-relaxed\">\n                {t('test.limitReachedDescription') ||\n                  `You have used ${used}/${total} free tests for ${\n                    CATEGORY_INFO[category].name\n                  } this cycle.`}\n              </p>\n              \n              <div className=\"grid gap-4 text-left max-w-md mx-auto mb-8 w-full\">\n                {[\n                  t('test.unlimitedTestsBenefit'),\n                  t('test.fullReviewBenefit'),\n                  t('test.trainerUnlockedBenefit')\n                ].map((benefit, i) => (\n                  <div key={i} className=\"flex items-start gap-3 p-3 rounded-xl bg-white/5 border border-white/10\">\n                    <div className=\"mt-0.5 w-5 h-5 rounded-full bg-orange-500/20 flex items-center justify-center flex-shrink-0\">\n                      <div className=\"w-2 h-2 rounded-full bg-orange-400\" />\n                    </div>\n                    <span className=\"text-sm text-muted-foreground\">{benefit}</span>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"flex flex-col sm:flex-row gap-4 w-full max-w-sm\">\n                <Button asChild className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-black font-medium h-11\">\n                  <Link href={`/pricing?category=${category}`}>\n                    {t('test.upgradeCta') || 'See plans'}\n                  </Link>\n                </Button>\n                <Button asChild variant=\"outline\" className=\"flex-1 h-11 border-white/10 hover:bg-white/5\">\n                  <Link href={`/category/${category.toLowerCase()}`}>\n                    {t('test.backToTests')}\n                  </Link>\n                </Button>\n              </div>\n            </div>\n          </GlassCard>\n        </div>\n      </div>\n    );\n  }\n\n  if (showResults) {\n    const passed = score.percentage >= 80;\n\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <header className=\"border-b border-border/40 bg-card/50 backdrop-blur-sm\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <Button variant=\"ghost\" asChild>\n              <Link href={`/category/${category.toLowerCase()}`}>\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                {t('test.backToTests')}\n              </Link>\n            </Button>\n          </div>\n        </header>\n\n        <div className=\"container mx-auto px-4 py-16\">\n          <Card className=\"max-w-2xl mx-auto border border-border/80 bg-black/80 backdrop-blur-xl shadow-[0_30px_100px_rgba(0,0,0,0.9)]\">\n            <CardHeader className=\"text-center space-y-6\">\n              <div className=\"relative mx-auto w-24 h-24\">\n                <div\n                  className={`absolute inset-0 blur-2xl rounded-full ${\n                    passed ? 'bg-primary/30' : 'bg-destructive/30'\n                  }`}\n                />\n                <div\n                  className={`relative w-24 h-24 rounded-2xl flex items-center justify-center ${\n                    passed\n                      ? 'bg-gradient-to-br from-primary/20 to-primary/10 border-2 border-primary/30'\n                      : 'bg-gradient-to-br from-destructive/20 to-destructive/10 border-2 border-destructive/30'\n                  }`}\n                >\n                  <CheckCircle\n                    className={`w-14 h-14 ${\n                      passed ? 'text-primary' : 'text-destructive'\n                    }`}\n                  />\n                </div>\n              </div>\n              <div>\n                <CardTitle className=\"text-4xl font-bold mb-2\">\n                  {passed ? t('test.congratulations') : t('test.keepPracticing')}\n                </CardTitle>\n                <p className=\"text-muted-foreground text-lg\">\n                  {categoryInfo.name} -{' '}\n                  {testNumber === 'mixed'\n                    ? t('test.mixedName')\n                    : testNumber === 'personalized'\n                    ? t('test.personalizedName')\n                    : `${t('test.test')} ${testNumber}`}\n                </p>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-8\">\n              <div className=\"text-center\">\n                <div\n                  className={`text-7xl font-bold mb-3 ${\n                    passed ? 'text-primary' : 'text-destructive'\n                  }`}\n                >\n                  {score.percentage}%\n                </div>\n                <p className=\"text-muted-foreground text-lg\">\n                  {score.correct} {t('test.of')} {score.total}{' '}\n                  {t('test.correctAnswers')}\n                </p>\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between text-sm font-medium\">\n                  <span>{t('test.passingScore')}: 80%</span>\n                  <span\n                    className={passed ? 'text-primary' : 'text-destructive'}\n                  >\n                    {passed\n                      ? `✓ ${t('test.passed')}`\n                      : `✗ ${t('test.failed')}`}\n                  </span>\n                </div>\n                <div className=\"w-full bg-secondary rounded-full h-3 overflow-hidden\">\n                  <div\n                    className={`h-3 rounded-full transition-all ${\n                      passed\n                        ? 'bg-gradient-to-r from-primary to-primary/80'\n                        : 'bg-gradient-to-r from-destructive to-destructive/80'\n                    }`}\n                    style={{ width: `${score.percentage}%` }}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"border rounded-lg p-4 bg-muted/40\">\n                  <h3 className=\"text-sm font-semibold mb-1\">\n                    {t('test.nextStepsTitle')}\n                  </h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {passed ? (\n                      isMixedTest || isPersonalizedTest ? (\n                        t('test.nextStepsPassedMixedOrPersonalized')\n                      ) : (\n                        t('test.nextStepsPassedStandard')\n                      )\n                    ) : isPersonalizedTest ? (\n                      t('test.nextStepsFailedPersonalized')\n                    ) : (\n                      t('test.nextStepsFailedStandard')\n                    )}\n                  </p>\n                  {weakTopics.length > 0 && (\n                    <>\n                      <p className=\"text-xs text-amber-500 mt-2\">\n                        {t('test.weakTopicsInThisTest')}\n                        {': '}\n                        {weakTopics.map((tTopic, idx) => (\n                          <span key={tTopic.topic}>\n                            {idx > 0 && ', '}\n                            {tTopic.topic}\n                          </span>\n                        ))}\n                      </p>\n\n                      <div className=\"mt-3 flex flex-wrap gap-2\">\n                        {weakTopics.map((tTopic) => {\n                          const query = encodeURIComponent(tTopic.topic);\n                          return (\n                            <Button\n                              key={tTopic.topic}\n                              size=\"sm\"\n                              variant=\"outline\"\n                              className=\"text-xs px-3 py-1\"\n                              asChild\n                            >\n                              <Link href={`/materials?search=${query}`}>\n                                {t('materials.title')}\n                              </Link>\n                            </Button>\n                          );\n                        })}\n                      </div>\n                    </>\n                  )}\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  <Button variant=\"outline\" className=\"flex-1\" asChild>\n                    <Link href={`/category/${category.toLowerCase()}`}>\n                      {t('test.backToTests')}\n                    </Link>\n                  </Button>\n\n                  {lastTestAttemptId && (\n                    <Button className=\"flex-1\" variant=\"secondary\" asChild>\n                      <Link href={`/history/${lastTestAttemptId}`}>\n                        {t('test.reviewTest')}\n                      </Link>\n                    </Button>\n                  )}\n\n                  <Button\n                    className=\"flex-1\"\n                    onClick={async () => {\n                      if (!userId) return;\n                      try {\n                        setLoading(true);\n                        setShowResults(false);\n                        setAnswers({});\n                        setCurrentQuestion(0);\n                        setLastTestAttemptId(null);\n                        setShowRatingModal(false);\n                        setStartTime(Date.now());\n                        const reloaded = await loadQuestionsForTest({\n                          supabase,\n                          userId,\n                          category,\n                          testNumber,\n                        });\n                        setQuestions(reloaded);\n                      } catch (error) {\n                        console.error('Error reloading test:', error);\n                        toast.error('Could not restart test. Please try again.');\n                      } finally {\n                        setLoading(false);\n                      }\n                    }}\n                  >\n                    {t('test.retakeTest')}\n                  </Button>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-3\">\n                  {!isPersonalizedTest && (\n                    <Button variant=\"outline\" className=\"flex-1\" asChild>\n                      <Link href={`/test/${category.toLowerCase()}/personalized`}>\n                        {t('test.practiceWeakPointsCta')}\n                      </Link>\n                    </Button>\n                  )}\n\n                  {!isMixedTest && (\n                    <Button variant=\"outline\" className=\"flex-1\" asChild>\n                      <Link href={`/test/${category.toLowerCase()}/mixed`}>\n                        {t('test.mixedTestCta')}\n                      </Link>\n                    </Button>\n                  )}\n\n                  <Button variant=\"outline\" className=\"flex-1\" asChild>\n                    <Link href=\"/decision-trainer\">\n                      {t('test.decisionTrainerCta')}\n                    </Link>\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {userId && (\n          <RatingModal\n            open={showRatingModal}\n            onClose={() => setShowRatingModal(false)}\n            userId={userId}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const question = questions[currentQuestion];\n\n  if (!question) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center px-4\">\n        <Card className=\"max-w-md w-full border border-border/80 bg-card/95 backdrop-blur-xl\">\n          <CardHeader>\n            <CardTitle>{t('test.noQuestionsTitle')}</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground mb-4\">\n              {t('test.noQuestionsDescription')}\n            </p>\n            <Button asChild>\n              <Link href={`/category/${category.toLowerCase()}`}>\n                {t('test.backToTests')}\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const questionText =\n    language === 'en'\n      ? question.question_text_en || question.question_text\n      : question.question_text_sq || question.question_text;\n  const currentAnswer = answers[question.id] || [];\n  const topicQuery = question.topic ? encodeURIComponent(question.topic) : '';\n\n  const options = [\n    {\n      id: 'A',\n      text:\n        language === 'en'\n          ? question.option_a_en || question.option_a\n          : question.option_a_sq || question.option_a,\n    },\n    {\n      id: 'B',\n      text:\n        language === 'en'\n          ? question.option_b_en || question.option_b\n          : question.option_b_sq || question.option_b,\n    },\n    {\n      id: 'C',\n      text:\n        language === 'en'\n          ? question.option_c_en || question.option_c\n          : question.option_c_sq || question.option_c,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b border-border/40 bg-card/50 backdrop-blur-sm sticky top-0 z-50\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <Button variant=\"ghost\" asChild size=\"sm\">\n              <Link href={`/category/${category.toLowerCase()}`}>\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                {t('test.exitTest')}\n              </Link>\n            </Button>\n            <div className=\"text-sm font-semibold px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-primary\">\n              {t('test.question')} {currentQuestion + 1} {t('test.of')}{' '}\n              {totalQuestions}\n            </div>\n          </div>\n          <div className=\"w-full bg-secondary rounded-full h-2 overflow-hidden\">\n            <div\n              className=\"bg-gradient-to-r from-primary to-primary/80 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Question */}\n      <div className=\"container mx-auto px-4 py-8\">\n        <Card\n          className={`${\n            question.image_url ? 'max-w-6xl' : 'max-w-3xl'\n          } mx-auto border border-border/80 bg-black/80 backdrop-blur-xl shadow-[0_24px_80px_rgba(0,0,0,0.85)]`}\n        >\n          <CardHeader>\n            <div className=\"text-sm text-primary font-medium mb-3\">\n              {categoryInfo.name} -{' '}\n              {testNumber === 'mixed'\n                ? t('test.mixedName')\n                : testNumber === 'personalized'\n                ? t('test.personalizedName')\n                : `${t('test.test')} ${testNumber}`}\n            </div>\n            <CardTitle className=\"text-2xl md:text-3xl\">\n              {questionText}\n            </CardTitle>\n            {question.topic && topicQuery && (\n              <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                <span className=\"text-xs text-muted-foreground\">\n                  {question.topic}\n                </span>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"h-7 px-2 text-[11px]\"\n                  asChild\n                >\n                  <Link href={`/materials?search=${topicQuery}`}>\n                    {t('materials.title')}\n                  </Link>\n                </Button>\n              </div>\n            )}\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Side-by-side layout when image exists */}\n            <div\n              className={\n                question.image_url\n                  ? 'grid grid-cols-1 lg:grid-cols-2 gap-6'\n                  : ''\n              }\n            >\n              {/* Image Section */}\n              {question.image_url && (\n                <div className=\"flex flex-col\">\n                  <div className=\"relative rounded-xl overflow-hidden border-2 border-border shadow-lg\">\n                    <img\n                      src={question.image_url}\n                      alt={t('test.questionIllustration')}\n                      className=\"w-full h-auto object-contain bg-muted/30\"\n                      style={{ maxHeight: '400px' }}\n                    />\n                  </div>\n                  <p className=\"text-xs text-muted-foreground text-center mt-2\">\n                    {t('test.questionImage')}\n                  </p>\n                </div>\n              )}\n\n              {/* Options Section - Always use checkboxes for multiple selection */}\n              <div className=\"flex flex-col justify-center\">\n                <div className=\"space-y-3\">\n                  {options.map((option) => {\n                    const isSelected = currentAnswer.includes(option.id);\n                    return (\n                      <div\n                        key={option.id}\n                        className={`flex items-center gap-3 p-4 md:p-5 rounded-xl border transition-colors cursor-pointer ${\n                          isSelected\n                            ? 'border-primary/70 bg-primary/10 shadow-[0_18px_50px_rgba(0,0,0,0.9)]'\n                            : 'border-border/70 bg-black/60 hover:border-primary/50 hover:bg-black/80'\n                        }`}\n                        onClick={() => handleAnswer(option.id)}\n                      >\n                        <div\n                          className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center ${\n                            isSelected\n                              ? 'border-primary bg-primary text-primary-foreground'\n                              : 'border-border bg-black/60'\n                          }`}\n                        >\n                          {isSelected && (\n                            <CheckSquare className=\"w-3.5 h-3.5\" />\n                          )}\n                        </div>\n                        <Label className=\"cursor-pointer flex-1 font-medium\">\n                          <span className=\"font-semibold mr-2\">\n                            {option.id}.\n                          </span>\n                          {option.text}\n                        </Label>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={handlePrevious}\n                disabled={currentQuestion === 0}\n                className=\"flex-1\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                {t('test.previous')}\n              </Button>\n              {currentQuestion === totalQuestions - 1 ? (\n                <Button\n                  onClick={handleSubmit}\n                  disabled={!allAnswered}\n                  className=\"flex-1\"\n                >\n                  {t('test.submitTest')}\n                  <CheckCircle className=\"w-4 h-4 ml-2\" />\n                </Button>\n              ) : (\n                <Button\n                  onClick={handleNext}\n                  disabled={currentAnswer.length === 0}\n                  className=\"flex-1\"\n                >\n                  {t('test.next')}\n                  <ArrowRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              )}\n            </div>\n\n            {/* Question Navigator - Smart Pagination */}\n            <div className=\"border-t pt-3\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <p className=\"text-xs text-muted-foreground\">\n                  {t('test.question')} {currentQuestion + 1} {t('test.of')}{' '}\n                  {totalQuestions}\n                </p>\n                <div className=\"flex items-center gap-1\">\n                  <span\n                    className={`w-2 h-2 rounded-full ${\n                      currentAnswer.length > 0 ? 'bg-primary' : 'bg-secondary'\n                    }`}\n                  />\n                  <span className=\"text-xs text-muted-foreground\">\n                    {answeredCount}/{totalQuestions}{' '}\n                    {t('test.answeredLabel')}\n                  </span>\n                </div>\n              </div>\n\n              {/* Compact scrollable navigation */}\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() =>\n                    setCurrentQuestion(Math.max(0, currentQuestion - 5))\n                  }\n                  disabled={currentQuestion === 0}\n                  className=\"p-1 rounded hover:bg-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <ArrowLeft className=\"w-3 h-3\" />\n                </button>\n\n                <div className=\"flex-1 overflow-x-auto scrollbar-hide\">\n                  <div className=\"flex gap-1\">\n                    {questions.map((q, idx) => {\n                      const distance = Math.abs(idx - currentQuestion);\n                      if (\n                        distance > 4 &&\n                        idx !== 0 &&\n                        idx !== totalQuestions - 1\n                      )\n                        return null;\n\n                      if (distance === 5) {\n                        return (\n                          <span\n                            key={`ellipsis-${idx}`}\n                            className=\"px-1 text-xs text-muted-foreground\"\n                          >\n                            ...\n                          </span>\n                        );\n                      }\n\n                      const answeredForQ =\n                        answers[q.id] && answers[q.id].length > 0;\n\n                      return (\n                        <button\n                          key={q.id}\n                          onClick={() => setCurrentQuestion(idx)}\n                          className={`min-w-[28px] h-7 px-2 rounded text-xs font-medium transition-colors whitespace-nowrap ${\n                            idx === currentQuestion\n                              ? 'bg-primary text-primary-foreground'\n                              : answeredForQ\n                              ? 'bg-primary/20 text-primary'\n                              : 'bg-secondary hover:bg-secondary/80'\n                          }`}\n                        >\n                          {idx + 1}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n\n                <button\n                  onClick={() =>\n                    setCurrentQuestion(\n                      Math.min(totalQuestions - 1, currentQuestion + 5),\n                    )\n                  }\n                  disabled={currentQuestion === totalQuestions - 1}\n                  className=\"p-1 rounded hover:bg-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <ArrowRight className=\"w-3 h-3\" />\n                </button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\n/* Helpers */\n\nfunction shuffleArray<T>(items: T[]): T[] {\n  return [...items].sort(() => 0.5 - Math.random());\n}\n\nasync function getPersonalizedQuestions({\n  supabase,\n  userId,\n  category,\n}: {\n  supabase: SupabaseClient;\n  userId: string;\n  category: LicenseCategory;\n}): Promise<Question[]> {\n  const { data: testAttempts, error: attemptsError } = await supabase\n    .from('test_attempts')\n    .select('id')\n    .eq('user_id', userId)\n    .eq('category', category);\n\n  if (attemptsError) {\n    throw new Error(`Error fetching test attempts: ${attemptsError.message}`);\n  }\n\n  const testAttemptIds = testAttempts?.map((t) => t.id) || [];\n  if (testAttemptIds.length === 0) return [];\n\n  const { data: wrongAnswers, error: answersError } = await supabase\n    .from('test_attempt_answers')\n    .select('question_id')\n    .eq('is_correct', false)\n    .in('test_attempt_id', testAttemptIds);\n\n  if (answersError) {\n    throw new Error(`Error fetching wrong answers: ${answersError.message}`);\n  }\n\n  const wrongQuestionIds = [\n    ...new Set(wrongAnswers?.map((a) => a.question_id) || []),\n  ];\n  if (wrongQuestionIds.length === 0) return [];\n\n  const { data: wrongQuestions, error: questionsError } = await supabase\n    .from('admin_questions')\n    .select('*')\n    .in('id', wrongQuestionIds)\n    .eq('category', category);\n\n  if (questionsError) {\n    throw new Error(`Error fetching questions: ${questionsError.message}`);\n  }\n\n  let personalizedQuestions: Question[] = (wrongQuestions || []) as Question[];\n\n  if (personalizedQuestions.length < 10) {\n    const { data: allQuestions } = await supabase\n      .from('admin_questions')\n      .select('*')\n      .eq('category', category);\n\n    if (allQuestions && allQuestions.length > 0) {\n      const existingIds = new Set(personalizedQuestions.map((q) => q.id));\n      const availableQuestions = (allQuestions as Question[]).filter(\n        (q) => !existingIds.has(q.id),\n      );\n      const shuffled = shuffleArray(availableQuestions);\n      const needed = 10 - personalizedQuestions.length;\n      personalizedQuestions = [\n        ...personalizedQuestions,\n        ...shuffled.slice(0, Math.max(0, needed)),\n      ];\n    }\n  }\n\n  return shuffleArray(personalizedQuestions).slice(0, 10);\n}\n\nasync function getMixedQuestions({\n  supabase,\n  category,\n}: {\n  supabase: SupabaseClient;\n  category: LicenseCategory;\n}): Promise<Question[]> {\n  const { data, error } = await supabase\n    .from('admin_questions')\n    .select('*')\n    .eq('category', category);\n\n  if (error) {\n    throw new Error(`Error fetching mixed questions: ${error.message}`);\n  }\n\n  if (!data || data.length === 0) {\n    return [];\n  }\n\n  const shuffled = shuffleArray(data as Question[]);\n  return shuffled.slice(0, Math.min(10, shuffled.length));\n}\n\nasync function getFixedTestQuestions({\n  supabase,\n  category,\n  testNumber,\n}: {\n  supabase: SupabaseClient;\n  category: LicenseCategory;\n  testNumber: string;\n}): Promise<Question[]> {\n  const parsedNumber = parseInt(testNumber, 10);\n  if (Number.isNaN(parsedNumber)) {\n    throw new Error('Invalid test number');\n  }\n\n  const { data, error } = await supabase\n    .from('admin_questions')\n    .select('*')\n    .eq('category', category)\n    .eq('test_number', parsedNumber);\n\n  if (error) {\n    throw new Error(`Error fetching fixed test questions: ${error.message}`);\n  }\n\n  if (!data || data.length === 0) {\n    return [];\n  }\n\n  return data as Question[];\n}\n\nasync function loadQuestionsForTest({\n  supabase,\n  userId,\n  category,\n  testNumber,\n}: {\n  supabase: SupabaseClient;\n  userId: string;\n  category: LicenseCategory;\n  testNumber: string;\n}): Promise<Question[]> {\n  if (testNumber === 'personalized') {\n    const personalized = await getPersonalizedQuestions({\n      supabase,\n      userId,\n      category,\n    });\n    if (personalized.length > 0) return personalized;\n    return getMixedQuestions({ supabase, category });\n  }\n\n  if (testNumber === 'mixed') {\n    return getMixedQuestions({ supabase, category });\n  }\n\n  return getFixedTestQuestions({ supabase, category, testNumber });\n}\n\nfunction calculateScore(\n  questions: Question[],\n  answers: Record<string, string[]>,\n) {\n  const totalQuestions = questions.length;\n  let correct = 0;\n\n  questions.forEach((q) => {\n    const userAnswer = answers[q.id] || [];\n    const correctAnswers =\n      q.correct_answers && q.correct_answers.length > 0\n        ? q.correct_answers\n        : [q.correct_answer];\n\n    const isCorrect =\n      userAnswer.length === correctAnswers.length &&\n      userAnswer.every((a) => correctAnswers.includes(a));\n\n    if (isCorrect) correct += 1;\n  });\n\n  return {\n    correct,\n    total: totalQuestions,\n    percentage:\n      totalQuestions > 0\n        ? Math.round((correct / totalQuestions) * 100)\n        : 0,\n  };\n}\n\nfunction computeWeakTopics(\n  questions: Question[],\n  answers: Record<string, string[]>,\n) {\n  const topicStatsMap: Record<string, { total: number; correct: number }> = {};\n\n  questions.forEach((q) => {\n    const topic = q.topic;\n    if (!topic) return;\n\n    if (!topicStatsMap[topic]) {\n      topicStatsMap[topic] = { total: 0, correct: 0 };\n    }\n\n    const userAnswer = answers[q.id] || [];\n    const correctAnswers =\n      q.correct_answers && q.correct_answers.length > 0\n        ? q.correct_answers\n        : [q.correct_answer];\n\n    const isCorrect =\n      userAnswer.length === correctAnswers.length &&\n      userAnswer.every((a) => correctAnswers.includes(a));\n\n    topicStatsMap[topic].total += 1;\n    if (isCorrect) {\n      topicStatsMap[topic].correct += 1;\n    }\n  });\n\n  const topicStats = Object.entries(topicStatsMap)\n    .map(([topic, stats]) => {\n      const accuracy =\n        stats.total > 0 ? stats.correct / stats.total : 0;\n      return {\n        topic,\n        total: stats.total,\n        correct: stats.correct,\n        accuracy,\n      };\n    })\n    .sort((a, b) => a.accuracy - b.accuracy);\n\n  return topicStats.filter((t) => t.total >= 2 && t.accuracy < 0.8).slice(0, 3);\n}"],"names":[],"mappings":"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","debugId":null}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/glass-card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode\r\n  hover?: boolean\r\n}\r\n\r\nexport function GlassCard({ children, className, hover = false, ...props }: GlassCardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl\",\r\n        \"shadow-[0_22px_70px_rgba(0,0,0,0.9)]\",\r\n        \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70\",\r\n        hover && \"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,GAAG,OAAuB;IACxF,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,6FACA,wCACA,6OACA,SAAS,wEACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KAfgB","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/skeleton.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,+FACA,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/types/database.ts"],"sourcesContent":["// Database types for DriveWise\r\n\r\nexport type LicenseCategory = 'A' | 'B' | 'C' | 'D';\r\nexport type LanguageCode = 'sq' | 'en';\r\n\r\nexport interface Question {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  topic?: string;\r\n  image_url?: string;\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface QuestionTranslation {\r\n  id: string;\r\n  question_id: string;\r\n  language: LanguageCode;\r\n  question_text: string;\r\n  explanation?: string;\r\n}\r\n\r\nexport interface AnswerOption {\r\n  id: string;\r\n  question_id: string;\r\n  option_order: number;\r\n  is_correct: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface AnswerOptionTranslation {\r\n  id: string;\r\n  answer_option_id: string;\r\n  language: LanguageCode;\r\n  option_text: string;\r\n}\r\n\r\nexport interface TestSet {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  name?: string;\r\n  is_random: boolean;\r\n  question_count: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface TestSetQuestion {\r\n  id: string;\r\n  test_set_id: string;\r\n  question_id: string;\r\n  question_order: number;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email?: string;\r\n  full_name?: string;\r\n  preferred_language: LanguageCode;\r\n  role?: 'student' | 'admin';\r\n  is_admin: boolean;\r\n  is_blocked: boolean;\r\n  app_rating?: number; // 1-5 stars, optional\r\n  is_premium?: boolean;\r\n  subscription_id?: string | null;\r\n  subscription_end?: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  test_set_id?: string;\r\n  category: LicenseCategory;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  time_taken_seconds?: number;\r\n  is_assigned: boolean;\r\n  assigned_by?: string;\r\n  started_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TestAttemptAnswer {\r\n  id: string;\r\n  test_attempt_id: string;\r\n  question_id: string;\r\n  selected_answer_id: string;\r\n  is_correct: boolean;\r\n  answered_at: string;\r\n}\r\n\r\nexport interface StudyMaterial {\r\n  id: string;\r\n  category?: string;\r\n  material_type: string;\r\n  order_index?: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface StudyMaterialTranslation {\r\n  id: string;\r\n  study_material_id: string;\r\n  language: LanguageCode;\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface RoadSign {\r\n  id: string;\r\n  sign_code?: string;\r\n  category?: string;\r\n  image_url: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface RoadSignTranslation {\r\n  id: string;\r\n  road_sign_id: string;\r\n  language: LanguageCode;\r\n  name: string;\r\n  description?: string;\r\n}\r\n\r\n// Composite types for queries with joins\r\nexport interface QuestionWithTranslations extends Question {\r\n  translations: QuestionTranslation[];\r\n  answers: AnswerOptionWithTranslations[];\r\n}\r\n\r\nexport interface AnswerOptionWithTranslations extends AnswerOption {\r\n  translations: AnswerOptionTranslation[];\r\n}\r\n\r\nexport interface TestAttemptWithDetails extends TestAttempt {\r\n  answers: TestAttemptAnswerWithQuestion[];\r\n}\r\n\r\nexport interface TestAttemptAnswerWithQuestion extends TestAttemptAnswer {\r\n  question: QuestionWithTranslations;\r\n}\r\n\r\n// Category metadata\r\nexport const CATEGORY_INFO: Record<LicenseCategory, { name: string; description: string }> = {\r\n  A: { name: 'Category A', description: 'Motorcycles' },\r\n  B: { name: 'Category B', description: 'Cars' },\r\n  C: { name: 'Category C', description: 'Trucks' },\r\n  D: { name: 'Category D', description: 'Buses' },\r\n};\r\n\r\n// Hazard Rush Game\r\nexport interface HazardRushRun {\r\n  id: string;\r\n  user_id: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  average_reaction_time: number;\r\n  seed: string;\r\n  signature: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface HazardRushLeaderboardEntry {\r\n  rank: number;\r\n  user_id: string;\r\n  user_name: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  accuracy: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface UserPlan {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Order {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PaymentTransaction {\r\n  id: string;\r\n  order_id: string;\r\n  provider: string;\r\n  provider_status: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  raw_payload: any;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Language metadata\r\nexport const LANGUAGE_INFO: Record<LanguageCode, { name: string; nativeName: string }> = {\r\n  sq: { name: 'Albanian', nativeName: 'Shqip' },\r\n  en: { name: 'English', nativeName: 'English' },\r\n};\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;AAoJxB,MAAM,gBAAgF;IAC3F,GAAG;QAAE,MAAM;QAAc,aAAa;IAAc;IACpD,GAAG;QAAE,MAAM;QAAc,aAAa;IAAO;IAC7C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAS;IAC/C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAQ;AAChD;AA+DO,MAAM,gBAA4E;IACvF,IAAI;QAAE,MAAM;QAAY,YAAY;IAAQ;IAC5C,IAAI;QAAE,MAAM;QAAW,YAAY;IAAU;AAC/C","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { LogOut, Menu, X, Globe, Check } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { toast } from 'sonner';\r\n\r\nexport function Navbar() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [languageMenuOpen, setLanguageMenuOpen] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const { language, setLanguage, t } = useLanguage();\r\n  const { user, signOut, isAdmin, userProfile, loading: authLoading } = useAuth();\r\n  const pathname = usePathname();\r\n\r\n  // Get display name from userProfile or fallback to email\r\n  const displayName = userProfile?.full_name || user?.user_metadata?.full_name || user?.email?.split('@')[0] || t('admin.user');\r\n\r\n  // Handle scroll behavior\r\n  useEffect(() => {\r\n    let rafId: number;\r\n    const handleScroll = () => {\r\n      rafId = requestAnimationFrame(() => {\r\n        setScrolled(window.scrollY > 10);\r\n      });\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n      cancelAnimationFrame(rafId);\r\n    };\r\n  }, []);\r\n\r\n  const handleLanguageChange = (lang: 'sq' | 'en') => {\r\n    setLanguage(lang);\r\n    setLanguageMenuOpen(false);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      setMobileMenuOpen(false);\r\n      await signOut();\r\n      toast.success(t('auth.logoutSuccess'));\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      toast.error(t('auth.logoutError'));\r\n    }\r\n  };\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const desktopLinkBase =\r\n    'text-sm font-semibold transition-all duration-200 relative group/nav-link';\r\n  const desktopLinkActive = 'text-primary';\r\n  const desktopLinkInactive = 'text-foreground/80 hover:text-foreground';\r\n\r\n  const renderDesktopLink = (href: string, label: string, active: boolean) => (\r\n    <Link\r\n      href={href}\r\n      className={`${desktopLinkBase} ${active ? desktopLinkActive : desktopLinkInactive}`}\r\n    >\r\n      {label}\r\n      <span\r\n        className={`absolute -bottom-1 left-0 h-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full transition-all duration-200 ${\r\n          active ? 'w-full' : 'w-0 group-hover/nav-link:w-full'\r\n        }`}\r\n      />\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <nav className={`fixed left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ${\r\n      scrolled ? 'top-0 w-full' : 'top-4 w-[90%]'\r\n    }`}>\r\n      <div className={`bg-card/95 backdrop-blur-xl border border-border/40 shadow-lg shadow-black/20 transition-all duration-300 ${\r\n        scrolled ? 'rounded-none border-t-0 border-x-0' : 'rounded-2xl'\r\n      }`}>\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex h-20 items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"flex items-center gap-3 group\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-primary/30 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-300\"></div>\r\n              <div className=\"relative w-12 h-12 rounded-2xl overflow-hidden shadow-xl shadow-primary/20 group-hover:shadow-primary/30 transition-all duration-300 group-hover:scale-105 border-2 border-primary/30 group-hover:border-primary/50\">\r\n                <Image \r\n                  src=\"/logo-white.png\" \r\n                  alt=\"DriveWise Logo\" \r\n                  width={48} \r\n                  height={48}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"text-2xl font-bold text-white tracking-tight\">\r\n                DriveWise\r\n              </span>\r\n              <span className=\"text-xs text-primary font-medium -mt-1\">{t('nav.subtitle')}</span>\r\n            </div>\r\n          </Link>\r\n\r\n          {/* Desktop Navigation */}\r\n          <div className=\"hidden md:flex items-center gap-8\">\r\n            {/* Home */}\r\n            {renderDesktopLink('/', t('nav.home'), isActive('/'))}\r\n\r\n            {/* Pricing page */}\r\n            {renderDesktopLink('/pricing', t('nav.pricing'), isActive('/pricing'))}\r\n\r\n            {/* Materials */}\r\n            {renderDesktopLink('/materials', t('nav.materials'), isActive('/materials'))}\r\n\r\n            {/* Decision Trainer (logged-in users) */}\r\n            {user &&\r\n              renderDesktopLink(\r\n                '/decision-trainer',\r\n                t('nav.decisionTrainer'),\r\n                pathname.startsWith('/decision-trainer'),\r\n              )}\r\n\r\n            {/* Tests (category index page) */}\r\n            {renderDesktopLink('/category', t('nav.tests'), pathname.startsWith('/category'))}\r\n\r\n            {/* Dashboard */}\r\n            {renderDesktopLink('/dashboard', t('nav.dashboard'), isActive('/dashboard'))}\r\n\r\n            {/* Account (logged-in users) */}\r\n            {user && renderDesktopLink('/profile', t('nav.account'), isActive('/profile'))}\r\n\r\n            {/* Admin (admins only) */}\r\n            {user &&\r\n              isAdmin &&\r\n              renderDesktopLink(\r\n                '/admin',\r\n                t('nav.admin'),\r\n                isActive('/admin') || pathname.startsWith('/admin'),\r\n              )}\r\n          </div>\r\n\r\n          {/* Desktop Auth Buttons */}\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            {/* Language Switcher */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setLanguageMenuOpen(!languageMenuOpen)}\r\n                className=\"flex items-center gap-2 px-3 py-2 rounded-lg border border-border/50 hover:border-primary/50 hover:bg-primary/10 transition-all duration-200 group\"\r\n              >\r\n                <Globe className=\"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                <span className=\"text-sm font-medium text-foreground group-hover:text-primary transition-colors\">\r\n                  {language === 'en' ? 'EN' : 'SQ'}\r\n                </span>\r\n              </button>\r\n              \r\n              {/* Language Dropdown */}\r\n              {languageMenuOpen && (\r\n                <div className=\"absolute top-full mt-2 right-0 w-48 bg-card border border-border/50 rounded-xl shadow-xl shadow-black/20 overflow-hidden z-50\">\r\n                  <button\r\n                    onClick={() => handleLanguageChange('en')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'en' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">English</span>\r\n                    {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleLanguageChange('sq')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'sq' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">Shqip</span>\r\n                    {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {authLoading ? (\r\n              <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/5 border border-primary/10\">\r\n                <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n              </div>\r\n            ) : user ? (\r\n              <>\r\n                <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button variant=\"ghost\" size=\"sm\" asChild className=\"hover:bg-primary/10 hover:text-primary\">\r\n                  <Link href=\"/login\">{t('nav.login')}</Link>\r\n                </Button>\r\n                <Button size=\"sm\" asChild className=\"shadow-lg shadow-primary/30 hover:shadow-primary/40 transition-all duration-300 font-semibold\">\r\n                  <Link href=\"/register\">{t('nav.getStarted')}</Link>\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            className=\"md:hidden p-2 hover:bg-primary/10 rounded-lg transition-all duration-200 border border-border/50 hover:border-primary/30\"\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            {mobileMenuOpen ? (\r\n              <X className=\"w-5 h-5 text-primary\" />\r\n            ) : (\r\n              <Menu className=\"w-5 h-5 text-foreground\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {mobileMenuOpen && (\r\n          <div className=\"md:hidden py-6 border-t border-border/40 bg-card/50 backdrop-blur-xl animate-in slide-in-from-top-2\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              {user && (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 mb-2 rounded-xl bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n              )}\r\n              {/* Home */}\r\n              <Link\r\n                href=\"/\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.home')}\r\n              </Link>\r\n\r\n              {/* Pricing */}\r\n              <Link\r\n                href=\"/pricing\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/pricing')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.pricing')}\r\n              </Link>\r\n\r\n              {/* Materials */}\r\n              <Link\r\n                href=\"/materials\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/materials') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.materials')}\r\n              </Link>\r\n\r\n              {/* Decision Trainer (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/decision-trainer\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    pathname.startsWith('/decision-trainer')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.decisionTrainer')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Tests (category index page) */}\r\n              <Link\r\n                href=\"/category\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  pathname.startsWith('/category')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.tests')}\r\n              </Link>\r\n\r\n              {/* Dashboard */}\r\n              <Link\r\n                href=\"/dashboard\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/dashboard') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.dashboard')}\r\n              </Link>\r\n\r\n              {/* Account (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/profile\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    isActive('/profile')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.account')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Admin (admins only) */}\r\n              {user &&\r\n                isAdmin && (\r\n                  <Link\r\n                    href=\"/admin\"\r\n                    className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                      isActive('/admin') || pathname.startsWith('/admin')\r\n                        ? 'bg-primary/10 text-primary border border-primary/20'\r\n                        : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                    }`}\r\n                    onClick={() => setMobileMenuOpen(false)}\r\n                  >\r\n                    {t('nav.admin')}\r\n                  </Link>\r\n                )}\r\n              \r\n              {/* Mobile Language Switcher */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground\">\r\n                  <Globe className=\"w-4 h-4\" />\r\n                  <span className=\"font-medium\">{t('nav.language')}</span>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleLanguageChange('en')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'en' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">English</span>\r\n                  {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleLanguageChange('sq')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'sq' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">Shqip</span>\r\n                  {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"h-px bg-border/40 my-3\"></div>\r\n              {authLoading ? (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/5 border border-primary/10\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n                </div>\r\n              ) : user ? (\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"w-full justify-start border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button variant=\"ghost\" size=\"sm\" asChild className=\"w-full justify-start hover:bg-primary/10 hover:text-primary\">\r\n                    <Link href=\"/login\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.login')}\r\n                    </Link>\r\n                  </Button>\r\n                  <Button size=\"sm\" asChild className=\"w-full justify-start shadow-lg shadow-primary/30\">\r\n                    <Link href=\"/register\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.getStarted')}\r\n                    </Link>\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 863, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-test-attempts.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface DashboardStats {\r\n  totalTests: number;\r\n  averageScore: number;\r\n  bestScore: number;\r\n  testsThisWeek: number;\r\n  streak: number;\r\n  passedTests: number;\r\n  failedTests: number;\r\n}\r\n\r\nexport interface ProgressData {\r\n  date: string;\r\n  score: number;\r\n}\r\n\r\nexport interface RecentTest {\r\n  id: string;\r\n  category: string;\r\n  testNumber: string;\r\n  score: number;\r\n  date: string;\r\n  passed: boolean;\r\n}\r\n\r\nexport interface WeakTopicStat {\r\n  topic: string;\r\n  totalQuestions: number;\r\n  correct: number;\r\n  accuracy: number;\r\n}\r\n\r\nexport interface WeakTopicsSummary {\r\n  topics: WeakTopicStat[];\r\n  weakTopics: WeakTopicStat[];\r\n  dominantCategory: string | null;\r\n}\r\n\r\nexport interface TestAchievements {\r\n  totalTests: number;\r\n  bestPassStreak: number;\r\n  totalQuestionsAnswered: number;\r\n  firstTestCompleted: boolean;\r\n  fivePassesInRow: boolean;\r\n  hundredQuestionsAnswered: boolean;\r\n}\r\n\r\nexport interface GlobalDailyStreak {\r\n  currentStreak: number;\r\n  bestStreak: number;\r\n}\r\n\r\n// Get user's test attempts with dashboard stats\r\nexport function useTestAttempts(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['test-attempts', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data: attempts, error } = await supabase\r\n        .from('test_attempts')\r\n        .select('*')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return attempts || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute unified daily streak across tests and Decision Trainer\r\nexport function useGlobalDailyStreak(userId?: string) {\r\n  return useQuery<GlobalDailyStreak>({\r\n    queryKey: ['global-daily-streak', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempt dates\r\n      const { data: testAttempts, error: testError } = await supabase\r\n        .from('test_attempts')\r\n        .select('completed_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (testError) throw testError;\r\n\r\n      // Get all decision trainer attempt dates\r\n      const { data: dtAttempts, error: dtError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('created_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (dtError) throw dtError;\r\n\r\n      const activeDayTimestamps: number[] = [];\r\n\r\n      (testAttempts || []).forEach((a: { completed_at: string }) => {\r\n        const d = new Date(a.completed_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      (dtAttempts || []).forEach((a: { created_at: string }) => {\r\n        const d = new Date(a.created_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      const uniqueDays = [...new Set(activeDayTimestamps)].sort((a, b) => b - a); // newest first\r\n\r\n      if (uniqueDays.length === 0) {\r\n        return { currentStreak: 0, bestStreak: 0 };\r\n      }\r\n\r\n      // Compute current streak: consecutive days ending today or yesterday\r\n      const now = new Date();\r\n      const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n      const yesterdayStart = todayStart - 86400000;\r\n\r\n      let currentStreak = 0;\r\n      let bestStreak = 0;\r\n\r\n      // Only count streak if last active day is today or yesterday\r\n      if (uniqueDays[0] === todayStart || uniqueDays[0] === yesterdayStart) {\r\n        currentStreak = 1;\r\n        bestStreak = 1;\r\n\r\n        for (let i = 1; i < uniqueDays.length; i++) {\r\n          const expectedPrevDay = uniqueDays[i - 1] - 86400000;\r\n          if (uniqueDays[i] === expectedPrevDay) {\r\n            currentStreak++;\r\n            if (currentStreak > bestStreak) {\r\n              bestStreak = currentStreak;\r\n            }\r\n          } else {\r\n            // streak broken\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return { currentStreak, bestStreak };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute simple theory test achievements for a user\r\nexport function useTestAchievements(userId?: string) {\r\n  return useQuery<TestAchievements>({\r\n    queryKey: ['test-achievements', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempts for this user (ordered oldest -> newest for streak calc)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id, percentage, total_questions, completed_at')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: true });\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const testAttempts = attempts || [];\r\n      const totalTests = testAttempts.length;\r\n\r\n      // Best streak of passed tests in a row\r\n      let bestPassStreak = 0;\r\n      let currentStreak = 0;\r\n      testAttempts.forEach((attempt) => {\r\n        const passed = Number(attempt.percentage) >= 80;\r\n        if (passed) {\r\n          currentStreak++;\r\n          if (currentStreak > bestPassStreak) {\r\n            bestPassStreak = currentStreak;\r\n          }\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      });\r\n\r\n      // Total questions answered across all tests (count answers rows)\r\n      let totalQuestionsAnswered = 0;\r\n      if (testAttempts.length > 0) {\r\n        const attemptIds = testAttempts.map(a => a.id);\r\n\r\n        const { count: answersCount, error: answersError } = await supabase\r\n          .from('test_attempt_answers')\r\n          .select('*', { count: 'exact', head: true })\r\n          .in('test_attempt_id', attemptIds);\r\n\r\n        if (answersError) throw answersError;\r\n        totalQuestionsAnswered = answersCount || 0;\r\n      }\r\n\r\n      const firstTestCompleted = totalTests >= 1;\r\n      const fivePassesInRow = bestPassStreak >= 5;\r\n      const hundredQuestionsAnswered = totalQuestionsAnswered >= 100;\r\n\r\n      return {\r\n        totalTests,\r\n        bestPassStreak,\r\n        totalQuestionsAnswered,\r\n        firstTestCompleted,\r\n        fivePassesInRow,\r\n        hundredQuestionsAnswered,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n\r\n// Get dashboard stats derived from test attempts (Optimized V2)\r\nexport function useDashboardStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['dashboard-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const emptyResult = {\r\n        stats: {\r\n          totalTests: 0,\r\n          averageScore: 0,\r\n          bestScore: 0,\r\n          testsThisWeek: 0,\r\n          streak: 0,\r\n          passedTests: 0,\r\n          failedTests: 0,\r\n        },\r\n        progressData: [] as ProgressData[],\r\n        recentTests: [] as RecentTest[],\r\n      };\r\n\r\n      try {\r\n        // Parallelize fetches\r\n        const [statsRes, progressRes, recentRes, streakRes] = await Promise.all([\r\n          supabase.rpc('get_dashboard_stats', { p_user_id: userId! }),\r\n          supabase.rpc('get_weekly_progress', { p_user_id: userId! }),\r\n          supabase.rpc('get_recent_tests', { p_user_id: userId!, p_limit: 4 }),\r\n          // We still need dates for streak, but we can select JUST dates\r\n          supabase.from('test_attempts').select('completed_at').eq('user_id', userId!).order('completed_at', { ascending: false })\r\n        ]);\r\n\r\n        if (statsRes.error) throw statsRes.error;\r\n        if (progressRes.error) throw progressRes.error;\r\n        if (recentRes.error) throw recentRes.error;\r\n\r\n        const statsData = statsRes.data?.[0] || {\r\n          total_tests: 0,\r\n          average_score: 0,\r\n          best_score: 0,\r\n          tests_this_week: 0,\r\n          passed_tests: 0,\r\n          failed_tests: 0\r\n        };\r\n\r\n        // Calculate streak\r\n        const testDates = (streakRes.data || []).map((test: any) => {\r\n          const date = new Date(test.completed_at);\r\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\r\n        });\r\n        const uniqueDateTimes = [...new Set(testDates)].sort((a, b) => b - a);\r\n\r\n        let streak = 0;\r\n        const now = new Date();\r\n        const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n        const yesterdayStart = todayStart - 86400000;\r\n\r\n        if (\r\n          uniqueDateTimes.length > 0 &&\r\n          (uniqueDateTimes[0] === todayStart || uniqueDateTimes[0] === yesterdayStart)\r\n        ) {\r\n          streak = 1;\r\n          for (let i = 1; i < uniqueDateTimes.length; i++) {\r\n            const expectedPrevDay = uniqueDateTimes[i - 1] - 86400000;\r\n            if (uniqueDateTimes[i] === expectedPrevDay) {\r\n              streak++;\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Format progress data\r\n        // Map database rows to 7-day chart format\r\n        const progressData: ProgressData[] = [];\r\n        const dbProgress = progressRes.data || [];\r\n        \r\n        for (let i = 6; i >= 0; i--) {\r\n          const d = new Date();\r\n          d.setDate(d.getDate() - i);\r\n          const dateStr = d.toISOString().split('T')[0]; // YYYY-MM-DD\r\n          const dayLabel = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][d.getDay()];\r\n          \r\n          const dayStat = dbProgress.find((p: any) => p.attempt_date === dateStr);\r\n          \r\n          progressData.push({\r\n            date: dayLabel,\r\n            score: dayStat ? dayStat.daily_avg_score : 0\r\n          });\r\n        }\r\n\r\n        // Format recent tests\r\n        const recentTests: RecentTest[] = (recentRes.data || []).map((test: any) => ({\r\n          id: test.id,\r\n          category: test.category,\r\n          testNumber: test.test_number || '1',\r\n          score: Number(test.percentage),\r\n          date: new Date(test.completed_at).toLocaleDateString(),\r\n          passed: Number(test.percentage) >= 80,\r\n        }));\r\n\r\n        return {\r\n          stats: {\r\n            totalTests: statsData.total_tests,\r\n            averageScore: statsData.average_score,\r\n            bestScore: statsData.best_score,\r\n            testsThisWeek: statsData.tests_this_week,\r\n            streak: streak, // Calculated locally for now\r\n            passedTests: statsData.passed_tests,\r\n            failedTests: statsData.failed_tests,\r\n          },\r\n          progressData,\r\n          recentTests,\r\n        };\r\n\r\n      } catch (error) {\r\n        console.error('Dashboard stats error:', error);\r\n        // Fallback to empty result if RPC fails (e.g. if migration not run)\r\n        return emptyResult;\r\n      }\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n  });\r\n}\r\n\r\n// Get paginated test history\r\nexport function useTestHistory(userId?: string, page: number = 1, pageSize: number = 6) {\r\n  return useQuery({\r\n    queryKey: ['test-history', userId, page, pageSize],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n\r\n      const [attemptsResult, countResult] = await Promise.all([\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .order('completed_at', { ascending: false })\r\n          .range(from, to),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId!)\r\n      ]);\r\n\r\n      if (attemptsResult.error) throw attemptsResult.error;\r\n      if (countResult.error) throw countResult.error;\r\n\r\n      return {\r\n        tests: attemptsResult.data || [],\r\n        totalCount: countResult.count || 0,\r\n        totalPages: Math.ceil((countResult.count || 0) / pageSize),\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Delete test attempt\r\nexport function useDeleteTestAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (testId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('id', testId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Clear all test attempts for user\r\nexport function useClearAllTestAttempts() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('user_id', userId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Get test count for category\r\nexport function useTestCount(category: string, enabled: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['test-count', category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('admin_questions')\r\n        .select('test_number')\r\n        .eq('category', category);\r\n\r\n      if (error) throw error;\r\n      \r\n      // Get unique test numbers\r\n      const uniqueTests = [...new Set((data || []).map(q => q.test_number))];\r\n      return uniqueTests.length;\r\n    },\r\n    staleTime: 10 * 60 * 1000, // 10 minutes - test count doesn't change often\r\n    enabled: enabled && !!category,\r\n  });\r\n}\r\n// Get overall weak-topic statistics across all past tests for a user\r\nexport function useWeakTopics(userId?: string) {\r\n  return useQuery<WeakTopicsSummary>({\r\n    queryKey: ['weak-topics', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // 1) Get all test attempts for this user (limit to last 50 for performance/stability)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const attemptIds = (attempts || []).map(a => a.id);\r\n      if (attemptIds.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      // 2) Get all answers for those attempts\r\n      const { data: answers, error: answersError } = await supabase\r\n        .from('test_attempt_answers')\r\n        .select('question_id, is_correct')\r\n        .in('test_attempt_id', attemptIds);\r\n\r\n      if (answersError) throw answersError;\r\n      if (!answers || answers.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      const questionIds = [...new Set(answers.map(a => a.question_id))];\r\n\r\n      // 3) Get topics AND categories for those questions\r\n      const { data: questions, error: questionsError } = await supabase\r\n        .from('admin_questions')\r\n        .select('id, topic, category')\r\n        .in('id', questionIds);\r\n\r\n      if (questionsError) throw questionsError;\r\n\r\n      const topicByQuestionId = new Map<string, { topic: string | null, category: string | null }>();\r\n      (questions || []).forEach((q: { id: string; topic: string | null; category: string | null }) => {\r\n        topicByQuestionId.set(q.id, { topic: q.topic ?? null, category: q.category ?? null });\r\n      });\r\n\r\n      const topicStatsMap: Record<string, { total: number; correct: number; category: string | null }> = {};\r\n\r\n      answers.forEach((ans: { question_id: string; is_correct: boolean }) => {\r\n        const info = topicByQuestionId.get(ans.question_id);\r\n        if (!info || !info.topic) return;\r\n\r\n        const topic = info.topic;\r\n        if (!topicStatsMap[topic]) {\r\n          topicStatsMap[topic] = { total: 0, correct: 0, category: info.category };\r\n        }\r\n        topicStatsMap[topic].total += 1;\r\n        if (ans.is_correct) {\r\n          topicStatsMap[topic].correct += 1;\r\n        }\r\n      });\r\n\r\n      const topics: WeakTopicStat[] = Object.entries(topicStatsMap).map(([topic, stats]) => {\r\n        const accuracy = stats.total > 0 ? stats.correct / stats.total : 0;\r\n        return {\r\n          topic,\r\n          totalQuestions: stats.total,\r\n          correct: stats.correct,\r\n          accuracy,\r\n        };\r\n      }).sort((a, b) => a.accuracy - b.accuracy);\r\n\r\n      const weakTopics = topics.filter(t => t.totalQuestions >= 3 && t.accuracy < 0.8).slice(0, 5);\r\n\r\n      // Determine dominant category from weak topics\r\n      const categoryCounts: Record<string, number> = {};\r\n      weakTopics.forEach(wt => {\r\n        const cat = topicStatsMap[wt.topic]?.category;\r\n        if (cat) {\r\n          categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;\r\n        }\r\n      });\r\n      \r\n      let dominantCategory: string | null = null;\r\n      let maxCount = 0;\r\n      Object.entries(categoryCounts).forEach(([cat, count]) => {\r\n        if (count > maxCount) {\r\n          maxCount = count;\r\n          dominantCategory = cat;\r\n        }\r\n      });\r\n\r\n      // Fallback: if no dominant category found from weak topics (e.g. empty), use the most frequent category from all topics\r\n      if (!dominantCategory && topics.length > 0) {\r\n         const allCategoryCounts: Record<string, number> = {};\r\n         Object.values(topicStatsMap).forEach(stats => {\r\n            if (stats.category) {\r\n               allCategoryCounts[stats.category] = (allCategoryCounts[stats.category] || 0) + 1;\r\n            }\r\n         });\r\n         let allMaxCount = 0;\r\n         Object.entries(allCategoryCounts).forEach(([cat, count]) => {\r\n            if (count > allMaxCount) {\r\n               allMaxCount = count;\r\n               dominantCategory = cat;\r\n            }\r\n         });\r\n      }\r\n\r\n      return { topics, weakTopics, dominantCategory };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1507, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/app/%28pages%29/category/%5Bcategory%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { use, useEffect } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { GlassCard } from '@/components/ui/glass-card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { CATEGORY_INFO, type LicenseCategory } from '@/types/database';\nimport Link from 'next/link';\nimport { Play, Clock, CheckCircle, Target, Shuffle, Brain, FileText, Activity, ArrowRight } from 'lucide-react';\nimport { notFound, useRouter } from 'next/navigation';\nimport { Navbar } from '@/components/navbar';\nimport { useLanguage } from '@/contexts/language-context';\nimport { useTestCount } from '@/hooks/use-test-attempts';\nimport { useAuth } from '@/contexts/auth-context';\n\ninterface CategoryPageProps {\n  params: Promise<{\n    category: string;\n  }>;\n}\n\nexport default function CategoryPage({ params }: CategoryPageProps) {\n  const { t, language } = useLanguage();\n  const isSq = language === 'sq';\n  const { user, loading: authLoading } = useAuth();\n  const router = useRouter();\n  const { category: categoryParam } = use(params);\n  const category = categoryParam.toUpperCase() as LicenseCategory;\n  \n  // Validate category\n  if (!CATEGORY_INFO[category]) {\n    notFound();\n  }\n\n  // Use TanStack Query for data fetching (must be called unconditionally before any early returns)\n  const { data: testCount = 0, isLoading: loading } = useTestCount(category);\n\n  useEffect(() => {\n    if (!authLoading && !user) {\n      router.push('/login');\n    }\n  }, [authLoading, user, router]);\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">\n            {authLoading ? 'Authenticating...' : 'Redirecting...'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const categoryInfo = CATEGORY_INFO[category];\n  const mockTests = Array.from({ length: testCount }, (_, i) => i + 1);\n\n  return (\n    <div className=\"relative min-h-screen bg-background text-foreground overflow-hidden\">\n      {/* Background grid */}\n      <div\n        aria-hidden\n        className=\"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]\"\n      >\n        <svg className=\"h-full w-full opacity-[0.06]\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <pattern id=\"cat-detail-grid\" width=\"32\" height=\"32\" patternUnits=\"userSpaceOnUse\">\n              <path d=\"M32 0H0V32\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"0.4\" />\n            </pattern>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#cat-detail-grid)\" />\n        </svg>\n      </div>\n\n      {/* Warm glows & rails */}\n      <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/20 via-transparent to-transparent blur-3xl\" />\n      <div aria-hidden className=\"pointer-events-none absolute inset-0\">\n        <div className=\"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent\" />\n        <div className=\"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/20 to-transparent\" />\n      </div>\n\n      <Navbar />\n\n      {/* Category header */}\n      <section className=\"pt-32 pb-8\">\n        <div className=\"container mx-auto px-4 max-w-6xl relative\">\n          <GlassCard className=\"relative overflow-hidden p-6 md:p-8 border border-border/80 bg-black/85\">\n            <div className=\"pointer-events-none absolute -right-24 -top-24 h-64 w-64 rounded-full bg-orange-500/10 blur-3xl opacity-60\" />\n            <div className=\"relative flex flex-col md:flex-row items-start md:items-center justify-between gap-6\">\n              <div className=\"space-y-4 max-w-xl\">\n                <div className=\"inline-flex items-center gap-2 rounded-full border border-orange-500/40 bg-orange-500/10 px-3 py-1 text-[11px] font-medium text-orange-300\">\n                  <Target className=\"w-3.5 h-3.5\" />\n                  <span className=\"uppercase tracking-wider\">{t('category.licenseCategory')}</span>\n                </div>\n                <div className=\"space-y-2\">\n                  <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight\">\n                    {categoryInfo.name}\n                  </h1>\n                  <p className=\"text-sm md:text-base text-muted-foreground leading-relaxed\">\n                    {categoryInfo.description}\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex flex-col sm:flex-row gap-3 w-full md:w-auto md:justify-end\">\n                <div className=\"flex items-center gap-3 rounded-xl bg-black/60 border border-border/60 px-4 py-3 backdrop-blur-sm\">\n                  <div className=\"p-2 rounded-lg bg-orange-500/10 text-orange-400\">\n                    <Activity className=\"w-4 h-4\" />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"font-semibold text-sm\">\n                      {loading ? '...' : testCount} {t('category.mockTests')}\n                    </span>\n                    <span className=\"text-muted-foreground text-[10px]\">\n                      {t('category.mock_tests_hint')}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3 rounded-xl bg-black/60 border border-border/60 px-4 py-3 backdrop-blur-sm\">\n                  <div className=\"p-2 rounded-lg bg-blue-500/10 text-blue-400\">\n                    <Clock className=\"w-4 h-4\" />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"font-semibold text-sm\">\n                      ~10 {t('category.minutesEach')}\n                    </span>\n                    <span className=\"text-muted-foreground text-[10px]\">\n                      {t('category.perTestApprox')}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </GlassCard>\n        </div>\n      </section>\n\n      {/* Tests & modes */}\n      <section className=\"pb-16\">\n        <div className=\"container mx-auto px-4 max-w-6xl\">\n          <div className=\"flex flex-col gap-10\">\n            \n            {/* Quick Actions */}\n            <div className=\"grid gap-6 md:grid-cols-2\">\n              <GlassCard className=\"group relative overflow-hidden border border-orange-500/30 bg-gradient-to-br from-orange-500/5 via-black/80 to-black/90 p-6 hover:border-orange-500/50 transition-all duration-300\">\n                <div className=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-5\">\n                  <div className=\"w-12 h-12 rounded-2xl bg-orange-500/20 flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-300\">\n                    <Shuffle className=\"w-6 h-6\" />\n                  </div>\n                  <div className=\"flex-1 space-y-1\">\n                    <h3 className=\"text-lg font-semibold group-hover:text-orange-100 transition-colors\">\n                      {isSq ? 'Test i Przier' : 'Mixed Question Test'}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {isSq \n                        ? 'Pyetje t rastsishme nga t gjitha testet pr nj sfid reale.'\n                        : 'Random questions from all tests in this category for a full challenge.'}\n                    </p>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    className=\"mt-4 sm:mt-0 w-full sm:w-auto shadow-lg shadow-orange-500/20 bg-orange-600 hover:bg-orange-500 text-white border-none\"\n                    asChild\n                  >\n                    <Link href={`/test/${category.toLowerCase()}/mixed`}>\n                      {isSq ? 'Fillo tani' : 'Start mixed'}\n                      <ArrowRight className=\"w-4 h-4 ml-2\" />\n                    </Link>\n                  </Button>\n                </div>\n              </GlassCard>\n\n              <GlassCard className=\"group relative overflow-hidden border border-purple-500/30 bg-gradient-to-br from-purple-500/5 via-black/80 to-black/90 p-6 hover:border-purple-500/50 transition-all duration-300\">\n                <div className=\"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-5\">\n                  <div className=\"w-12 h-12 rounded-2xl bg-purple-500/20 flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform duration-300\">\n                    <Brain className=\"w-6 h-6\" />\n                  </div>\n                  <div className=\"flex-1 space-y-1\">\n                    <h3 className=\"text-lg font-semibold group-hover:text-purple-100 transition-colors\">\n                      {isSq ? 'Test i Personalizuar' : 'Personalized Test'}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {isSq\n                        ? 'Fokusohuni n pyetjet q keni gabuar m par.'\n                        : 'Focus on questions you previously missed to fix weak spots.'}\n                    </p>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    className=\"mt-4 sm:mt-0 w-full sm:w-auto shadow-lg shadow-purple-500/20 bg-purple-600 hover:bg-purple-500 text-white border-none\"\n                    asChild\n                  >\n                    <Link href={`/test/${category.toLowerCase()}/personalized`}>\n                      {isSq ? 'Fillo tani' : 'Start personalized'}\n                      <ArrowRight className=\"w-4 h-4 ml-2\" />\n                    </Link>\n                  </Button>\n                </div>\n              </GlassCard>\n            </div>\n\n            {/* Mock tests grid */}\n            <div>\n              <div className=\"flex flex-col gap-2 mb-6\">\n                <h2 className=\"text-2xl font-semibold tracking-tight flex items-center gap-2\">\n                  <FileText className=\"w-5 h-5 text-orange-400\" />\n                  {isSq ? 'Testet e rregullta' : 'Standard Mock Tests'}\n                </h2>\n                <p className=\"text-sm text-muted-foreground\">\n                  {loading\n                    ? 'Loading tests...'\n                    : testCount > 0\n                      ? isSq \n                        ? `Zgjidhni nga ${testCount} teste zyrtare pr kt kategori.`\n                        : `Choose from ${testCount} exam-style mock tests for this category.`\n                      : t('category.noTestsDescription')}\n                </p>\n              </div>\n\n              {loading ? (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5\">\n                  {Array.from({ length: 6 }).map((_, i) => (\n                    <GlassCard\n                      key={i}\n                      className=\"h-40 flex flex-col items-center justify-center p-6 space-y-4 border-border/50\"\n                    >\n                      <Skeleton className=\"w-12 h-12 rounded-full\" />\n                      <div className=\"w-full space-y-2 text-center\">\n                        <Skeleton className=\"h-4 w-20 mx-auto\" />\n                        <Skeleton className=\"h-3 w-16 mx-auto\" />\n                      </div>\n                    </GlassCard>\n                  ))}\n                </div>\n              ) : testCount === 0 ? (\n                <GlassCard className=\"p-8 text-center border border-border/80 bg-black/80\">\n                  <h3 className=\"text-lg font-semibold mb-2\">{t('category.noTestsTitle')}</h3>\n                  <p className=\"text-sm text-muted-foreground\">{t('category.noTestsDescription')}</p>\n                </GlassCard>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5\">\n                  {mockTests.map((testNumber) => (\n                    <Link\n                      key={testNumber}\n                      href={`/test/${category.toLowerCase()}/${testNumber}`}\n                      className=\"group block h-full\"\n                    >\n                      <GlassCard className=\"relative h-full p-6 border border-border/60 bg-black/60 hover:bg-black/80 hover:border-orange-500/40 transition-all duration-300 flex flex-col items-center justify-center gap-4 group-hover:shadow-[0_0_30px_rgba(249,115,22,0.1)]\">\n                        <div className=\"w-14 h-14 rounded-full bg-orange-500/10 border border-orange-500/20 flex items-center justify-center group-hover:scale-110 group-hover:bg-orange-500/20 transition-all duration-300\">\n                          <span className=\"text-xl font-bold text-orange-400 font-mono\">\n                            {testNumber}\n                          </span>\n                        </div>\n                        \n                        <div className=\"text-center space-y-1\">\n                          <p className=\"text-sm font-medium group-hover:text-orange-100 transition-colors\">\n                            Test {testNumber}\n                          </p>\n                          <p className=\"text-[10px] uppercase tracking-wider text-muted-foreground\">\n                            10 {t('category.questions')}\n                          </p>\n                        </div>\n\n                        <div className=\"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-transparent via-orange-500/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n                      </GlassCard>\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}
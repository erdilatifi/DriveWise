{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/glass-card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface GlassCardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode\r\n  hover?: boolean\r\n}\r\n\r\nexport function GlassCard({ children, className, hover = false, ...props }: GlassCardProps) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-2xl border border-border/70 bg-card/70 backdrop-blur-2xl\",\r\n        \"shadow-[0_22px_70px_rgba(0,0,0,0.9)]\",\r\n        \"before:pointer-events-none before:absolute before:inset-0 before:bg-[radial-gradient(circle_at_0%_0%,rgba(255,255,255,0.12),transparent_55%),radial-gradient(circle_at_100%_0%,rgba(255,255,255,0.06),transparent_55%)] before:opacity-70\",\r\n        hover && \"transition-all duration-300 hover:shadow-[0_28px_90px_rgba(0,0,0,1)]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,KAAK,EAAE,GAAG,OAAuB;IACxF,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,6FACA,wCACA,6OACA,SAAS,wEACT;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KAfgB","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { LogOut, Menu, X, Globe, Check } from 'lucide-react';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { toast } from 'sonner';\r\n\r\nexport function Navbar() {\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [languageMenuOpen, setLanguageMenuOpen] = useState(false);\r\n  const [scrolled, setScrolled] = useState(false);\r\n  const { language, setLanguage, t } = useLanguage();\r\n  const { user, signOut, isAdmin, userProfile, loading: authLoading } = useAuth();\r\n  const pathname = usePathname();\r\n\r\n  // Get display name from userProfile or fallback to email\r\n  const displayName = userProfile?.full_name || user?.user_metadata?.full_name || user?.email?.split('@')[0] || t('admin.user');\r\n\r\n  // Handle scroll behavior\r\n  useEffect(() => {\r\n    let rafId: number;\r\n    const handleScroll = () => {\r\n      rafId = requestAnimationFrame(() => {\r\n        setScrolled(window.scrollY > 10);\r\n      });\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n      cancelAnimationFrame(rafId);\r\n    };\r\n  }, []);\r\n\r\n  const handleLanguageChange = (lang: 'sq' | 'en') => {\r\n    setLanguage(lang);\r\n    setLanguageMenuOpen(false);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      setMobileMenuOpen(false);\r\n      await signOut();\r\n      toast.success(t('auth.logoutSuccess'));\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      toast.error(t('auth.logoutError'));\r\n    }\r\n  };\r\n\r\n  const isActive = (path: string) => pathname === path;\r\n\r\n  const desktopLinkBase =\r\n    'text-sm font-semibold transition-all duration-200 relative group/nav-link';\r\n  const desktopLinkActive = 'text-primary';\r\n  const desktopLinkInactive = 'text-foreground/80 hover:text-foreground';\r\n\r\n  const renderDesktopLink = (href: string, label: string, active: boolean) => (\r\n    <Link\r\n      href={href}\r\n      className={`${desktopLinkBase} ${active ? desktopLinkActive : desktopLinkInactive}`}\r\n    >\r\n      {label}\r\n      <span\r\n        className={`absolute -bottom-1 left-0 h-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full transition-all duration-200 ${\r\n          active ? 'w-full' : 'w-0 group-hover/nav-link:w-full'\r\n        }`}\r\n      />\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <nav className={`fixed left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ${\r\n      scrolled ? 'top-0 w-full' : 'top-4 w-[90%]'\r\n    }`}>\r\n      <div className={`bg-card/95 backdrop-blur-xl border border-border/40 shadow-lg shadow-black/20 transition-all duration-300 ${\r\n        scrolled ? 'rounded-none border-t-0 border-x-0' : 'rounded-2xl'\r\n      }`}>\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex h-20 items-center justify-between\">\r\n          {/* Logo */}\r\n          <Link href=\"/\" className=\"flex items-center gap-3 group\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 bg-primary/30 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-300\"></div>\r\n              <div className=\"relative w-12 h-12 rounded-2xl overflow-hidden shadow-xl shadow-primary/20 group-hover:shadow-primary/30 transition-all duration-300 group-hover:scale-105 border-2 border-primary/30 group-hover:border-primary/50\">\r\n                <Image \r\n                  src=\"/logo-white.png\" \r\n                  alt=\"DriveWise Logo\" \r\n                  width={48} \r\n                  height={48}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"text-2xl font-bold text-white tracking-tight\">\r\n                DriveWise\r\n              </span>\r\n              <span className=\"text-xs text-primary font-medium -mt-1\">{t('nav.subtitle')}</span>\r\n            </div>\r\n          </Link>\r\n\r\n          {/* Desktop Navigation */}\r\n          <div className=\"hidden md:flex items-center gap-8\">\r\n            {/* Home */}\r\n            {renderDesktopLink('/', t('nav.home'), isActive('/'))}\r\n\r\n            {/* Pricing page */}\r\n            {renderDesktopLink('/pricing', t('nav.pricing'), isActive('/pricing'))}\r\n\r\n            {/* Materials */}\r\n            {renderDesktopLink('/materials', t('nav.materials'), isActive('/materials'))}\r\n\r\n            {/* Decision Trainer (logged-in users) */}\r\n            {user &&\r\n              renderDesktopLink(\r\n                '/decision-trainer',\r\n                t('nav.decisionTrainer'),\r\n                pathname.startsWith('/decision-trainer'),\r\n              )}\r\n\r\n            {/* Tests (category index page) */}\r\n            {renderDesktopLink('/category', t('nav.tests'), pathname.startsWith('/category'))}\r\n\r\n            {/* Dashboard */}\r\n            {renderDesktopLink('/dashboard', t('nav.dashboard'), isActive('/dashboard'))}\r\n\r\n            {/* Account (logged-in users) */}\r\n            {user && renderDesktopLink('/profile', t('nav.account'), isActive('/profile'))}\r\n\r\n            {/* Admin (admins only) */}\r\n            {user &&\r\n              isAdmin &&\r\n              renderDesktopLink(\r\n                '/admin',\r\n                t('nav.admin'),\r\n                isActive('/admin') || pathname.startsWith('/admin'),\r\n              )}\r\n          </div>\r\n\r\n          {/* Desktop Auth Buttons */}\r\n          <div className=\"hidden md:flex items-center gap-3\">\r\n            {/* Language Switcher */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setLanguageMenuOpen(!languageMenuOpen)}\r\n                className=\"flex items-center gap-2 px-3 py-2 rounded-lg border border-border/50 hover:border-primary/50 hover:bg-primary/10 transition-all duration-200 group\"\r\n              >\r\n                <Globe className=\"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors\" />\r\n                <span className=\"text-sm font-medium text-foreground group-hover:text-primary transition-colors\">\r\n                  {language === 'en' ? 'EN' : 'SQ'}\r\n                </span>\r\n              </button>\r\n              \r\n              {/* Language Dropdown */}\r\n              {languageMenuOpen && (\r\n                <div className=\"absolute top-full mt-2 right-0 w-48 bg-card border border-border/50 rounded-xl shadow-xl shadow-black/20 overflow-hidden z-50\">\r\n                  <button\r\n                    onClick={() => handleLanguageChange('en')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'en' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">English</span>\r\n                    {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleLanguageChange('sq')}\r\n                    className={`w-full flex items-center justify-between px-4 py-3 hover:bg-primary/10 transition-colors ${\r\n                      language === 'sq' ? 'bg-primary/10 text-primary' : 'text-foreground'\r\n                    }`}\r\n                  >\r\n                    <span className=\"font-medium\">Shqip</span>\r\n                    {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {authLoading ? (\r\n              <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/5 border border-primary/10\">\r\n                <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n              </div>\r\n            ) : user ? (\r\n              <>\r\n                <div className=\"flex items-center gap-3 px-4 py-2 rounded-full bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Button variant=\"ghost\" size=\"sm\" asChild className=\"hover:bg-primary/10 hover:text-primary\">\r\n                  <Link href=\"/login\">{t('nav.login')}</Link>\r\n                </Button>\r\n                <Button size=\"sm\" asChild className=\"shadow-lg shadow-primary/30 hover:shadow-primary/40 transition-all duration-300 font-semibold\">\r\n                  <Link href=\"/register\">{t('nav.getStarted')}</Link>\r\n                </Button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            className=\"md:hidden p-2 hover:bg-primary/10 rounded-lg transition-all duration-200 border border-border/50 hover:border-primary/30\"\r\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          >\r\n            {mobileMenuOpen ? (\r\n              <X className=\"w-5 h-5 text-primary\" />\r\n            ) : (\r\n              <Menu className=\"w-5 h-5 text-foreground\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {mobileMenuOpen && (\r\n          <div className=\"md:hidden py-6 border-t border-border/40 bg-card/50 backdrop-blur-xl animate-in slide-in-from-top-2\">\r\n            <div className=\"flex flex-col gap-2\">\r\n              {user && (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 mb-2 rounded-xl bg-primary/10 border border-primary/20\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm font-medium text-primary\">{displayName}</span>\r\n                </div>\r\n              )}\r\n              {/* Home */}\r\n              <Link\r\n                href=\"/\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.home')}\r\n              </Link>\r\n\r\n              {/* Pricing */}\r\n              <Link\r\n                href=\"/pricing\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/pricing')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.pricing')}\r\n              </Link>\r\n\r\n              {/* Materials */}\r\n              <Link\r\n                href=\"/materials\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/materials') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.materials')}\r\n              </Link>\r\n\r\n              {/* Decision Trainer (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/decision-trainer\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    pathname.startsWith('/decision-trainer')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.decisionTrainer')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Tests (category index page) */}\r\n              <Link\r\n                href=\"/category\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  pathname.startsWith('/category')\r\n                    ? 'bg-primary/10 text-primary border border-primary/20'\r\n                    : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.tests')}\r\n              </Link>\r\n\r\n              {/* Dashboard */}\r\n              <Link\r\n                href=\"/dashboard\"\r\n                className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                  isActive('/dashboard') ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                }`}\r\n                onClick={() => setMobileMenuOpen(false)}\r\n              >\r\n                {t('nav.dashboard')}\r\n              </Link>\r\n\r\n              {/* Account (logged-in users) */}\r\n              {user && (\r\n                <Link\r\n                  href=\"/profile\"\r\n                  className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                    isActive('/profile')\r\n                      ? 'bg-primary/10 text-primary border border-primary/20'\r\n                      : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                  onClick={() => setMobileMenuOpen(false)}\r\n                >\r\n                  {t('nav.account')}\r\n                </Link>\r\n              )}\r\n\r\n              {/* Admin (admins only) */}\r\n              {user &&\r\n                isAdmin && (\r\n                  <Link\r\n                    href=\"/admin\"\r\n                    className={`px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${\r\n                      isActive('/admin') || pathname.startsWith('/admin')\r\n                        ? 'bg-primary/10 text-primary border border-primary/20'\r\n                        : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                    }`}\r\n                    onClick={() => setMobileMenuOpen(false)}\r\n                  >\r\n                    {t('nav.admin')}\r\n                  </Link>\r\n                )}\r\n              \r\n              {/* Mobile Language Switcher */}\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground\">\r\n                  <Globe className=\"w-4 h-4\" />\r\n                  <span className=\"font-medium\">{t('nav.language')}</span>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleLanguageChange('en')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'en' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">English</span>\r\n                  {language === 'en' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleLanguageChange('sq')}\r\n                  className={`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    language === 'sq' ? 'bg-primary/10 text-primary border border-primary/20' : 'text-foreground/80 hover:bg-primary/5 hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <span className=\"font-semibold\">Shqip</span>\r\n                  {language === 'sq' && <Check className=\"w-4 h-4 text-primary\" />}\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"h-px bg-border/40 my-3\"></div>\r\n              {authLoading ? (\r\n                <div className=\"flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/5 border border-primary/10\">\r\n                  <div className=\"w-2 h-2 rounded-full bg-primary animate-pulse\"></div>\r\n                  <span className=\"text-sm text-muted-foreground\">Loading...</span>\r\n                </div>\r\n              ) : user ? (\r\n                <Button variant=\"outline\" size=\"sm\" onClick={handleLogout} className=\"w-full justify-start border-border/50 hover:border-primary/50\">\r\n                  <LogOut className=\"w-4 h-4 mr-2\" />\r\n                  {t('nav.logout')}\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button variant=\"ghost\" size=\"sm\" asChild className=\"w-full justify-start hover:bg-primary/10 hover:text-primary\">\r\n                    <Link href=\"/login\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.login')}\r\n                    </Link>\r\n                  </Button>\r\n                  <Button size=\"sm\" asChild className=\"w-full justify-start shadow-lg shadow-primary/30\">\r\n                    <Link href=\"/register\" onClick={() => setMobileMenuOpen(false)}>\r\n                      {t('nav.getStarted')}\r\n                    </Link>\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/components/ui/skeleton.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative overflow-hidden rounded-xl bg-gradient-to-r from-muted/60 via-muted/35 to-muted/60\",\r\n        \"before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-primary/18 before:to-transparent before:animate-[shimmer_1.4s_infinite]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,qNAAC;QACC,WAAW,IAAA,oJAAE,EACX,+FACA,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 821, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-test-attempts.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  test_number: string;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface DashboardStats {\r\n  totalTests: number;\r\n  averageScore: number;\r\n  bestScore: number;\r\n  testsThisWeek: number;\r\n  streak: number;\r\n  passedTests: number;\r\n  failedTests: number;\r\n}\r\n\r\nexport interface ProgressData {\r\n  date: string;\r\n  score: number;\r\n}\r\n\r\nexport interface RecentTest {\r\n  id: string;\r\n  category: string;\r\n  testNumber: string;\r\n  score: number;\r\n  date: string;\r\n  passed: boolean;\r\n}\r\n\r\nexport interface WeakTopicStat {\r\n  topic: string;\r\n  totalQuestions: number;\r\n  correct: number;\r\n  accuracy: number;\r\n}\r\n\r\nexport interface WeakTopicsSummary {\r\n  topics: WeakTopicStat[];\r\n  weakTopics: WeakTopicStat[];\r\n  dominantCategory: string | null;\r\n}\r\n\r\nexport interface TestAchievements {\r\n  totalTests: number;\r\n  bestPassStreak: number;\r\n  totalQuestionsAnswered: number;\r\n  firstTestCompleted: boolean;\r\n  fivePassesInRow: boolean;\r\n  hundredQuestionsAnswered: boolean;\r\n}\r\n\r\nexport interface GlobalDailyStreak {\r\n  currentStreak: number;\r\n  bestStreak: number;\r\n}\r\n\r\n// Get user's test attempts with dashboard stats\r\nexport function useTestAttempts(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['test-attempts', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data: attempts, error } = await supabase\r\n        .from('test_attempts')\r\n        .select('*')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return attempts || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute unified daily streak across tests and Decision Trainer\r\nexport function useGlobalDailyStreak(userId?: string) {\r\n  return useQuery<GlobalDailyStreak>({\r\n    queryKey: ['global-daily-streak', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempt dates\r\n      const { data: testAttempts, error: testError } = await supabase\r\n        .from('test_attempts')\r\n        .select('completed_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (testError) throw testError;\r\n\r\n      // Get all decision trainer attempt dates\r\n      const { data: dtAttempts, error: dtError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('created_at')\r\n        .eq('user_id', userId!);\r\n\r\n      if (dtError) throw dtError;\r\n\r\n      const activeDayTimestamps: number[] = [];\r\n\r\n      (testAttempts || []).forEach((a: { completed_at: string }) => {\r\n        const d = new Date(a.completed_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      (dtAttempts || []).forEach((a: { created_at: string }) => {\r\n        const d = new Date(a.created_at);\r\n        activeDayTimestamps.push(new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime());\r\n      });\r\n\r\n      const uniqueDays = [...new Set(activeDayTimestamps)].sort((a, b) => b - a); // newest first\r\n\r\n      if (uniqueDays.length === 0) {\r\n        return { currentStreak: 0, bestStreak: 0 };\r\n      }\r\n\r\n      // Compute current streak: consecutive days ending today or yesterday\r\n      const now = new Date();\r\n      const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n      const yesterdayStart = todayStart - 86400000;\r\n\r\n      let currentStreak = 0;\r\n      let bestStreak = 0;\r\n\r\n      // Only count streak if last active day is today or yesterday\r\n      if (uniqueDays[0] === todayStart || uniqueDays[0] === yesterdayStart) {\r\n        currentStreak = 1;\r\n        bestStreak = 1;\r\n\r\n        for (let i = 1; i < uniqueDays.length; i++) {\r\n          const expectedPrevDay = uniqueDays[i - 1] - 86400000;\r\n          if (uniqueDays[i] === expectedPrevDay) {\r\n            currentStreak++;\r\n            if (currentStreak > bestStreak) {\r\n              bestStreak = currentStreak;\r\n            }\r\n          } else {\r\n            // streak broken\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return { currentStreak, bestStreak };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Compute simple theory test achievements for a user\r\nexport function useTestAchievements(userId?: string) {\r\n  return useQuery<TestAchievements>({\r\n    queryKey: ['test-achievements', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // Get all test attempts for this user (ordered oldest -> newest for streak calc)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id, percentage, total_questions, completed_at')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: true });\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const testAttempts = attempts || [];\r\n      const totalTests = testAttempts.length;\r\n\r\n      // Best streak of passed tests in a row\r\n      let bestPassStreak = 0;\r\n      let currentStreak = 0;\r\n      testAttempts.forEach((attempt) => {\r\n        const passed = Number(attempt.percentage) >= 80;\r\n        if (passed) {\r\n          currentStreak++;\r\n          if (currentStreak > bestPassStreak) {\r\n            bestPassStreak = currentStreak;\r\n          }\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      });\r\n\r\n      // Total questions answered across all tests (count answers rows)\r\n      let totalQuestionsAnswered = 0;\r\n      if (testAttempts.length > 0) {\r\n        const attemptIds = testAttempts.map(a => a.id);\r\n\r\n        const { count: answersCount, error: answersError } = await supabase\r\n          .from('test_attempt_answers')\r\n          .select('*', { count: 'exact', head: true })\r\n          .in('test_attempt_id', attemptIds);\r\n\r\n        if (answersError) throw answersError;\r\n        totalQuestionsAnswered = answersCount || 0;\r\n      }\r\n\r\n      const firstTestCompleted = totalTests >= 1;\r\n      const fivePassesInRow = bestPassStreak >= 5;\r\n      const hundredQuestionsAnswered = totalQuestionsAnswered >= 100;\r\n\r\n      return {\r\n        totalTests,\r\n        bestPassStreak,\r\n        totalQuestionsAnswered,\r\n        firstTestCompleted,\r\n        fivePassesInRow,\r\n        hundredQuestionsAnswered,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n\r\n// Get dashboard stats derived from test attempts (Optimized V2)\r\nexport function useDashboardStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['dashboard-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      const emptyResult = {\r\n        stats: {\r\n          totalTests: 0,\r\n          averageScore: 0,\r\n          bestScore: 0,\r\n          testsThisWeek: 0,\r\n          streak: 0,\r\n          passedTests: 0,\r\n          failedTests: 0,\r\n        },\r\n        progressData: [] as ProgressData[],\r\n        recentTests: [] as RecentTest[],\r\n      };\r\n\r\n      try {\r\n        // Parallelize fetches\r\n        const [statsRes, progressRes, recentRes, streakRes] = await Promise.all([\r\n          supabase.rpc('get_dashboard_stats', { p_user_id: userId! }),\r\n          supabase.rpc('get_weekly_progress', { p_user_id: userId! }),\r\n          supabase.rpc('get_recent_tests', { p_user_id: userId!, p_limit: 4 }),\r\n          // We still need dates for streak, but we can select JUST dates\r\n          supabase.from('test_attempts').select('completed_at').eq('user_id', userId!).order('completed_at', { ascending: false })\r\n        ]);\r\n\r\n        if (statsRes.error) throw statsRes.error;\r\n        if (progressRes.error) throw progressRes.error;\r\n        if (recentRes.error) throw recentRes.error;\r\n\r\n        const statsData = statsRes.data?.[0] || {\r\n          total_tests: 0,\r\n          average_score: 0,\r\n          best_score: 0,\r\n          tests_this_week: 0,\r\n          passed_tests: 0,\r\n          failed_tests: 0\r\n        };\r\n\r\n        // Calculate streak\r\n        const testDates = (streakRes.data || []).map((test: any) => {\r\n          const date = new Date(test.completed_at);\r\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\r\n        });\r\n        const uniqueDateTimes = [...new Set(testDates)].sort((a, b) => b - a);\r\n\r\n        let streak = 0;\r\n        const now = new Date();\r\n        const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n        const yesterdayStart = todayStart - 86400000;\r\n\r\n        if (\r\n          uniqueDateTimes.length > 0 &&\r\n          (uniqueDateTimes[0] === todayStart || uniqueDateTimes[0] === yesterdayStart)\r\n        ) {\r\n          streak = 1;\r\n          for (let i = 1; i < uniqueDateTimes.length; i++) {\r\n            const expectedPrevDay = uniqueDateTimes[i - 1] - 86400000;\r\n            if (uniqueDateTimes[i] === expectedPrevDay) {\r\n              streak++;\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Format progress data\r\n        // Map database rows to 7-day chart format\r\n        const progressData: ProgressData[] = [];\r\n        const dbProgress = progressRes.data || [];\r\n        \r\n        for (let i = 6; i >= 0; i--) {\r\n          const d = new Date();\r\n          d.setDate(d.getDate() - i);\r\n          const dateStr = d.toISOString().split('T')[0]; // YYYY-MM-DD\r\n          const dayLabel = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][d.getDay()];\r\n          \r\n          const dayStat = dbProgress.find((p: any) => p.attempt_date === dateStr);\r\n          \r\n          progressData.push({\r\n            date: dayLabel,\r\n            score: dayStat ? dayStat.daily_avg_score : 0\r\n          });\r\n        }\r\n\r\n        // Format recent tests\r\n        const recentTests: RecentTest[] = (recentRes.data || []).map((test: any) => ({\r\n          id: test.id,\r\n          category: test.category,\r\n          testNumber: test.test_number || '1',\r\n          score: Number(test.percentage),\r\n          date: new Date(test.completed_at).toLocaleDateString(),\r\n          passed: Number(test.percentage) >= 80,\r\n        }));\r\n\r\n        return {\r\n          stats: {\r\n            totalTests: statsData.total_tests,\r\n            averageScore: statsData.average_score,\r\n            bestScore: statsData.best_score,\r\n            testsThisWeek: statsData.tests_this_week,\r\n            streak: streak, // Calculated locally for now\r\n            passedTests: statsData.passed_tests,\r\n            failedTests: statsData.failed_tests,\r\n          },\r\n          progressData,\r\n          recentTests,\r\n        };\r\n\r\n      } catch (error) {\r\n        console.error('Dashboard stats error:', error);\r\n        // Fallback to empty result if RPC fails (e.g. if migration not run)\r\n        return emptyResult;\r\n      }\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n  });\r\n}\r\n\r\n// Get paginated test history\r\nexport function useTestHistory(userId?: string, page: number = 1, pageSize: number = 6) {\r\n  return useQuery({\r\n    queryKey: ['test-history', userId, page, pageSize],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const from = (page - 1) * pageSize;\r\n      const to = from + pageSize - 1;\r\n\r\n      const [attemptsResult, countResult] = await Promise.all([\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*')\r\n          .eq('user_id', userId!)\r\n          .order('completed_at', { ascending: false })\r\n          .range(from, to),\r\n        supabase\r\n          .from('test_attempts')\r\n          .select('*', { count: 'exact', head: true })\r\n          .eq('user_id', userId!)\r\n      ]);\r\n\r\n      if (attemptsResult.error) throw attemptsResult.error;\r\n      if (countResult.error) throw countResult.error;\r\n\r\n      return {\r\n        tests: attemptsResult.data || [],\r\n        totalCount: countResult.count || 0,\r\n        totalPages: Math.ceil((countResult.count || 0) / pageSize),\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Delete test attempt\r\nexport function useDeleteTestAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (testId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('id', testId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Clear all test attempts for user\r\nexport function useClearAllTestAttempts() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async (userId: string) => {\r\n      const supabase = createClient();\r\n      \r\n      const { error } = await supabase\r\n        .from('test_attempts')\r\n        .delete()\r\n        .eq('user_id', userId);\r\n\r\n      if (error) throw error;\r\n    },\r\n    onSuccess: () => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['test-attempts'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n      queryClient.invalidateQueries({ queryKey: ['test-history'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Get test count for category\r\nexport function useTestCount(category: string, enabled: boolean = true) {\r\n  return useQuery({\r\n    queryKey: ['test-count', category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('admin_questions')\r\n        .select('test_number')\r\n        .eq('category', category);\r\n\r\n      if (error) throw error;\r\n      \r\n      // Get unique test numbers\r\n      const uniqueTests = [...new Set((data || []).map(q => q.test_number))];\r\n      return uniqueTests.length;\r\n    },\r\n    staleTime: 10 * 60 * 1000, // 10 minutes - test count doesn't change often\r\n    enabled: enabled && !!category,\r\n  });\r\n}\r\n// Get overall weak-topic statistics across all past tests for a user\r\nexport function useWeakTopics(userId?: string) {\r\n  return useQuery<WeakTopicsSummary>({\r\n    queryKey: ['weak-topics', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n\r\n      // 1) Get all test attempts for this user (limit to last 50 for performance/stability)\r\n      const { data: attempts, error: attemptsError } = await supabase\r\n        .from('test_attempts')\r\n        .select('id')\r\n        .eq('user_id', userId!)\r\n        .order('completed_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n      const attemptIds = (attempts || []).map(a => a.id);\r\n      if (attemptIds.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      // 2) Get all answers for those attempts\r\n      const { data: answers, error: answersError } = await supabase\r\n        .from('test_attempt_answers')\r\n        .select('question_id, is_correct')\r\n        .in('test_attempt_id', attemptIds);\r\n\r\n      if (answersError) throw answersError;\r\n      if (!answers || answers.length === 0) {\r\n        return { topics: [], weakTopics: [], dominantCategory: null };\r\n      }\r\n\r\n      const questionIds = [...new Set(answers.map(a => a.question_id))];\r\n\r\n      // 3) Get topics AND categories for those questions\r\n      const { data: questions, error: questionsError } = await supabase\r\n        .from('admin_questions')\r\n        .select('id, topic, category')\r\n        .in('id', questionIds);\r\n\r\n      if (questionsError) throw questionsError;\r\n\r\n      const topicByQuestionId = new Map<string, { topic: string | null, category: string | null }>();\r\n      (questions || []).forEach((q: { id: string; topic: string | null; category: string | null }) => {\r\n        topicByQuestionId.set(q.id, { topic: q.topic ?? null, category: q.category ?? null });\r\n      });\r\n\r\n      const topicStatsMap: Record<string, { total: number; correct: number; category: string | null }> = {};\r\n\r\n      answers.forEach((ans: { question_id: string; is_correct: boolean }) => {\r\n        const info = topicByQuestionId.get(ans.question_id);\r\n        if (!info || !info.topic) return;\r\n\r\n        const topic = info.topic;\r\n        if (!topicStatsMap[topic]) {\r\n          topicStatsMap[topic] = { total: 0, correct: 0, category: info.category };\r\n        }\r\n        topicStatsMap[topic].total += 1;\r\n        if (ans.is_correct) {\r\n          topicStatsMap[topic].correct += 1;\r\n        }\r\n      });\r\n\r\n      const topics: WeakTopicStat[] = Object.entries(topicStatsMap).map(([topic, stats]) => {\r\n        const accuracy = stats.total > 0 ? stats.correct / stats.total : 0;\r\n        return {\r\n          topic,\r\n          totalQuestions: stats.total,\r\n          correct: stats.correct,\r\n          accuracy,\r\n        };\r\n      }).sort((a, b) => a.accuracy - b.accuracy);\r\n\r\n      const weakTopics = topics.filter(t => t.totalQuestions >= 3 && t.accuracy < 0.8).slice(0, 5);\r\n\r\n      // Determine dominant category from weak topics\r\n      const categoryCounts: Record<string, number> = {};\r\n      weakTopics.forEach(wt => {\r\n        const cat = topicStatsMap[wt.topic]?.category;\r\n        if (cat) {\r\n          categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;\r\n        }\r\n      });\r\n      \r\n      let dominantCategory: string | null = null;\r\n      let maxCount = 0;\r\n      Object.entries(categoryCounts).forEach(([cat, count]) => {\r\n        if (count > maxCount) {\r\n          maxCount = count;\r\n          dominantCategory = cat;\r\n        }\r\n      });\r\n\r\n      // Fallback: if no dominant category found from weak topics (e.g. empty), use the most frequent category from all topics\r\n      if (!dominantCategory && topics.length > 0) {\r\n         const allCategoryCounts: Record<string, number> = {};\r\n         Object.values(topicStatsMap).forEach(stats => {\r\n            if (stats.category) {\r\n               allCategoryCounts[stats.category] = (allCategoryCounts[stats.category] || 0) + 1;\r\n            }\r\n         });\r\n         let allMaxCount = 0;\r\n         Object.entries(allCategoryCounts).forEach(([cat, count]) => {\r\n            if (count > allMaxCount) {\r\n               allMaxCount = count;\r\n               dominantCategory = cat;\r\n            }\r\n         });\r\n      }\r\n\r\n      return { topics, weakTopics, dominantCategory };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;;;;AAiEO,SAAS,gBAAgB,MAAe;;IAC7C,OAAO,IAAA,kNAAQ,EAAC;QACd,UAAU;YAAC;YAAiB;SAAO;QACnC,OAAO;wCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAM;gBAE5C,IAAI,OAAO,MAAM;gBACjB,OAAO,YAAY,EAAE;YACvB;;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;GAnBgB;;QACP,kNAAQ;;;AAqBV,SAAS,qBAAqB,MAAe;;IAClD,OAAO,IAAA,kNAAQ,EAAoB;QACjC,UAAU;YAAC;YAAuB;SAAO;QACzC,OAAO;6CAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,6BAA6B;gBAC7B,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,iBACL,MAAM,CAAC,gBACP,EAAE,CAAC,WAAW;gBAEjB,IAAI,WAAW,MAAM;gBAErB,yCAAyC;gBACzC,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAChD,IAAI,CAAC,6BACL,MAAM,CAAC,cACP,EAAE,CAAC,WAAW;gBAEjB,IAAI,SAAS,MAAM;gBAEnB,MAAM,sBAAgC,EAAE;gBAExC,CAAC,gBAAgB,EAAE,EAAE,OAAO;qDAAC,CAAC;wBAC5B,MAAM,IAAI,IAAI,KAAK,EAAE,YAAY;wBACjC,oBAAoB,IAAI,CAAC,IAAI,KAAK,EAAE,WAAW,IAAI,EAAE,QAAQ,IAAI,EAAE,OAAO,IAAI,OAAO;oBACvF;;gBAEA,CAAC,cAAc,EAAE,EAAE,OAAO;qDAAC,CAAC;wBAC1B,MAAM,IAAI,IAAI,KAAK,EAAE,UAAU;wBAC/B,oBAAoB,IAAI,CAAC,IAAI,KAAK,EAAE,WAAW,IAAI,EAAE,QAAQ,IAAI,EAAE,OAAO,IAAI,OAAO;oBACvF;;gBAEA,MAAM,aAAa;uBAAI,IAAI,IAAI;iBAAqB,CAAC,IAAI;gEAAC,CAAC,GAAG,IAAM,IAAI;gEAAI,eAAe;gBAE3F,IAAI,WAAW,MAAM,KAAK,GAAG;oBAC3B,OAAO;wBAAE,eAAe;wBAAG,YAAY;oBAAE;gBAC3C;gBAEA,qEAAqE;gBACrE,MAAM,MAAM,IAAI;gBAChB,MAAM,aAAa,IAAI,KAAK,IAAI,WAAW,IAAI,IAAI,QAAQ,IAAI,IAAI,OAAO,IAAI,OAAO;gBACrF,MAAM,iBAAiB,aAAa;gBAEpC,IAAI,gBAAgB;gBACpB,IAAI,aAAa;gBAEjB,6DAA6D;gBAC7D,IAAI,UAAU,CAAC,EAAE,KAAK,cAAc,UAAU,CAAC,EAAE,KAAK,gBAAgB;oBACpE,gBAAgB;oBAChB,aAAa;oBAEb,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,MAAM,EAAE,IAAK;wBAC1C,MAAM,kBAAkB,UAAU,CAAC,IAAI,EAAE,GAAG;wBAC5C,IAAI,UAAU,CAAC,EAAE,KAAK,iBAAiB;4BACrC;4BACA,IAAI,gBAAgB,YAAY;gCAC9B,aAAa;4BACf;wBACF,OAAO;4BAEL;wBACF;oBACF;gBACF;gBAEA,OAAO;oBAAE;oBAAe;gBAAW;YACrC;;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;IAzEgB;;QACP,kNAAQ;;;AA2EV,SAAS,oBAAoB,MAAe;;IACjD,OAAO,IAAA,kNAAQ,EAAmB;QAChC,UAAU;YAAC;YAAqB;SAAO;QACvC,OAAO;4CAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,iFAAiF;gBACjF,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,iBACL,MAAM,CAAC,iDACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAK;gBAE3C,IAAI,eAAe,MAAM;gBACzB,MAAM,eAAe,YAAY,EAAE;gBACnC,MAAM,aAAa,aAAa,MAAM;gBAEtC,uCAAuC;gBACvC,IAAI,iBAAiB;gBACrB,IAAI,gBAAgB;gBACpB,aAAa,OAAO;oDAAC,CAAC;wBACpB,MAAM,SAAS,OAAO,QAAQ,UAAU,KAAK;wBAC7C,IAAI,QAAQ;4BACV;4BACA,IAAI,gBAAgB,gBAAgB;gCAClC,iBAAiB;4BACnB;wBACF,OAAO;4BACL,gBAAgB;wBAClB;oBACF;;gBAEA,iEAAiE;gBACjE,IAAI,yBAAyB;gBAC7B,IAAI,aAAa,MAAM,GAAG,GAAG;oBAC3B,MAAM,aAAa,aAAa,GAAG;mEAAC,CAAA,IAAK,EAAE,EAAE;;oBAE7C,MAAM,EAAE,OAAO,YAAY,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SACxD,IAAI,CAAC,wBACL,MAAM,CAAC,KAAK;wBAAE,OAAO;wBAAS,MAAM;oBAAK,GACzC,EAAE,CAAC,mBAAmB;oBAEzB,IAAI,cAAc,MAAM;oBACxB,yBAAyB,gBAAgB;gBAC3C;gBAEA,MAAM,qBAAqB,cAAc;gBACzC,MAAM,kBAAkB,kBAAkB;gBAC1C,MAAM,2BAA2B,0BAA0B;gBAE3D,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;oBACA;gBACF;YACF;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;IA9DgB;;QACP,kNAAQ;;;AAgEV,SAAS,kBAAkB,MAAe;;IAC/C,OAAO,IAAA,kNAAQ,EAAC;QACd,UAAU;YAAC;YAAmB;SAAO;QACrC,OAAO;0CAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,cAAc;oBAClB,OAAO;wBACL,YAAY;wBACZ,cAAc;wBACd,WAAW;wBACX,eAAe;wBACf,QAAQ;wBACR,aAAa;wBACb,aAAa;oBACf;oBACA,cAAc,EAAE;oBAChB,aAAa,EAAE;gBACjB;gBAEA,IAAI;oBACF,sBAAsB;oBACtB,MAAM,CAAC,UAAU,aAAa,WAAW,UAAU,GAAG,MAAM,QAAQ,GAAG,CAAC;wBACtE,SAAS,GAAG,CAAC,uBAAuB;4BAAE,WAAW;wBAAQ;wBACzD,SAAS,GAAG,CAAC,uBAAuB;4BAAE,WAAW;wBAAQ;wBACzD,SAAS,GAAG,CAAC,oBAAoB;4BAAE,WAAW;4BAAS,SAAS;wBAAE;wBAClE,+DAA+D;wBAC/D,SAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC,gBAAgB,EAAE,CAAC,WAAW,QAAS,KAAK,CAAC,gBAAgB;4BAAE,WAAW;wBAAM;qBACvH;oBAED,IAAI,SAAS,KAAK,EAAE,MAAM,SAAS,KAAK;oBACxC,IAAI,YAAY,KAAK,EAAE,MAAM,YAAY,KAAK;oBAC9C,IAAI,UAAU,KAAK,EAAE,MAAM,UAAU,KAAK;oBAE1C,MAAM,YAAY,SAAS,IAAI,EAAE,CAAC,EAAE,IAAI;wBACtC,aAAa;wBACb,eAAe;wBACf,YAAY;wBACZ,iBAAiB;wBACjB,cAAc;wBACd,cAAc;oBAChB;oBAEA,mBAAmB;oBACnB,MAAM,YAAY,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,GAAG;gEAAC,CAAC;4BAC5C,MAAM,OAAO,IAAI,KAAK,KAAK,YAAY;4BACvC,OAAO,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK,OAAO,IAAI,OAAO;wBAC9E;;oBACA,MAAM,kBAAkB;2BAAI,IAAI,IAAI;qBAAW,CAAC,IAAI;sEAAC,CAAC,GAAG,IAAM,IAAI;;oBAEnE,IAAI,SAAS;oBACb,MAAM,MAAM,IAAI;oBAChB,MAAM,aAAa,IAAI,KAAK,IAAI,WAAW,IAAI,IAAI,QAAQ,IAAI,IAAI,OAAO,IAAI,OAAO;oBACrF,MAAM,iBAAiB,aAAa;oBAEpC,IACE,gBAAgB,MAAM,GAAG,KACzB,CAAC,eAAe,CAAC,EAAE,KAAK,cAAc,eAAe,CAAC,EAAE,KAAK,cAAc,GAC3E;wBACA,SAAS;wBACT,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;4BAC/C,MAAM,kBAAkB,eAAe,CAAC,IAAI,EAAE,GAAG;4BACjD,IAAI,eAAe,CAAC,EAAE,KAAK,iBAAiB;gCAC1C;4BACF,OAAO;gCACL;4BACF;wBACF;oBACF;oBAEA,uBAAuB;oBACvB,0CAA0C;oBAC1C,MAAM,eAA+B,EAAE;oBACvC,MAAM,aAAa,YAAY,IAAI,IAAI,EAAE;oBAEzC,IAAK,IAAI,IAAI,GAAG,KAAK,GAAG,IAAK;wBAC3B,MAAM,IAAI,IAAI;wBACd,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;wBACxB,MAAM,UAAU,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,aAAa;wBAC5D,MAAM,WAAW;4BAAC;4BAAO;4BAAO;4BAAO;4BAAO;4BAAO;4BAAO;yBAAM,CAAC,EAAE,MAAM,GAAG;wBAE9E,MAAM,UAAU,WAAW,IAAI;kEAAC,CAAC,IAAW,EAAE,YAAY,KAAK;;wBAE/D,aAAa,IAAI,CAAC;4BAChB,MAAM;4BACN,OAAO,UAAU,QAAQ,eAAe,GAAG;wBAC7C;oBACF;oBAEA,sBAAsB;oBACtB,MAAM,cAA4B,CAAC,UAAU,IAAI,IAAI,EAAE,EAAE,GAAG;kEAAC,CAAC,OAAc,CAAC;gCAC3E,IAAI,KAAK,EAAE;gCACX,UAAU,KAAK,QAAQ;gCACvB,YAAY,KAAK,WAAW,IAAI;gCAChC,OAAO,OAAO,KAAK,UAAU;gCAC7B,MAAM,IAAI,KAAK,KAAK,YAAY,EAAE,kBAAkB;gCACpD,QAAQ,OAAO,KAAK,UAAU,KAAK;4BACrC,CAAC;;oBAED,OAAO;wBACL,OAAO;4BACL,YAAY,UAAU,WAAW;4BACjC,cAAc,UAAU,aAAa;4BACrC,WAAW,UAAU,UAAU;4BAC/B,eAAe,UAAU,eAAe;4BACxC,QAAQ;4BACR,aAAa,UAAU,YAAY;4BACnC,aAAa,UAAU,YAAY;wBACrC;wBACA;wBACA;oBACF;gBAEF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,0BAA0B;oBACxC,oEAAoE;oBACpE,OAAO;gBACT;YACF;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;IA1HgB;;QACP,kNAAQ;;;AA4HV,SAAS,eAAe,MAAe,EAAE,OAAe,CAAC,EAAE,WAAmB,CAAC;;IACpF,OAAO,IAAA,kNAAQ,EAAC;QACd,UAAU;YAAC;YAAgB;YAAQ;YAAM;SAAS;QAClD,OAAO;uCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;gBAC1B,MAAM,KAAK,OAAO,WAAW;gBAE7B,MAAM,CAAC,gBAAgB,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;oBACtD,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,gBAAgB;wBAAE,WAAW;oBAAM,GACzC,KAAK,CAAC,MAAM;oBACf,SACG,IAAI,CAAC,iBACL,MAAM,CAAC,KAAK;wBAAE,OAAO;wBAAS,MAAM;oBAAK,GACzC,EAAE,CAAC,WAAW;iBAClB;gBAED,IAAI,eAAe,KAAK,EAAE,MAAM,eAAe,KAAK;gBACpD,IAAI,YAAY,KAAK,EAAE,MAAM,YAAY,KAAK;gBAE9C,OAAO;oBACL,OAAO,eAAe,IAAI,IAAI,EAAE;oBAChC,YAAY,YAAY,KAAK,IAAI;oBACjC,YAAY,KAAK,IAAI,CAAC,CAAC,YAAY,KAAK,IAAI,CAAC,IAAI;gBACnD;YACF;;QACA,SAAS,CAAC,CAAC;QACX,WAAW;QACX,gBAAgB;IAClB;AACF;IAnCgB;;QACP,kNAAQ;;;AAqCV,SAAS;;IACd,MAAM,cAAc,IAAA,mOAAc;IAElC,OAAO,IAAA,wNAAW,EAAC;QACjB,UAAU;gDAAE,OAAO;gBACjB,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,iBACL,MAAM,GACN,EAAE,CAAC,MAAM;gBAEZ,IAAI,OAAO,MAAM;YACnB;;QACA,SAAS;gDAAE;gBACT,6BAA6B;gBAC7B,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAgB;gBAAC;gBAC5D,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAkB;gBAAC;gBAC9D,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAe;gBAAC;YAC7D;;IACF;AACF;IArBgB;;QACM,mOAAc;QAE3B,wNAAW;;;AAqBb,SAAS;;IACd,MAAM,cAAc,IAAA,mOAAc;IAElC,OAAO,IAAA,wNAAW,EAAC;QACjB,UAAU;mDAAE,OAAO;gBACjB,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,iBACL,MAAM,GACN,EAAE,CAAC,WAAW;gBAEjB,IAAI,OAAO,MAAM;YACnB;;QACA,SAAS;mDAAE;gBACT,6BAA6B;gBAC7B,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAgB;gBAAC;gBAC5D,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAkB;gBAAC;gBAC9D,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAe;gBAAC;YAC7D;;IACF;AACF;IArBgB;;QACM,mOAAc;QAE3B,wNAAW;;;AAqBb,SAAS,aAAa,QAAgB,EAAE,UAAmB,IAAI;;IACpE,OAAO,IAAA,kNAAQ,EAAC;QACd,UAAU;YAAC;YAAc;SAAS;QAClC,OAAO;qCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,mBACL,MAAM,CAAC,eACP,EAAE,CAAC,YAAY;gBAElB,IAAI,OAAO,MAAM;gBAEjB,0BAA0B;gBAC1B,MAAM,cAAc;uBAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE,GAAG;iDAAC,CAAA,IAAK,EAAE,WAAW;;iBAAG;gBACtE,OAAO,YAAY,MAAM;YAC3B;;QACA,WAAW,KAAK,KAAK;QACrB,SAAS,WAAW,CAAC,CAAC;IACxB;AACF;IApBgB;;QACP,kNAAQ;;;AAqBV,SAAS,cAAc,MAAe;;IAC3C,OAAO,IAAA,kNAAQ,EAAoB;QACjC,UAAU;YAAC;YAAe;SAAO;QACjC,OAAO;sCAAE;gBACP,MAAM,WAAW,IAAA,6KAAY;gBAE7B,sFAAsF;gBACtF,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAM,GACzC,KAAK,CAAC;gBAET,IAAI,eAAe,MAAM;gBACzB,MAAM,aAAa,CAAC,YAAY,EAAE,EAAE,GAAG;yDAAC,CAAA,IAAK,EAAE,EAAE;;gBACjD,IAAI,WAAW,MAAM,KAAK,GAAG;oBAC3B,OAAO;wBAAE,QAAQ,EAAE;wBAAE,YAAY,EAAE;wBAAE,kBAAkB;oBAAK;gBAC9D;gBAEA,wCAAwC;gBACxC,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAClD,IAAI,CAAC,wBACL,MAAM,CAAC,2BACP,EAAE,CAAC,mBAAmB;gBAEzB,IAAI,cAAc,MAAM;gBACxB,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,GAAG;oBACpC,OAAO;wBAAE,QAAQ,EAAE;wBAAE,YAAY,EAAE;wBAAE,kBAAkB;oBAAK;gBAC9D;gBAEA,MAAM,cAAc;uBAAI,IAAI,IAAI,QAAQ,GAAG;kDAAC,CAAA,IAAK,EAAE,WAAW;;iBAAG;gBAEjE,mDAAmD;gBACnD,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,SACtD,IAAI,CAAC,mBACL,MAAM,CAAC,uBACP,EAAE,CAAC,MAAM;gBAEZ,IAAI,gBAAgB,MAAM;gBAE1B,MAAM,oBAAoB,IAAI;gBAC9B,CAAC,aAAa,EAAE,EAAE,OAAO;8CAAC,CAAC;wBACzB,kBAAkB,GAAG,CAAC,EAAE,EAAE,EAAE;4BAAE,OAAO,EAAE,KAAK,IAAI;4BAAM,UAAU,EAAE,QAAQ,IAAI;wBAAK;oBACrF;;gBAEA,MAAM,gBAA6F,CAAC;gBAEpG,QAAQ,OAAO;8CAAC,CAAC;wBACf,MAAM,OAAO,kBAAkB,GAAG,CAAC,IAAI,WAAW;wBAClD,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;wBAE1B,MAAM,QAAQ,KAAK,KAAK;wBACxB,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;4BACzB,aAAa,CAAC,MAAM,GAAG;gCAAE,OAAO;gCAAG,SAAS;gCAAG,UAAU,KAAK,QAAQ;4BAAC;wBACzE;wBACA,aAAa,CAAC,MAAM,CAAC,KAAK,IAAI;wBAC9B,IAAI,IAAI,UAAU,EAAE;4BAClB,aAAa,CAAC,MAAM,CAAC,OAAO,IAAI;wBAClC;oBACF;;gBAEA,MAAM,SAA0B,OAAO,OAAO,CAAC,eAAe,GAAG;qDAAC,CAAC,CAAC,OAAO,MAAM;wBAC/E,MAAM,WAAW,MAAM,KAAK,GAAG,IAAI,MAAM,OAAO,GAAG,MAAM,KAAK,GAAG;wBACjE,OAAO;4BACL;4BACA,gBAAgB,MAAM,KAAK;4BAC3B,SAAS,MAAM,OAAO;4BACtB;wBACF;oBACF;oDAAG,IAAI;qDAAC,CAAC,GAAG,IAAM,EAAE,QAAQ,GAAG,EAAE,QAAQ;;gBAEzC,MAAM,aAAa,OAAO,MAAM;yDAAC,CAAA,IAAK,EAAE,cAAc,IAAI,KAAK,EAAE,QAAQ,GAAG;wDAAK,KAAK,CAAC,GAAG;gBAE1F,+CAA+C;gBAC/C,MAAM,iBAAyC,CAAC;gBAChD,WAAW,OAAO;8CAAC,CAAA;wBACjB,MAAM,MAAM,aAAa,CAAC,GAAG,KAAK,CAAC,EAAE;wBACrC,IAAI,KAAK;4BACP,cAAc,CAAC,IAAI,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,IAAI;wBACrD;oBACF;;gBAEA,IAAI,mBAAkC;gBACtC,IAAI,WAAW;gBACf,OAAO,OAAO,CAAC,gBAAgB,OAAO;8CAAC,CAAC,CAAC,KAAK,MAAM;wBAClD,IAAI,QAAQ,UAAU;4BACpB,WAAW;4BACX,mBAAmB;wBACrB;oBACF;;gBAEA,wHAAwH;gBACxH,IAAI,CAAC,oBAAoB,OAAO,MAAM,GAAG,GAAG;oBACzC,MAAM,oBAA4C,CAAC;oBACnD,OAAO,MAAM,CAAC,eAAe,OAAO;kDAAC,CAAA;4BAClC,IAAI,MAAM,QAAQ,EAAE;gCACjB,iBAAiB,CAAC,MAAM,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,QAAQ,CAAC,IAAI,CAAC,IAAI;4BAClF;wBACH;;oBACA,IAAI,cAAc;oBAClB,OAAO,OAAO,CAAC,mBAAmB,OAAO;kDAAC,CAAC,CAAC,KAAK,MAAM;4BACpD,IAAI,QAAQ,aAAa;gCACtB,cAAc;gCACd,mBAAmB;4BACtB;wBACH;;gBACH;gBAEA,OAAO;oBAAE;oBAAQ;oBAAY;gBAAiB;YAChD;;QACA,SAAS,CAAC,CAAC;QACX,WAAW,IAAI,KAAK;IACtB;AACF;IAlHgB;;QACP,kNAAQ","debugId":null}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/hooks/use-decision-trainer.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\nexport interface DecisionTrainerProgress {\r\n  id: string;\r\n  user_id: string;\r\n  category: string;\r\n  total_xp: number;\r\n  scenarios_completed: number;\r\n  correct_answers: number;\r\n  total_attempts: number;\r\n  current_streak: number;\r\n  best_streak: number;\r\n  best_time_seconds: number | null;\r\n  average_time_seconds: number | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface DecisionTrainerAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  scenario_id: string;\r\n  category: string;\r\n  is_correct: boolean;\r\n  selected_options: number[];\r\n  time_taken_ms: number;\r\n  xp_earned: number;\r\n  created_at: string;\r\n}\r\n\r\n// Get user's progress for a specific category\r\nexport function useDecisionTrainerProgress(userId?: string, category?: string) {\r\n  return useQuery({\r\n    queryKey: ['decision-trainer-progress', userId, category],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      let query = supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n      \r\n      if (category) {\r\n        query = query.eq('category', category);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n\r\n      if (error) throw error;\r\n      return data || [];\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0,\r\n    refetchOnMount: 'always',\r\n  });\r\n}\r\n\r\n// Get user's overall stats across all categories\r\nexport function useDecisionTrainerStats(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['decision-trainer-stats', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      const { data, error } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId!);\r\n\r\n      if (error) throw error;\r\n\r\n      const progress = data || [];\r\n      \r\n      // Calculate overall stats\r\n      const totalXp = progress.reduce((sum, p) => sum + p.total_xp, 0);\r\n      const totalScenarios = progress.reduce((sum, p) => sum + p.scenarios_completed, 0);\r\n      const totalCorrect = progress.reduce((sum, p) => sum + p.correct_answers, 0);\r\n      const totalAttempts = progress.reduce((sum, p) => sum + p.total_attempts, 0);\r\n      const bestStreak = Math.max(...progress.map(p => p.best_streak), 0);\r\n      const bestTime = Math.min(...progress.map(p => p.best_time_seconds).filter(t => t !== null), Infinity);\r\n      const accuracy = totalAttempts > 0 ? Math.round((totalCorrect / totalAttempts) * 100) : 0;\r\n\r\n      return {\r\n        totalXp,\r\n        totalScenarios,\r\n        totalCorrect,\r\n        totalAttempts,\r\n        bestStreak,\r\n        bestTime: bestTime === Infinity ? null : bestTime,\r\n        accuracy,\r\n        categoriesCompleted: progress.length,\r\n        categoryProgress: progress,\r\n      };\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 60 * 1000, // 1 minute\r\n  });\r\n}\r\n\r\n// Get IDs of scenarios where the user's latest attempt was incorrect\r\nexport function useWeakScenarioIds(userId?: string) {\r\n  return useQuery({\r\n    queryKey: ['weak-scenario-ids', userId],\r\n    queryFn: async () => {\r\n      const supabase = createClient();\r\n      \r\n      // Get all attempts for this user, ordered by date\r\n      const { data, error } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .select('scenario_id, is_correct, created_at')\r\n        .eq('user_id', userId!)\r\n        .order('created_at', { ascending: true }); // Oldest to newest\r\n\r\n      if (error) throw error;\r\n\r\n      // Calculate latest status for each scenario\r\n      const latestStatus = new Map<string, boolean>();\r\n      (data || []).forEach((attempt) => {\r\n        latestStatus.set(attempt.scenario_id, attempt.is_correct);\r\n      });\r\n\r\n      // Filter for IDs where the latest attempt was FALSE (incorrect)\r\n      const weakIds: string[] = [];\r\n      latestStatus.forEach((isCorrect, id) => {\r\n        if (!isCorrect) {\r\n          weakIds.push(id);\r\n        }\r\n      });\r\n\r\n      return weakIds;\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 0, // Always fresh\r\n  });\r\n}\r\n\r\n// Submit scenario attempt and update progress\r\nexport function useSubmitScenarioAttempt() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({\r\n      userId,\r\n      scenarioId,\r\n      category,\r\n      isCorrect,\r\n      selectedOptions,\r\n      timeTakenMs,\r\n      xpEarned,\r\n    }: {\r\n      userId: string;\r\n      scenarioId: string;\r\n      category: string;\r\n      isCorrect: boolean;\r\n      selectedOptions: number[];\r\n      timeTakenMs: number;\r\n      xpEarned: number;\r\n    }) => {\r\n      const supabase = createClient();\r\n\r\n      // 1. Insert the attempt record\r\n      const { data: attempt, error: attemptError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .insert({\r\n          user_id: userId,\r\n          scenario_id: scenarioId,\r\n          category,\r\n          is_correct: isCorrect,\r\n          selected_options: selectedOptions,\r\n          time_taken_ms: timeTakenMs,\r\n          xp_earned: xpEarned,\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (attemptError) throw attemptError;\r\n\r\n      // 2. Get current progress for this category\r\n      const { data: currentProgress } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .eq('category', category)\r\n        .maybeSingle();\r\n\r\n      // 3. Calculate new progress values\r\n      const newTotalXp = (currentProgress?.total_xp || 0) + xpEarned;\r\n      const newScenariosCompleted = (currentProgress?.scenarios_completed || 0) + 1;\r\n      const newCorrectAnswers = (currentProgress?.correct_answers || 0) + (isCorrect ? 1 : 0);\r\n      const newTotalAttempts = (currentProgress?.total_attempts || 0) + 1;\r\n      \r\n      // Calculate streak\r\n      let newCurrentStreak = 0;\r\n      let newBestStreak = currentProgress?.best_streak || 0;\r\n      \r\n      if (isCorrect) {\r\n        newCurrentStreak = (currentProgress?.current_streak || 0) + 1;\r\n        newBestStreak = Math.max(newBestStreak, newCurrentStreak);\r\n      } else {\r\n        newCurrentStreak = 0;\r\n      }\r\n\r\n      // Calculate time stats\r\n      const timeInSeconds = Math.round(timeTakenMs / 1000);\r\n      const newBestTime = currentProgress?.best_time_seconds \r\n        ? Math.min(currentProgress.best_time_seconds, timeInSeconds)\r\n        : timeInSeconds;\r\n      \r\n      // Calculate average time\r\n      const totalTimeMs = (currentProgress?.average_time_seconds || 0) * (currentProgress?.total_attempts || 0) + timeTakenMs;\r\n      const newAverageTime = Math.round(totalTimeMs / newTotalAttempts / 1000);\r\n\r\n      // 4. Upsert progress record\r\n      const { data: progress, error: progressError } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .upsert({\r\n          user_id: userId,\r\n          category,\r\n          total_xp: newTotalXp,\r\n          scenarios_completed: newScenariosCompleted,\r\n          correct_answers: newCorrectAnswers,\r\n          total_attempts: newTotalAttempts,\r\n          current_streak: newCurrentStreak,\r\n          best_streak: newBestStreak,\r\n          best_time_seconds: newBestTime,\r\n          average_time_seconds: newAverageTime,\r\n          updated_at: new Date().toISOString(),\r\n        }, {\r\n          onConflict: 'user_id,category'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (progressError) throw progressError;\r\n\r\n      return {\r\n        attempt,\r\n        progress,\r\n        newStats: {\r\n          totalXp: newTotalXp,\r\n          scenariosCompleted: newScenariosCompleted,\r\n          correctAnswers: newCorrectAnswers,\r\n          totalAttempts: newTotalAttempts,\r\n          currentStreak: newCurrentStreak,\r\n          bestStreak: newBestStreak,\r\n          accuracy: Math.round((newCorrectAnswers / newTotalAttempts) * 100),\r\n        }\r\n      };\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-progress', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-stats', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['leaderboard'] });\r\n    },\r\n  });\r\n}\r\n\r\n// Complete category session (batch update for multiple scenarios)\r\nexport function useCompleteCategory() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({\r\n      userId,\r\n      category,\r\n      attempts,\r\n      totalTimeMs,\r\n    }: {\r\n      userId: string;\r\n      category: string;\r\n      attempts: Array<{\r\n        scenarioId: string;\r\n        isCorrect: boolean;\r\n        selectedOptions: number[];\r\n        timeTakenMs: number;\r\n        xpEarned: number;\r\n      }>;\r\n      totalTimeMs: number;\r\n    }) => {\r\n      const supabase = createClient();\r\n\r\n      // Insert all attempts\r\n      const attemptRecords = attempts.map(attempt => ({\r\n        user_id: userId,\r\n        scenario_id: attempt.scenarioId,\r\n        category,\r\n        is_correct: attempt.isCorrect,\r\n        selected_options: attempt.selectedOptions,\r\n        time_taken_ms: attempt.timeTakenMs,\r\n        xp_earned: attempt.xpEarned,\r\n      }));\r\n\r\n      const { error: attemptsError } = await supabase\r\n        .from('decision_trainer_attempts')\r\n        .insert(attemptRecords);\r\n\r\n      if (attemptsError) throw attemptsError;\r\n\r\n      // Calculate session stats\r\n      const totalXpEarned = attempts.reduce((sum, a) => sum + a.xpEarned, 0);\r\n      const correctCount = attempts.filter(a => a.isCorrect).length;\r\n      const totalCount = attempts.length;\r\n      \r\n      // Calculate streak (consecutive correct answers)\r\n      let maxStreak = 0;\r\n      let currentStreak = 0;\r\n      for (const attempt of attempts) {\r\n        if (attempt.isCorrect) {\r\n          currentStreak++;\r\n          maxStreak = Math.max(maxStreak, currentStreak);\r\n        } else {\r\n          currentStreak = 0;\r\n        }\r\n      }\r\n\r\n      // Get current progress\r\n      const { data: currentProgress } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .eq('category', category)\r\n        .maybeSingle();\r\n\r\n      // Update progress\r\n      const newTotalXp = (currentProgress?.total_xp || 0) + totalXpEarned;\r\n      const newScenariosCompleted = (currentProgress?.scenarios_completed || 0) + totalCount;\r\n      const newCorrectAnswers = (currentProgress?.correct_answers || 0) + correctCount;\r\n      const newTotalAttempts = (currentProgress?.total_attempts || 0) + totalCount;\r\n      const newBestStreak = Math.max(currentProgress?.best_streak || 0, maxStreak);\r\n      \r\n      const avgTimeSeconds = Math.round(totalTimeMs / totalCount / 1000);\r\n      const newBestTime = currentProgress?.best_time_seconds \r\n        ? Math.min(currentProgress.best_time_seconds, avgTimeSeconds)\r\n        : avgTimeSeconds;\r\n\r\n      const { data: progress, error: progressError } = await supabase\r\n        .from('decision_trainer_progress')\r\n        .upsert({\r\n          user_id: userId,\r\n          category,\r\n          total_xp: newTotalXp,\r\n          scenarios_completed: newScenariosCompleted,\r\n          correct_answers: newCorrectAnswers,\r\n          total_attempts: newTotalAttempts,\r\n          current_streak: maxStreak, // Set to session streak\r\n          best_streak: newBestStreak,\r\n          best_time_seconds: newBestTime,\r\n          average_time_seconds: avgTimeSeconds,\r\n          updated_at: new Date().toISOString(),\r\n        }, {\r\n          onConflict: 'user_id,category'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (progressError) throw progressError;\r\n\r\n      return {\r\n        progress,\r\n        sessionStats: {\r\n          totalXpEarned,\r\n          correctCount,\r\n          totalCount,\r\n          accuracy: Math.round((correctCount / totalCount) * 100),\r\n          maxStreak,\r\n          avgTimeSeconds,\r\n        }\r\n      };\r\n    },\r\n    onSuccess: (_, variables) => {\r\n      // Invalidate related queries\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-progress', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['decision-trainer-stats', variables.userId] });\r\n      queryClient.invalidateQueries({ queryKey: ['leaderboard'] });\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1832, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/types/database.ts"],"sourcesContent":["// Database types for DriveWise\r\n\r\nexport type LicenseCategory = 'A' | 'B' | 'C' | 'D';\r\nexport type LanguageCode = 'sq' | 'en';\r\n\r\nexport interface Question {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  topic?: string;\r\n  image_url?: string;\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface QuestionTranslation {\r\n  id: string;\r\n  question_id: string;\r\n  language: LanguageCode;\r\n  question_text: string;\r\n  explanation?: string;\r\n}\r\n\r\nexport interface AnswerOption {\r\n  id: string;\r\n  question_id: string;\r\n  option_order: number;\r\n  is_correct: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface AnswerOptionTranslation {\r\n  id: string;\r\n  answer_option_id: string;\r\n  language: LanguageCode;\r\n  option_text: string;\r\n}\r\n\r\nexport interface TestSet {\r\n  id: string;\r\n  category: LicenseCategory;\r\n  test_number: number;\r\n  name?: string;\r\n  is_random: boolean;\r\n  question_count: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface TestSetQuestion {\r\n  id: string;\r\n  test_set_id: string;\r\n  question_id: string;\r\n  question_order: number;\r\n}\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email?: string;\r\n  full_name?: string;\r\n  preferred_language: LanguageCode;\r\n  role?: 'student' | 'admin';\r\n  is_admin: boolean;\r\n  is_blocked: boolean;\r\n  app_rating?: number; // 1-5 stars, optional\r\n  is_premium?: boolean;\r\n  subscription_id?: string | null;\r\n  subscription_end?: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface TestAttempt {\r\n  id: string;\r\n  user_id: string;\r\n  test_set_id?: string;\r\n  category: LicenseCategory;\r\n  score: number;\r\n  total_questions: number;\r\n  percentage: number;\r\n  time_taken_seconds?: number;\r\n  is_assigned: boolean;\r\n  assigned_by?: string;\r\n  started_at: string;\r\n  completed_at: string;\r\n}\r\n\r\nexport interface TestAttemptAnswer {\r\n  id: string;\r\n  test_attempt_id: string;\r\n  question_id: string;\r\n  selected_answer_id: string;\r\n  is_correct: boolean;\r\n  answered_at: string;\r\n}\r\n\r\nexport interface StudyMaterial {\r\n  id: string;\r\n  category?: string;\r\n  material_type: string;\r\n  order_index?: number;\r\n  is_published: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface StudyMaterialTranslation {\r\n  id: string;\r\n  study_material_id: string;\r\n  language: LanguageCode;\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface RoadSign {\r\n  id: string;\r\n  sign_code?: string;\r\n  category?: string;\r\n  image_url: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface RoadSignTranslation {\r\n  id: string;\r\n  road_sign_id: string;\r\n  language: LanguageCode;\r\n  name: string;\r\n  description?: string;\r\n}\r\n\r\n// Composite types for queries with joins\r\nexport interface QuestionWithTranslations extends Question {\r\n  translations: QuestionTranslation[];\r\n  answers: AnswerOptionWithTranslations[];\r\n}\r\n\r\nexport interface AnswerOptionWithTranslations extends AnswerOption {\r\n  translations: AnswerOptionTranslation[];\r\n}\r\n\r\nexport interface TestAttemptWithDetails extends TestAttempt {\r\n  answers: TestAttemptAnswerWithQuestion[];\r\n}\r\n\r\nexport interface TestAttemptAnswerWithQuestion extends TestAttemptAnswer {\r\n  question: QuestionWithTranslations;\r\n}\r\n\r\n// Category metadata\r\nexport const CATEGORY_INFO: Record<LicenseCategory, { name: string; description: string }> = {\r\n  A: { name: 'Category A', description: 'Motorcycles' },\r\n  B: { name: 'Category B', description: 'Cars' },\r\n  C: { name: 'Category C', description: 'Trucks' },\r\n  D: { name: 'Category D', description: 'Buses' },\r\n};\r\n\r\n// Hazard Rush Game\r\nexport interface HazardRushRun {\r\n  id: string;\r\n  user_id: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  average_reaction_time: number;\r\n  seed: string;\r\n  signature: string;\r\n  created_at: string;\r\n}\r\n\r\nexport interface HazardRushLeaderboardEntry {\r\n  rank: number;\r\n  user_id: string;\r\n  user_name: string;\r\n  score: number;\r\n  hazards_cleared: number;\r\n  hazards_failed: number;\r\n  accuracy: number;\r\n  created_at: string;\r\n}\r\n\r\nexport interface UserPlan {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  start_date: string;\r\n  end_date: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Order {\r\n  id: string;\r\n  user_id: string;\r\n  category: LicenseCategory;\r\n  plan_tier: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PaymentTransaction {\r\n  id: string;\r\n  order_id: string;\r\n  provider: string;\r\n  provider_status: string;\r\n  amount_cents: number;\r\n  currency: string;\r\n  raw_payload: any;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\n// Language metadata\r\nexport const LANGUAGE_INFO: Record<LanguageCode, { name: string; nativeName: string }> = {\r\n  sq: { name: 'Albanian', nativeName: 'Shqip' },\r\n  en: { name: 'English', nativeName: 'English' },\r\n};\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;AAoJxB,MAAM,gBAAgF;IAC3F,GAAG;QAAE,MAAM;QAAc,aAAa;IAAc;IACpD,GAAG;QAAE,MAAM;QAAc,aAAa;IAAO;IAC7C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAS;IAC/C,GAAG;QAAE,MAAM;QAAc,aAAa;IAAQ;AAChD;AA+DO,MAAM,gBAA4E;IACvF,IAAI;QAAE,MAAM;QAAY,YAAY;IAAQ;IAC5C,IAAI;QAAE,MAAM;QAAW,YAAY;IAAU;AAC/C","debugId":null}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/drivewise/web/app/%28pages%29/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useMemo } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { GlassCard } from '@/components/ui/glass-card';\r\nimport { Button } from '@/components/ui/button';\r\nimport Link from 'next/link';\r\nimport {\r\n  Trophy,\r\n  Target,\r\n  Zap,\r\n  History,\r\n  Brain,\r\n  Activity,\r\n  TrendingUp,\r\n  AlertCircle,\r\n  ArrowRight,\r\n} from 'lucide-react';\r\nimport { Navbar } from '@/components/navbar';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\nimport { useLanguage } from '@/contexts/language-context';\r\nimport { useAuth } from '@/contexts/auth-context';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n  useDashboardStats,\r\n  useWeakTopics,\r\n  useGlobalDailyStreak,\r\n} from '@/hooks/use-test-attempts';\r\nimport { useDecisionTrainerStats } from '@/hooks/use-decision-trainer';\r\nimport { CATEGORY_INFO, type LicenseCategory } from '@/types/database';\r\n\r\nexport default function DashboardPage() {\r\n  const { t, language } = useLanguage();\r\n  const isSq = language === 'sq';\r\n  const { user, userProfile, loading: authLoading } = useAuth();\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const { data: dashboardData, isLoading: loading, error } = useDashboardStats(\r\n    user?.id\r\n  );\r\n  const { data: trainerStats } = useDecisionTrainerStats(user?.id);\r\n  const { data: weakTopicsData } = useWeakTopics(user?.id);\r\n  const { data: globalStreak } = useGlobalDailyStreak(user?.id);\r\n\r\n  const categories = useMemo(\r\n    () => Object.keys(CATEGORY_INFO) as LicenseCategory[],\r\n    []\r\n  );\r\n\r\n  const stats = dashboardData?.stats || {\r\n    totalTests: 0,\r\n    averageScore: 0,\r\n    bestScore: 0,\r\n    testsThisWeek: 0,\r\n    streak: 0,\r\n    passedTests: 0,\r\n    failedTests: 0,\r\n  };\r\n\r\n  const progressData = dashboardData?.progressData || [];\r\n  const recentTests = dashboardData?.recentTests || [];\r\n\r\n  const pieData = useMemo(() => {\r\n    if (stats.totalTests === 0) return [{ name: t('dashboard.emptyChart'), value: 1, color: '#27272a' }];\r\n    return [\r\n      { name: t('dashboard.passed'), value: stats.passedTests, color: '#10b981' },\r\n      { name: t('dashboard.failed'), value: stats.failedTests, color: '#ef4444' },\r\n    ];\r\n  }, [stats, t]);\r\n\r\n  const userFullName = userProfile?.full_name;\r\n\r\n  // real trainer activity (used only when user actually has scenarios/xp/etc)\r\n  const hasTrainerActivity =\r\n    !!trainerStats &&\r\n    (trainerStats.totalScenarios > 0 ||\r\n      trainerStats.totalXp > 0 ||\r\n      trainerStats.bestStreak > 0 ||\r\n      trainerStats.categoriesCompleted > 0);\r\n\r\n  // Redirect to home if not authenticated and not loading\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push('/');\r\n    }\r\n  }, [user, authLoading, router]);\r\n\r\n  // If no user at all, skeleton\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-8 py-12 max-w-7xl\">\r\n            <div className=\"mb-12 space-y-3\">\r\n              <Skeleton className=\"h-8 w-64\" />\r\n              <Skeleton className=\"h-4 w-80\" />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\r\n              {Array.from({ length: 4 }).map((_, i) => (\r\n                <GlassCard key={i} className=\"p-6\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <Skeleton className=\"h-4 w-24\" />\r\n                    <Skeleton className=\"h-5 w-5 rounded-full\" />\r\n                  </div>\r\n                  <Skeleton className=\"h-7 w-16 mb-2\" />\r\n                  <Skeleton className=\"h-3 w-32\" />\r\n                </GlassCard>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle error state\r\n  if (error) {\r\n    console.error(' ERROR FETCHING DASHBOARD DATA:', error);\r\n\r\n    if (error.message?.includes('42P01')) {\r\n      return (\r\n        <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-destructive mb-4\"> Database tables missing!</p>\r\n            <p className=\"text-muted-foreground\">\r\n              Run database.sql in Supabase SQL Editor.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  // Loading skeleton (after auth)\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Navbar />\r\n        <div className=\"pt-32\">\r\n          <div className=\"container mx-auto px-8 py-12 max-w-7xl\">\r\n            <div className=\"mb-12 space-y-3\">\r\n              <Skeleton className=\"h-8 w-64\" />\r\n              <Skeleton className=\"h-4 w-80\" />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\r\n              {Array.from({ length: 4 }).map((_, i) => (\r\n                <GlassCard key={i} className=\"p-6\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <Skeleton className=\"h-4 w-24\" />\r\n                    <Skeleton className=\"h-5 w-5 rounded-full\" />\r\n                  </div>\r\n                  <Skeleton className=\"h-7 w-16 mb-2\" />\r\n                  <Skeleton className=\"h-3 w-32\" />\r\n                </GlassCard>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 auto-rows-fr mb-12\">\r\n              <GlassCard className=\"p-6 lg:col-span-2\">\r\n                <div className=\"mb-6 space-y-2\">\r\n                  <Skeleton className=\"h-5 w-40\" />\r\n                  <Skeleton className=\"h-3 w-64\" />\r\n                </div>\r\n                <Skeleton className=\"h-60 w-full rounded-xl\" />\r\n              </GlassCard>\r\n\r\n              <GlassCard className=\"p-6 lg:col-span-1 flex flex-col gap-6\">\r\n                <div className=\"flex justify-between\">\r\n                  <div className=\"space-y-2\">\r\n                    <Skeleton className=\"h-5 w-32\" />\r\n                    <Skeleton className=\"h-3 w-20\" />\r\n                  </div>\r\n                  <Skeleton className=\"h-8 w-8 rounded-lg\" />\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-3 flex-1\">\r\n                  <Skeleton className=\"h-20 w-full rounded-xl\" />\r\n                  <Skeleton className=\"h-20 w-full rounded-xl\" />\r\n                  <Skeleton className=\"h-20 w-full rounded-xl\" />\r\n                  <Skeleton className=\"h-20 w-full rounded-xl\" />\r\n                </div>\r\n                <Skeleton className=\"h-10 w-full mt-auto\" />\r\n              </GlassCard>\r\n\r\n              <GlassCard className=\"p-6 lg:col-span-1 flex flex-col justify-between\">\r\n                <div className=\"space-y-4\">\r\n                  <Skeleton className=\"h-6 w-24 rounded-full\" />\r\n                  <div className=\"space-y-2\">\r\n                    <Skeleton className=\"h-5 w-40\" />\r\n                    <Skeleton className=\"h-3 w-full\" />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-3 mt-8\">\r\n                  <Skeleton className=\"h-12 w-full\" />\r\n                  <Skeleton className=\"h-12 w-full\" />\r\n                  <Skeleton className=\"h-12 w-full\" />\r\n                </div>\r\n              </GlassCard>\r\n\r\n              <GlassCard className=\"p-6 lg:col-span-2\">\r\n                <div className=\"mb-6 space-y-2\">\r\n                  <Skeleton className=\"h-5 w-32\" />\r\n                  <Skeleton className=\"h-3 w-52\" />\r\n                </div>\r\n                <div className=\"flex items-center justify-center h-60\">\r\n                  <Skeleton className=\"h-48 w-48 rounded-full\" />\r\n                </div>\r\n              </GlassCard>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const hasData = stats.totalTests > 0;\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen bg-background text-foreground overflow-hidden\">\r\n      {/* Background grid */}\r\n      <div\r\n        aria-hidden\r\n        className=\"pointer-events-none absolute inset-0 -z-10 [mask-image:radial-gradient(60%_60%_at_50%_20%,#000_20%,transparent_70%)]\"\r\n      >\r\n        <svg\r\n          className=\"h-full w-full opacity-[0.06]\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <defs>\r\n            <pattern\r\n              id=\"dashboard-grid\"\r\n              width=\"32\"\r\n              height=\"32\"\r\n              patternUnits=\"userSpaceOnUse\"\r\n            >\r\n              <path\r\n                d=\"M32 0H0V32\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"0.4\"\r\n              />\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#dashboard-grid)\" />\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Warm glows & rails */}\r\n      <div className=\"pointer-events-none absolute inset-x-0 top-0 h-72 bg-gradient-to-b from-orange-500/25 via-transparent to-transparent blur-3xl\" />\r\n      <div aria-hidden className=\"pointer-events-none absolute inset-0\">\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 left-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent\" />\r\n        <div className=\"hidden lg:block absolute top-24 bottom-24 right-[10%] w-px bg-gradient-to-b from-transparent via-orange-500/25 to-transparent\" />\r\n      </div>\r\n\r\n      <Navbar />\r\n\r\n      <motion.div className=\"pt-40 pb-16\">\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ duration: 0.3 }}\r\n          className=\"container mx-auto px-8 max-w-7xl relative\"\r\n        >\r\n          {/* Hero snapshot */}\r\n          <div className=\"mb-12 relative\">\r\n            <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-6\">\r\n              <div className=\"space-y-2 max-w-xl\">\r\n                <div className=\"inline-flex items-center gap-2 rounded-full border border-orange-500/40 bg-orange-500/10 px-3 py-1 text-[11px] font-medium text-orange-300\">\r\n                  <Activity className=\"w-3.5 h-3.5\" />\r\n                  <span>{t('dashboard.panelTitle')}</span>\r\n                </div>\r\n                <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight\">\r\n                  {isSq ? 'Progresi yt' : 'Your progress'}\r\n                </h1>\r\n                <p className=\"text-sm md:text-base text-muted-foreground leading-relaxed\">\r\n                  {isSq\r\n                    ? 'Shiko nse je gati pr provim dhe ku duhet t fokusohesh.'\r\n                    : 'See if youre exam-ready and where to focus next.'}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-3 gap-3 w-full md:w-auto\">\r\n                <GlassCard className=\"p-3 flex flex-col gap-1 min-w-[100px] border-border/60 bg-black/40\">\r\n                  <span className=\"text-[10px] text-muted-foreground flex items-center gap-1.5 uppercase tracking-wider\">\r\n                    <Target className=\"w-3 h-3 text-orange-400\" />\r\n                    {t('dashboard.avgScore')}\r\n                  </span>\r\n                  <span className=\"text-xl font-bold text-foreground\">\r\n                    {stats.averageScore}%\r\n                  </span>\r\n                  <div className=\"h-1 rounded-full bg-white/10 overflow-hidden w-full mt-auto\">\r\n                    <div\r\n                      className=\"h-full bg-gradient-to-r from-orange-500 to-amber-300\"\r\n                      style={{ width: `${stats.averageScore}%` }}\r\n                    />\r\n                  </div>\r\n                </GlassCard>\r\n\r\n                <GlassCard className=\"p-3 flex flex-col gap-1 min-w-[100px] border-border/60 bg-black/40\">\r\n                  <span className=\"text-[10px] text-muted-foreground flex items-center gap-1.5 uppercase tracking-wider\">\r\n                    <Trophy className=\"w-3 h-3 text-orange-400\" />\r\n                    {t('dashboard.totalTests')}\r\n                  </span>\r\n                  <span className=\"text-xl font-bold text-foreground\">\r\n                    {stats.totalTests}\r\n                  </span>\r\n                  <div className=\"h-1 rounded-full bg-white/10 overflow-hidden w-full mt-auto\">\r\n                    <div\r\n                      className=\"h-full bg-gradient-to-r from-orange-500 to-amber-300\"\r\n                      style={{\r\n                        width: `${Math.min(\r\n                          (stats.totalTests / 50) * 100,\r\n                          100\r\n                        )}%`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </GlassCard>\r\n\r\n                <GlassCard className=\"p-3 flex flex-col gap-1 min-w-[100px] border-border/60 bg-black/40\">\r\n                  <span className=\"text-[10px] text-muted-foreground flex items-center gap-1.5 uppercase tracking-wider\">\r\n                    <Zap className=\"w-3 h-3 text-orange-400\" />\r\n                    {t('dashboard.streak')}\r\n                  </span>\r\n                  <span className=\"text-xl font-bold text-foreground\">\r\n                    {globalStreak?.currentStreak ?? 0}\r\n                  </span>\r\n                  <div className=\"h-1 rounded-full bg-white/10 overflow-hidden w-full mt-auto\">\r\n                    <div\r\n                      className=\"h-full bg-gradient-to-r from-orange-500 to-amber-300\"\r\n                      style={{\r\n                        width: `${Math.min(\r\n                          ((globalStreak?.currentStreak ?? 0) / 7) * 100,\r\n                          100\r\n                        )}%`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </GlassCard>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Divider */}\r\n          <div className=\"h-px w-full bg-gradient-to-r from-transparent via-orange-500/20 to-transparent mb-10\" />\r\n\r\n          {/* === MAIN LAYOUT === */}\r\n          {hasData ? (\r\n            <div className=\"space-y-8\">\r\n              {/* Weak topics - Only show after 20 tests */}\r\n              {weakTopicsData && stats.totalTests >= 20 && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 0.1 }}\r\n                >\r\n                  <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85\">\r\n                    <div className=\"flex flex-col gap-6\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"space-y-1\">\r\n                          <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                            <AlertCircle className=\"w-5 h-5 text-orange-400\" />\r\n                            {t('dashboard.weakTopicsTitle')}\r\n                          </h2>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            {t('dashboard.weakTopicsSubtitle')}\r\n                          </p>\r\n                        </div>\r\n                        {weakTopicsData.weakTopics.length > 0 && (\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            className=\"text-xs h-8 border-orange-500/30 text-orange-300 hover:bg-orange-500/10\"\r\n                            asChild\r\n                          >\r\n                            <Link\r\n                              href={`/test/${(\r\n                                weakTopicsData.dominantCategory ||\r\n                                categories[0] ||\r\n                                'B'\r\n                              ).toLowerCase()}/personalized`}\r\n                            >\r\n                              {t('dashboard.practiceWeakTopics')}\r\n                            </Link>\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n\r\n                      {weakTopicsData.topics.length > 0 ? (\r\n                        <div className=\"space-y-4\">\r\n                          {weakTopicsData.topics.slice(0, 5).map((tTopic) => {\r\n                            const percentage = Math.round(\r\n                              tTopic.accuracy * 100\r\n                            );\r\n                            const isWeak = weakTopicsData.weakTopics.some(\r\n                              (w) => w.topic === tTopic.topic\r\n                            );\r\n                            return (\r\n                              <div key={tTopic.topic} className=\"space-y-2\">\r\n                                <div className=\"flex items-center justify-between text-sm\">\r\n                                  <span className=\"font-medium\">\r\n                                    {tTopic.topic}\r\n                                  </span>\r\n                                  <span\r\n                                    className={`font-semibold ${\r\n                                      isWeak\r\n                                        ? 'text-red-400'\r\n                                        : percentage >= 90\r\n                                        ? 'text-emerald-400'\r\n                                        : 'text-orange-300'\r\n                                    }`}\r\n                                  >\r\n                                    {percentage}%\r\n                                  </span>\r\n                                </div>\r\n                                <div className=\"w-full bg-white/5 rounded-full h-2 overflow-hidden\">\r\n                                  <div\r\n                                    className={`h-full rounded-full transition-all duration-500 ${\r\n                                      isWeak\r\n                                        ? 'bg-red-500/80'\r\n                                        : percentage >= 90\r\n                                        ? 'bg-emerald-500/80'\r\n                                        : 'bg-orange-400/80'\r\n                                    }`}\r\n                                    style={{\r\n                                      width: `${Math.max(5, percentage)}%`,\r\n                                    }}\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"relative flex flex-col items-center justify-center h-64 text-center space-y-3 rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden\">\r\n                          <div\r\n                            className=\"absolute inset-0 opacity-20\"\r\n                            style={{\r\n                              backgroundImage:\r\n                                'radial-gradient(#ffffff 1px, transparent 1px)',\r\n                              backgroundSize: '24px 24px',\r\n                            }}\r\n                          ></div>\r\n                          <div className=\"z-10 p-4 rounded-full bg-white/5 mb-1\">\r\n                            <Activity className=\"w-6 h-6 text-muted-foreground/50\" />\r\n                          </div>\r\n                          <div className=\"z-10 max-w-[250px]\">\r\n                            <p className=\"text-sm font-medium text-foreground/80\">\r\n                              {t('dashboard.noActivity')}\r\n                            </p>\r\n                            <p className=\"text-xs text-muted-foreground mt-1\">\r\n                              {t('dashboard.completeTests')}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {weakTopicsData.topics.length > 0 &&\r\n                        (() => {\r\n                          const strongTopics = weakTopicsData.topics\r\n                            .filter(\r\n                              (tTopic) =>\r\n                                tTopic.totalQuestions >= 2 &&\r\n                                tTopic.accuracy >= 0.8\r\n                            )\r\n                            .sort((a, b) => b.accuracy - a.accuracy)\r\n                            .slice(0, 3);\r\n\r\n                          if (strongTopics.length === 0) return null;\r\n\r\n                          return (\r\n                            <div className=\"pt-3 mt-2 border-t border-border/40\">\r\n                              <p className=\"text-[11px] font-semibold text-muted-foreground mb-1\">\r\n                                {t('dashboard.strongTopicsTitle')}\r\n                              </p>\r\n                              <div className=\"flex flex-wrap gap-2\">\r\n                                {strongTopics.map((tTopic) => (\r\n                                  <span\r\n                                    key={tTopic.topic}\r\n                                    className=\"inline-flex items-center rounded-full border border-emerald-500/40 bg-emerald-500/10 px-2 py-0.5 text-[11px] text-emerald-600\"\r\n                                  >\r\n                                    {tTopic.topic}\r\n                                  </span>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })()}\r\n\r\n                      {categories.length > 0 && (\r\n                        <div className=\"pt-3 mt-2 border-t border-border/40 flex flex-wrap gap-2\">\r\n                          {categories.slice(0, 4).map((cat) => (\r\n                            <Button\r\n                              key={cat}\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              asChild\r\n                              className=\"text-xs px-3 py-1\"\r\n                            >\r\n                              <Link\r\n                                href={`/test/${cat\r\n                                  .toLowerCase()}/personalized`}\r\n                              >\r\n                                {t('test.personalizedName')}  {cat}\r\n                              </Link>\r\n                            </Button>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </GlassCard>\r\n                </motion.div>\r\n              )}\r\n\r\n              {/* 4 main cards grid */}\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 auto-rows-fr\">\r\n                {/* Weekly progress (wide) */}\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 0.2 }}\r\n                  className=\"h-full lg:col-span-2\"\r\n                >\r\n                  <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85 h-full flex flex-col\">\r\n                    <div className=\"mb-8 space-y-1\">\r\n                      <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                        <TrendingUp className=\"w-5 h-5 text-orange-400\" />\r\n                        {t('dashboard.weeklyProgress')}\r\n                      </h2>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {t('dashboard.weeklyProgressDesc')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"relative w-full flex-1 min-h-[250px]\">\r\n                      {progressData.length > 0 ? (\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                          <LineChart\r\n                            data={progressData}\r\n                            margin={{\r\n                              top: 10,\r\n                              right: 10,\r\n                              left: -20,\r\n                              bottom: 0,\r\n                            }}\r\n                          >\r\n                            <defs>\r\n                              <linearGradient\r\n                                id=\"colorScore\"\r\n                                x1=\"0\"\r\n                                y1=\"0\"\r\n                                x2=\"0\"\r\n                                y2=\"1\"\r\n                              >\r\n                                <stop\r\n                                  offset=\"5%\"\r\n                                  stopColor=\"#f97316\"\r\n                                  stopOpacity={0.3}\r\n                                />\r\n                                <stop\r\n                                  offset=\"95%\"\r\n                                  stopColor=\"#f97316\"\r\n                                  stopOpacity={0}\r\n                                />\r\n                              </linearGradient>\r\n                            </defs>\r\n                            <CartesianGrid\r\n                              stroke=\"#ffffff10\"\r\n                              strokeDasharray=\"3 3\"\r\n                              vertical={false}\r\n                            />\r\n                            <XAxis\r\n                              dataKey=\"date\"\r\n                              tickLine={false}\r\n                              axisLine={false}\r\n                              tick={{ fill: '#a1a1aa', fontSize: 11 }}\r\n                              dy={10}\r\n                            />\r\n                            <YAxis\r\n                              tickLine={false}\r\n                              axisLine={false}\r\n                              tick={{ fill: '#a1a1aa', fontSize: 11 }}\r\n                              tickFormatter={(v) => `${v}%`}\r\n                            />\r\n                            <Tooltip\r\n                              cursor={{ stroke: '#ffffff20', strokeWidth: 1 }}\r\n                              contentStyle={{\r\n                                backgroundColor: '#09090b',\r\n                                border: '1px solid #27272a',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '0.5rem 0.75rem',\r\n                                boxShadow:\r\n                                  '0 10px 30px -10px rgba(0,0,0,0.5)',\r\n                              }}\r\n                              labelStyle={{\r\n                                color: '#e5e5e5',\r\n                                fontSize: 12,\r\n                                marginBottom: 4,\r\n                              }}\r\n                              itemStyle={{\r\n                                color: '#fdba74',\r\n                                fontSize: 12,\r\n                                fontWeight: 600,\r\n                              }}\r\n                              formatter={(value: number) => [\r\n                                `${value}%`,\r\n                                'Score',\r\n                              ]}\r\n                            />\r\n                            <Line\r\n                              type=\"monotone\"\r\n                              dataKey=\"score\"\r\n                              stroke=\"#f97316\"\r\n                              strokeWidth={3}\r\n                              dot={{\r\n                                r: 4,\r\n                                strokeWidth: 2,\r\n                                stroke: '#000',\r\n                                fill: '#f97316',\r\n                              }}\r\n                              activeDot={{\r\n                                r: 6,\r\n                                strokeWidth: 0,\r\n                                fill: '#fff',\r\n                              }}\r\n                              fill=\"url(#colorScore)\"\r\n                            />\r\n                          </LineChart>\r\n                        </ResponsiveContainer>\r\n                      ) : (\r\n                        <div className=\"relative flex flex-col items-center justify-center h-full text-center space-y-2 rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden\">\r\n                          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-orange-500/[0.02]\" />\r\n                          <div\r\n                            className=\"w-full h-full absolute inset-0 opacity-[0.03]\"\r\n                            style={{\r\n                              backgroundImage:\r\n                                'linear-gradient(to right, #ffffff 1px, transparent 1px), linear-gradient(to bottom, #ffffff 1px, transparent 1px)',\r\n                              backgroundSize: '40px 40px',\r\n                            }}\r\n                          />\r\n                          <div className=\"z-10\">\r\n                            <p className=\"text-sm text-muted-foreground/60 font-medium\">\r\n                              No data recorded\r\n                            </p>\r\n                            <p className=\"text-xs text-muted-foreground/40\">\r\n                              Your weekly activity will appear here\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </GlassCard>\r\n                </motion.div>\r\n\r\n                {/* Trainer summary (only if there is real trainer data) */}\r\n                {hasTrainerActivity && trainerStats && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.15 }}\r\n                    className=\"h-full lg:col-span-1\"\r\n                  >\r\n                    <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85 h-full flex flex-col gap-6 min-h-[360px]\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"space-y-1\">\r\n                          <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                            <Brain className=\"w-5 h-5 text-orange-400\" />\r\n                            {t('dashboard.trainerProgressTitle')}\r\n                          </h2>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            {t('dashboard.trainerAccuracy')}:{' '}\r\n                            <span className=\"text-foreground font-medium\">\r\n                              {trainerStats.accuracy}%\r\n                            </span>\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"p-2 rounded-xl bg-orange-500/10 text-orange-400\">\r\n                          <Zap className=\"w-5 h-5\" />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col gap-4 flex-1\">\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                          <div className=\"p-3 rounded-xl bg-white/5 border border-white/5\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              {t('dashboard.trainerScenarios')}\r\n                            </p>\r\n                            <p className=\"text-xl font-bold\">\r\n                              {trainerStats.totalScenarios}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"p-3 rounded-xl bg-white/5 border border-white/5\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              {t('dashboard.trainerXp')}\r\n                            </p>\r\n                            <p className=\"text-xl font-bold text-orange-300\">\r\n                              {trainerStats.totalXp}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"p-3 rounded-xl bg-white/5 border border-white/5\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              {t('dashboard.trainerBestStreak')}\r\n                            </p>\r\n                            <p className=\"text-xl font-bold text-emerald-400\">\r\n                              {trainerStats.bestStreak}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"p-3 rounded-xl bg-white/5 border border-white/5\">\r\n                            <p className=\"text-xs text-muted-foreground mb-1\">\r\n                              {t('dashboard.categories')}\r\n                            </p>\r\n                            <p className=\"text-xl font-bold text-blue-400\">\r\n                              {trainerStats.categoriesCompleted}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 rounded-xl bg-gradient-to-br from-orange-500/10 to-transparent border border-orange-500/20 space-y-3\">\r\n                          <p className=\"text-xs font-medium text-orange-200 uppercase tracking-wider\">\r\n                            {t('dashboard.trainerAchievementsLabel')}\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                            {trainerStats.totalScenarios >= 1 ? (\r\n                              <>\r\n                                {t('trainer.firstSteps')}\r\n                                {trainerStats.totalAttempts >= 20 &&\r\n                                  trainerStats.accuracy >= 80 &&\r\n                                  `, ${t('trainer.accuracyAce')}`}\r\n                                {trainerStats.bestStreak >= 10 &&\r\n                                  `, ${t('trainer.streakMaster')}`}\r\n                                {trainerStats.totalXp >= 500 &&\r\n                                  `, ${t('trainer.xpHunter')}`}\r\n                                {trainerStats.categoriesCompleted >= 3 &&\r\n                                  `, ${t('trainer.categoryExplorer')}`}\r\n                              </>\r\n                            ) : (\r\n                              <span className=\"italic opacity-70\">\r\n                                Start training to unlock achievements...\r\n                              </span>\r\n                            )}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Button\r\n                        asChild\r\n                        className=\"w-full bg-orange-600 hover:bg-orange-500 text-white border-none shadow-lg shadow-orange-500/20 mt-auto\"\r\n                      >\r\n                        <Link href=\"/decision-trainer\">\r\n                          {t('trainer.title')}\r\n                          <Brain className=\"w-4 h-4 ml-2\" />\r\n                        </Link>\r\n                      </Button>\r\n                    </GlassCard>\r\n                  </motion.div>\r\n                )}\r\n\r\n                {/* Quick access / next steps */}\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 0.5 }}\r\n                  className=\"h-full lg:col-span-1\"\r\n                >\r\n                  <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85 h-full flex flex-col justify-between relative overflow-hidden min-h-[360px]\">\r\n                    <div className=\"pointer-events-none absolute -top-24 -right-24 w-64 h-64 bg-orange-500/5 rounded-full blur-3xl\" />\r\n\r\n                    <div className=\"relative z-10 space-y-4\">\r\n                      <div className=\"inline-flex items-center gap-2 rounded-full border border-orange-500/30 bg-orange-500/10 px-3 py-1 text-[11px] font-medium text-orange-300 uppercase tracking-wider\">\r\n                        <span>{t('dashboard.onboardingTitle')}</span>\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <h2 className=\"text-lg font-semibold\">\r\n                          Next steps for you\r\n                        </h2>\r\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                          {t('dashboard.onboardingSubtitle')}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"relative z-10 mt-8 grid gap-3\">\r\n                      <Button\r\n                        asChild\r\n                        className=\"h-12 justify-between bg-white/5 hover:bg-white/10 border border-white/10 text-foreground\"\r\n                      >\r\n                        <Link href=\"/materials\">\r\n                          <span className=\"flex items-center gap-2\">\r\n                            <span className=\"w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400\">\r\n                              1\r\n                            </span>\r\n                            {t('materials.title')}\r\n                          </span>\r\n                          <Target className=\"w-4 h-4 opacity-50\" />\r\n                        </Link>\r\n                      </Button>\r\n                      <Button\r\n                        asChild\r\n                        className=\"h-12 justify-between bg-white/5 hover:bg-white/10 border border-white/10 text-foreground\"\r\n                      >\r\n                        <Link href=\"/decision-trainer\">\r\n                          <span className=\"flex items-center gap-2\">\r\n                            <span className=\"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400\">\r\n                              2\r\n                            </span>\r\n                            {t('trainer.title')}\r\n                          </span>\r\n                          <Brain className=\"w-4 h-4 opacity-50\" />\r\n                        </Link>\r\n                      </Button>\r\n                      <Button\r\n                        asChild\r\n                        className=\"h-12 justify-between bg-white/5 hover:bg-white/10 border border-white/10 text-foreground\"\r\n                      >\r\n                        <Link href=\"/category\">\r\n                          <span className=\"flex items-center gap-2\">\r\n                            <span className=\"w-6 h-6 rounded-full bg-orange-500/20 flex items-center justify-center text-orange-400\">\r\n                              3\r\n                            </span>\r\n                            Category\r\n                          </span>\r\n                          <ArrowRight className=\"w-4 h-4 opacity-50\" />\r\n                        </Link>\r\n                      </Button>\r\n                    </div>\r\n                  </GlassCard>\r\n                </motion.div>\r\n\r\n                {/* Pass rate chart */}\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: 0.4 }}\r\n                  className=\"h-full lg:col-span-2\"\r\n                >\r\n                  <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85 h-full flex flex-col\">\r\n                    <div className=\"mb-6 space-y-2\">\r\n                      <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                        <Target className=\"w-5 h-5 text-orange-400\" />\r\n                        {t('dashboard.passRate')}\r\n                      </h2>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {t('dashboard.passRateDesc')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"relative w-full flex-1 min-h-[250px]\">\r\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <PieChart>\r\n                          <Pie\r\n                            data={pieData}\r\n                            cx=\"50%\"\r\n                            cy=\"50%\"\r\n                            innerRadius={60}\r\n                            outerRadius={90}\r\n                            paddingAngle={stats.totalTests > 0 ? 5 : 0}\r\n                            dataKey=\"value\"\r\n                            stroke=\"none\"\r\n                          >\r\n                            {pieData.map((entry, index) => (\r\n                              <Cell\r\n                                key={`cell-${index}`}\r\n                                fill={entry.color}\r\n                                stroke={\r\n                                  entry.color === '#27272a'\r\n                                    ? 'rgba(255,255,255,0.05)'\r\n                                    : 'none'\r\n                                }\r\n                                strokeWidth={entry.color === '#27272a' ? 1 : 0}\r\n                              />\r\n                            ))}\r\n                          </Pie>\r\n                          {stats.totalTests > 0 && (\r\n                            <Tooltip\r\n                              contentStyle={{\r\n                                backgroundColor: '#09090b',\r\n                                border: '1px solid #27272a',\r\n                                borderRadius: '12px',\r\n                                padding: '8px 12px',\r\n                                boxShadow:\r\n                                  '0 10px 30px -10px rgba(0,0,0,0.5)',\r\n                              }}\r\n                              labelStyle={{ color: '#fff', fontWeight: 600 }}\r\n                              itemStyle={{ color: '#fff' }}\r\n                              formatter={(value: number) => [\r\n                                `${value}`,\r\n                                'Count',\r\n                              ]}\r\n                            />\r\n                          )}\r\n                        </PieChart>\r\n                      </ResponsiveContainer>\r\n\r\n                      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                        <div className=\"text-center\">\r\n                          <span className=\"text-3xl font-bold\">\r\n                            {stats.totalTests}\r\n                          </span>\r\n                          <p className=\"text-xs text-muted-foreground uppercase tracking-wide\">\r\n                            Tests\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex justify-center gap-8 mt-6\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-3 h-3 rounded-full bg-emerald-500\" />\r\n                        <span className=\"text-sm font-medium text-emerald-100\">\r\n                          {t('dashboard.passed')} (\r\n                          {stats.totalTests > 0\r\n                            ? Math.round(\r\n                                (stats.passedTests / stats.totalTests) * 100\r\n                              )\r\n                            : 0}\r\n                          %)\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n                        <span className=\"text-sm font-medium text-red-100\">\r\n                          {t('dashboard.failed')} (\r\n                          {stats.totalTests > 0\r\n                            ? Math.round(\r\n                                (stats.failedTests / stats.totalTests) * 100\r\n                              )\r\n                            : 0}\r\n                          %)\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </GlassCard>\r\n                </motion.div>\r\n              </div>\r\n\r\n              {/* History CTA */}\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.6 }}\r\n                className=\"mb-4\"\r\n              >\r\n                <GlassCard className=\"p-6 md:p-8 border border-border/80 bg-black/85 relative overflow-hidden w-full\">\r\n                  <div className=\"pointer-events-none absolute -right-16 -bottom-16 w-48 h-48 rounded-full bg-white/5 blur-3xl\" />\r\n                  <div className=\"relative z-10 flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\r\n                    <div className=\"space-y-2\">\r\n                      <h2 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                        <History className=\"w-5 h-5 text-orange-400\" />\r\n                        {t('dashboard.testHistoryTitle')}\r\n                      </h2>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        {t('dashboard.testHistorySubtitle')}\r\n                      </p>\r\n                    </div>\r\n                    <Button\r\n                      size=\"lg\"\r\n                      variant=\"outline\"\r\n                      asChild\r\n                      className=\"w-full md:w-auto border-white/10 hover:bg-white/5\"\r\n                    >\r\n                      <Link href=\"/history\">\r\n                        {t('dashboard.viewHistoryCta')}\r\n                      </Link>\r\n                    </Button>\r\n                  </div>\r\n                </GlassCard>\r\n              </motion.div>\r\n            </div>\r\n          ) : (\r\n            /* ===================== EMPTY STATE ===================== */\r\n            <div className=\"w-full flex justify-center mt-10 mb-20\">\r\n              <GlassCard\r\n                className=\"\r\n                  p-10 md:p-12 \r\n                  border border-border/80 \r\n                  bg-black/70 \r\n                  max-w-3xl w-full \r\n                  rounded-3xl \r\n                  relative overflow-visible\r\n                  mx-auto\r\n                  before:rounded-3xl\r\n                \"\r\n              >\r\n                {/* Badge */}\r\n                <div className=\"flex justify-center\">\r\n                  <div className=\"inline-flex items-center gap-2 rounded-full border border-orange-500/30 bg-orange-500/10 px-4 py-1 text-[11px] font-medium text-orange-300 uppercase tracking-wider\">\r\n                    {t('dashboard.onboardingTitle')}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <h2 className=\"text-center text-3xl md:text-4xl font-semibold mt-6\">\r\n                  Start your learning journey\r\n                </h2>\r\n\r\n                {/* Subtitle */}\r\n                <p className=\"text-center text-sm md:text-base text-muted-foreground max-w-xl mx-auto mt-2 mb-10\">\r\n                  {t('dashboard.onboardingSubtitle')}\r\n                </p>\r\n\r\n                {/* Steps + connecting line */}\r\n                <div className=\"relative w-full max-w-2xl mx-auto\">\r\n                  {/* Curved connection line - Aligned with circles (top-6 = button padding, h-10 = circle height) */}\r\n                  <div className=\"absolute top-6 left-0 w-full h-10 hidden md:block pointer-events-none z-0 px-0\">\r\n                    <svg\r\n                      className=\"w-full h-full overflow-visible opacity-50\"\r\n                      viewBox=\"0 0 300 10\"\r\n                      preserveAspectRatio=\"none\"\r\n                    >\r\n                      <path\r\n                        d=\"M 50,5 C 100,10 100,0 150,5 C 200,10 200,0 250,5\"\r\n                        vectorEffect=\"non-scaling-stroke\"\r\n                        stroke=\"url(#step-gradient-2)\"\r\n                        strokeWidth=\"2\"\r\n                        fill=\"none\"\r\n                        strokeDasharray=\"4 4\"\r\n                      />\r\n                      <defs>\r\n                        <linearGradient id=\"step-gradient-2\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                          <stop offset=\"0%\" stopColor=\"#3b82f6\" />\r\n                          <stop offset=\"50%\" stopColor=\"#a855f7\" />\r\n                          <stop offset=\"100%\" stopColor=\"#f97316\" />\r\n                        </linearGradient>\r\n                      </defs>\r\n                    </svg>\r\n                  </div>\r\n\r\n                  {/* 3 buttons */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10\">\r\n                    {/* Step 1 */}\r\n                    <Button\r\n                      asChild\r\n                      className=\"h-auto py-6 flex-col gap-4 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-blue-500/50 text-foreground rounded-2xl relative overflow-hidden group\"\r\n                    >\r\n                      <Link href=\"/materials\">\r\n                        {/* Hover Effects */}\r\n                        <div className=\"pointer-events-none absolute -right-12 -top-12 h-32 w-32 rounded-full border border-dashed border-blue-500/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                        <div className=\"pointer-events-none absolute -bottom-8 left-0 h-24 w-24 rounded-full bg-blue-500/20 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n                        <div className=\"relative z-10 flex flex-col items-center gap-4\">\r\n                          <div className=\"w-10 h-10 rounded-full bg-zinc-900 border border-blue-500/30 flex items-center justify-center text-blue-400 font-bold shadow-lg shadow-blue-500/10 group-hover:scale-110 transition-transform duration-300\">\r\n                            1\r\n                          </div>\r\n                          <div className=\"space-y-1 text-center\">\r\n                            <span className=\"text-base font-semibold block\">\r\n                              {t('materials.title')}\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground block group-hover:text-blue-300 transition-colors\">\r\n                              Read the theory\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </Button>\r\n\r\n                    {/* Step 2 */}\r\n                    <Button\r\n                      asChild\r\n                      className=\"h-auto py-6 flex-col gap-4 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-purple-500/50 text-foreground rounded-2xl relative overflow-hidden group\"\r\n                    >\r\n                      <Link href=\"/decision-trainer\">\r\n                        {/* Hover Effects */}\r\n                        <div className=\"pointer-events-none absolute -right-12 -top-12 h-32 w-32 rounded-full border border-dashed border-purple-500/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                        <div className=\"pointer-events-none absolute -bottom-8 left-0 h-24 w-24 rounded-full bg-purple-500/20 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n                        <div className=\"relative z-10 flex flex-col items-center gap-4\">\r\n                          <div className=\"w-10 h-10 rounded-full bg-zinc-900 border border-purple-500/30 flex items-center justify-center text-purple-400 font-bold shadow-lg shadow-purple-500/10 group-hover:scale-110 transition-transform duration-300\">\r\n                            2\r\n                          </div>\r\n                          <div className=\"space-y-1 text-center\">\r\n                            <span className=\"text-base font-semibold block\">\r\n                              {t('trainer.title')}\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground block group-hover:text-purple-300 transition-colors\">\r\n                              Practice scenarios\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </Button>\r\n\r\n                    {/* Step 3 */}\r\n                    <Button\r\n                      asChild\r\n                      className=\"h-auto py-6 flex-col gap-4 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-orange-500/50 text-foreground rounded-2xl relative overflow-hidden group\"\r\n                    >\r\n                      <Link href=\"/category\">\r\n                        {/* Decision Trainer Hover Effects */}\r\n                        <div className=\"pointer-events-none absolute -right-12 -top-12 h-32 w-32 rounded-full border border-dashed border-orange-500/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                        <div className=\"pointer-events-none absolute -bottom-8 left-0 h-24 w-24 rounded-full bg-orange-500/20 blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n                        <div className=\"relative z-10 flex flex-col items-center gap-4\">\r\n                          <div className=\"w-10 h-10 rounded-full bg-zinc-900 border border-orange-500/30 flex items-center justify-center text-orange-400 font-bold shadow-lg shadow-orange-500/10 group-hover:scale-110 transition-transform duration-300\">\r\n                            3\r\n                          </div>\r\n                          <div className=\"space-y-1 text-center\">\r\n                            <span className=\"text-base font-semibold block\">\r\n                              Category\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground block group-hover:text-orange-300 transition-colors\">\r\n                              Take the test\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </Link>\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </GlassCard>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}